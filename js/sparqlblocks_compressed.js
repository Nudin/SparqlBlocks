// Do not edit this file; automatically generated by build.py.
'use strict';

var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};
goog.define=function(a,b){var c=b;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,a)?c=goog.global.CLOSURE_UNCOMPILED_DEFINES[a]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]));goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;
goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(a){if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,b){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a,b)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if(!goog.isString(a)||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};
goog.module.getInternal_=function(a){if(!COMPILED)return goog.isProvided_(a)?a in goog.loadedModules_?goog.loadedModules_[a]:goog.getObjectByName(a):null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};goog.addDependency=function(a,b,c,d){if(goog.DEPENDENCIES_ENABLED){var e;a=a.replace(/\\/g,"/");for(var f=goog.dependencies_,g=0;e=b[g];g++)f.nameToPath[e]=a,f.pathIsModule[a]=!!d;for(d=0;b=c[d];d++)a in f.requires||(f.requires[a]={}),f.requires[a][b]=!0}};
goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(a);if(goog.isProvided_(a))return goog.isInModuleLoader_()?goog.module.getInternal_(a):null;if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b)return goog.included_[b]=!0,goog.writeScripts_(),null}a="goog.require could not find: "+a;goog.logToConsole_(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("SCRIPT"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),
d=-1==d?c.length:d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a,b){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(a,b)&&(goog.dependencies_.written[a]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(a){goog.importScript_("",'goog.retrieveAndExecModule_("'+a+'");')&&(goog.dependencies_.written[a]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(a,b){return goog.LOAD_MODULE_USING_EVAL&&
goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(b+"\n//# sourceURL="+a+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+b+"\n;return exports});\n//# sourceURL="+a+"\n"},goog.loadQueuedModules_=function(){var a=goog.queuedModules_.length;if(0<a){var b=goog.queuedModules_;goog.queuedModules_=[];for(var c=0;c<a;c++)goog.maybeProcessDeferredPath_(b[c])}},goog.maybeProcessDeferredDep_=function(a){goog.isDeferredModule_(a)&&goog.allDepsAreAvailable_(a)&&(a=goog.getPathFromDeps_(a),
goog.maybeProcessDeferredPath_(goog.basePath+a))},goog.isDeferredModule_=function(a){return(a=goog.getPathFromDeps_(a))&&goog.dependencies_.pathIsModule[a]?goog.basePath+a in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(a){if((a=goog.getPathFromDeps_(a))&&a in goog.dependencies_.requires)for(var b in goog.dependencies_.requires[a])if(!goog.isProvided_(b)&&!goog.isDeferredModule_(b))return!1;return!0},goog.maybeProcessDeferredPath_=function(a){if(a in goog.dependencies_.deferred){var b=
goog.dependencies_.deferred[a];delete goog.dependencies_.deferred[a];goog.globalEval(b)}},goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1};var c;if(goog.isFunction(a))c=a.call(goog.global,{});else if(goog.isString(a))c=goog.loadModuleFromSource_.call(goog.global,a);else throw Error("Invalid module definition");var d=goog.moduleLoaderState_.moduleName;if(!goog.isString(d)||!d)throw Error('Invalid module name "'+d+'"');goog.moduleLoaderState_.declareLegacyNamespace?
goog.constructNamespace_(d,c):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(c);goog.loadedModules_[d]=c;if(goog.moduleLoaderState_.declareTestMethods)for(var e in c)if(0===e.indexOf("test",0)||"tearDown"==e||"setUp"==e||"setUpPage"==e||"tearDownPage"==e)goog.global[e]=c[e]}finally{goog.moduleLoaderState_=b}},goog.loadModuleFromSource_=function(a){eval(a);return{}},goog.writeScriptSrcNode_=function(a){goog.global.document.write('<script type="text/javascript" src="'+a+'">\x3c/script>')},goog.appendScriptSrcNode_=
function(a){var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.src=a;c.defer=!1;c.async=!1;b.head.appendChild(c)},goog.writeScriptTag_=function(a,b){if(goog.inHtmlDocument_()){var c=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}var d=goog.IS_OLD_IE_;void 0===b?d?(d=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+
")' ",c.write('<script type="text/javascript" src="'+a+'"'+d+">\x3c/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(a):goog.writeScriptSrcNode_(a):c.write('<script type="text/javascript">'+b+"\x3c/script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(a,b){"complete"==a.readyState&&goog.lastNonModuleScriptIndex_==b&&goog.loadQueuedModules_();return!0},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&
(d.visited[e]=!0,e in d.requires))for(var f in d.requires[e])if(!goog.isProvided_(f))if(f in d.nameToPath)a(d.nameToPath[f]);else throw Error("Undefined nameToPath for "+f);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(var f=0;f<b.length;f++)e=b[f],goog.dependencies_.written[e]=!0;var g=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(f=0;f<b.length;f++)if(e=b[f])d.pathIsModule[e]?goog.importModule_(goog.basePath+e):goog.importScript_(goog.basePath+
e);else throw goog.moduleLoaderState_=g,Error("Undefined script input");goog.moduleLoaderState_=g},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};
goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return b.responseText};
goog.retrieveAndExecModule_=function(a){if(!COMPILED){var b=a;a=goog.normalizePath_(a);var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,d=goog.loadFileSync_(a);if(null!=d)d=goog.wrapModule_(a,d),goog.IS_OLD_IE_?(goog.dependencies_.deferred[b]=d,goog.queuedModules_.push(b)):c(a,d);else throw Error("load of "+a+"failed");}};
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(b){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,d=c.createElement("SCRIPT");d.type="text/javascript";d.defer=!1;d.appendChild(c.createTextNode(a));
c.body.appendChild(d);c.body.removeChild(d)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(b){return goog.cssNameMapping_[b]||b},d=function(b){b=b.split("-");for(var a=[],d=0;d<b.length;d++)a.push(c(b[d]));return a.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(b){return b};return b?a+"-"+d(b):d(a)};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return d in b?b[d]:a}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_){for(var e=Array(arguments.length-1),f=1;f<arguments.length;f++)e[f-1]=arguments[f];return d.superClass_.constructor.apply(a,e)}e=Array(arguments.length-2);for(f=2;f<arguments.length;f++)e[f-2]=arguments[f];for(var f=!1,g=a.constructor;g;g=
g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(a,b){var c=b.constructor,d=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(a,b){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(b&&b.prototype&&b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return a;var c=function(){var b=a.apply(this,arguments)||this;b[goog.UID_PROPERTY_]=b[goog.UID_PROPERTY_];this.constructor===c&&Object.seal(b);return b};return c}return a};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};goog.tagUnsealableClass=function(a){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";/*

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var SparqlBlocks={};
SparqlBlocks.Prefixes=function(){var a=null,b={},c=function(a){var e=b[a];if(e)return{prefix:e,localPart:""};var f=null,g=a.substr(0,a.length-1),e=g.lastIndexOf("#");-1<e?f=a.substr(0,e+1):(e=g.lastIndexOf("/"),-1<e&&(f=a.substr(0,e+1)));if(null!=f){if(f=c(f))return{prefix:f.prefix,localPart:f.localPart+a.substr(e+1)}}else return null};$.getJSON("../prefix.cc/all.file.json",function(c){a=c;Object.keys(c).forEach(function(a){b[c[a]]||(b[c[a]]=a)})});return{lookForPrefix:function(b){return a[b]},lookForIri:c}}();SparqlBlocks.SelfDuplication=function(){var a=function(b,a){return function(){if(a){var c=b.getRelativeToSurfaceXY(),d=a.getRelativeToSurfaceXY(),e=c.y-d.y;100>=Math.sqrt(Math.pow(c.x-d.x,2)+Math.pow(e,2))&&(a.dispose(),a=null)}clearTimeout(0)}},b=function(b){return function(){Blockly.unbindEvent_(b.boundEvents.mouseover);var a=Blockly.Xml.blockToDom_(b);Blockly.Xml.deleteNext(a);var a=Blockly.Xml.domToBlock(b.workspace,a),c=b.getRelativeToSurfaceXY();a.moveBy(c.x,c.y);a.select();f(b);Blockly.bindEvent_(a.getSvgRoot(),
"mouseout",null,e(b,a));Blockly.bindEvent_(a.getSvgRoot(),"mouseover",null,d(b,a));a.setDeletable(!0);a.setMovable(!0);a.setEditable(!0)}},c=function(a){return function(c){Blockly.dragMode_||b(a)()}},d=function(b,a){return function(b){a.mouseOutPid_&&clearTimeout(a.mouseOutPid_)}},e=function(b,c){return function(d){Blockly.dragMode_||(c.mouseOutPid_=setTimeout(function(){a(b,c)();c.mouseOutPid_=null},1))}},f=function(b,a){if(!a&&(a=b.svgPath_,!a))throw"SVG Path Element Not Found for Block: "+b;b.boundEvents=
{mouseover:Blockly.bindEvent_(a,"mouseover",null,c(b))}};return{bindMouseEvents:f}}();SparqlBlocks.Output=function(){var a={},b=function(b){var c=a[b];c||(c="http://www.w3.org/2001/XMLSchema#"+b,a[b]=c);return c},c=function(a,c,f,g){var h=Blockly.Block.obtain(f,"sparql_column");h.initSvg();h.setFieldValue(a,"COLNAME");g.connect(h.outputConnection);h.render();var k=h.getInput("VALUES").connection;c.forEach(function(a){var c=k,d=Blockly.Block.obtain(f,"sparql_value_container");d.initSvg();c.connect(d.previousConnection);d.render();var c=d.getInput("VALUE").connection,e=null;if(a)switch(a.type){case "literal":case "typed-literal":if((e=
a.datatype)&&e!=b("string")&&e!=b("langString")){a=a.value;var g=null;switch(e){case b("integer"):case b("decimal"):case b("float"):case b("double"):case b("byte"):case b("short"):case b("int"):case b("long"):case b("unsignedByte"):case b("unsignedShort"):case b("unsignedInt"):case b("unsignedLong"):case b("positiveInteger"):case b("nonNegativeInteger"):case b("negativeInteger"):case b("nonPositiveInteger"):g=Blockly.Block.obtain(f,"sparql_math_number");g.initSvg();g.setFieldValue(a,"NUM");break;
case b("boolean"):g=Blockly.Block.obtain(f,"sparql_logic_boolean");g.initSvg();g.setFieldValue(a,"BOOL");break;default:var h=SparqlBlocks.Prefixes.lookForIri(e);h?(g=Blockly.Block.obtain(f,"sparql_text_with_type_pref"),g.initSvg(),g.setFieldValue(a,"TEXT"),g.setFieldValue(h.prefix,"DT_PREFIX"),g.setFieldValue(h.localPart,"DT_LOCAL_NAME")):(g=Blockly.Block.obtain(f,"sparql_text_with_type_iri"),g.initSvg(),g.setFieldValue(a,"TEXT"),g.setFieldValue(e,"DT_IRI"))}a=g}else e=null,(g=a["xml:lang"])?(e=Blockly.Block.obtain(f,
"sparql_text_with_lang"),e.initSvg(),e.setFieldValue(g,"LANG")):(e=Blockly.Block.obtain(f,"sparql_text"),e.initSvg()),e.setFieldValue(a.value,"TEXT"),a=e;e=a;break;case "uri":a=a.value;e=SparqlBlocks.Prefixes.lookForIri(a);null!=e?(a=Blockly.Block.obtain(f,"sparql_prefixed_iri"),a.initSvg(),a.setFieldValue(e.prefix,"PREFIX"),a.setFieldValue(e.localPart,"LOCAL_NAME"),e=a):(e=Blockly.Block.obtain(f,"sparql_iri"),e.initSvg(),e.setFieldValue(a,"IRI"));break;case "bnode":a=a.value,e=Blockly.Block.obtain(f,
"sparql_prefixed_iri"),e.initSvg(),e.setFieldValue("_","PREFIX"),e.setFieldValue(a,"LOCAL_NAME")}e&&(e.setDeletable(!1),e.setMovable(!1),e.setEditable(!1),SparqlBlocks.SelfDuplication.bindMouseEvents(e),c.connect(e.outputConnection),e.render());k=d.nextConnection});return h};return{blocksFromSelectResults:function(b,a){console.log("data: "+JSON.stringify(a));var f=Blockly.Block.obtain(b,"sparql_table");f.initSvg();for(var g=a.head.vars,h=a.results.bindings,k=g.length,l=0;l<k;l++){f.appendValueInput("COL"+
(l+1)).setCheck("Column");var n=f.getInput("COL"+(l+1)).connection,m=g[l];c(m,h.map(function(b){return b[m]}),b,n)}f.colCount_=k;f.resultsData=a;return f}}}();SparqlBlocks.Sparql=new Blockly.Generator("Sparql");SparqlBlocks.Sparql.addReservedWords("");SparqlBlocks.Sparql.STMNT_BRK="###\n";SparqlBlocks.Sparql.STMNT_BRK_RE=/###\n/;SparqlBlocks.Sparql.stmJoin=function(a,b){var c=a.split(SparqlBlocks.Sparql.STMNT_BRK_RE);c.pop();return c.join(b)};SparqlBlocks.Sparql.ORDER_ATOMIC=0;SparqlBlocks.Sparql.ORDER_MEMBER=1;SparqlBlocks.Sparql.ORDER_NEW=1;SparqlBlocks.Sparql.ORDER_FUNCTION_CALL=2;SparqlBlocks.Sparql.ORDER_INCREMENT=3;
SparqlBlocks.Sparql.ORDER_DECREMENT=3;SparqlBlocks.Sparql.ORDER_LOGICAL_NOT=4;SparqlBlocks.Sparql.ORDER_BITWISE_NOT=4;SparqlBlocks.Sparql.ORDER_UNARY_PLUS=4;SparqlBlocks.Sparql.ORDER_UNARY_NEGATION=4;SparqlBlocks.Sparql.ORDER_TYPEOF=4;SparqlBlocks.Sparql.ORDER_VOID=4;SparqlBlocks.Sparql.ORDER_DELETE=4;SparqlBlocks.Sparql.ORDER_MULTIPLICATION=5;SparqlBlocks.Sparql.ORDER_DIVISION=5;SparqlBlocks.Sparql.ORDER_MODULUS=5;SparqlBlocks.Sparql.ORDER_ADDITION=6;SparqlBlocks.Sparql.ORDER_SUBTRACTION=6;
SparqlBlocks.Sparql.ORDER_BITWISE_SHIFT=7;SparqlBlocks.Sparql.ORDER_RELATIONAL=8;SparqlBlocks.Sparql.ORDER_IN=8;SparqlBlocks.Sparql.ORDER_INSTANCEOF=8;SparqlBlocks.Sparql.ORDER_EQUALITY=9;SparqlBlocks.Sparql.ORDER_BITWISE_AND=10;SparqlBlocks.Sparql.ORDER_BITWISE_XOR=11;SparqlBlocks.Sparql.ORDER_BITWISE_OR=12;SparqlBlocks.Sparql.ORDER_LOGICAL_AND=13;SparqlBlocks.Sparql.ORDER_LOGICAL_OR=14;SparqlBlocks.Sparql.ORDER_CONDITIONAL=15;SparqlBlocks.Sparql.ORDER_ASSIGNMENT=16;
SparqlBlocks.Sparql.ORDER_COMMA=17;SparqlBlocks.Sparql.ORDER_NONE=99;SparqlBlocks.Sparql.init=function(a){};SparqlBlocks.Sparql.finish=function(a){return a};SparqlBlocks.Sparql.scrubNakedValue=function(a){return a+";\n"};SparqlBlocks.Sparql.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};
SparqlBlocks.Sparql.scrub_=function(a,b){var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var d=a.getCommentText();d&&(c+=SparqlBlocks.Sparql.prefixLines(d,"// ")+"\n");for(var e=0;e<a.inputList.length;e++)a.inputList[e].type==Blockly.INPUT_VALUE&&(d=a.inputList[e].connection.targetBlock())&&(d=SparqlBlocks.Sparql.allNestedComments(d))&&(c+=SparqlBlocks.Sparql.prefixLines(d,"// "))}e=a.nextConnection&&a.nextConnection.targetBlock();e=SparqlBlocks.Sparql.blockToCode(e);return c+
b+e};/*


 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
SparqlBlocks.Exec=function(){var a=function(b,a,c){b||(b="http://live.dbpedia.org/sparql");b=b+"?query="+encodeURIComponent(a);return $.ajax({headers:{Accept:"application/sparql-results+json"},dataType:"json",method:"GET",url:b,success:function(b){c(null,b)},error:function(b,a,d){c({jqXHR:b,textStatus:a,errorThrown:d})}})},b=function(b,a){var c=b.targetBlock();c&&c.dispose();b.connect(a.previousConnection);a.render()},c=function(b){(b=b.targetBlock())&&b.dispose()};return{sparqlExecAndPublish:function(c,
e,f,g,h){var k=Blockly.Block.obtain(f,"sparql_execution_in_progress");k.initSvg();b(g,k);return a(c,e,function(a,c){var d=null;if(a){d=Blockly.Block.obtain(f,"sparql_execution_error");d.initSvg();var e=a.textStatus?a.textStatus:"unknown problem";a.jqXHR.status&&(e+=" "+a.jqXHR.status);a.jqXHR.statusText&&(e+=": "+a.jqXHR.statusText);d.setFieldValue(e,"ERRORTYPE");if(e=a.jqXHR.responseText){var k=null,k=40<e.length?e.substr(0,37)+"...":e;d.setFieldValue(k,"ERRORDESCR");d.setTooltip(e)}}else d=SparqlBlocks.Output.blocksFromSelectResults(f,
c);b(g,d);h(c)})},sparqlExecAndAlert:function(b,c){return a(b,c,function(b,a){b?alert("Error: "+b):alert("Results:\n"+JSON.stringify(a))})},blockExec:function(b){var a=b.getInput("RESULTS");if(a&&(a=a.connection)){var f=b.getFieldValue("ENDPOINT"),f=f?encodeURI(f):null,g=SparqlBlocks.Sparql.valueToCode(b,"QUERY",SparqlBlocks.Sparql.ORDER_NONE);if(f!=b.endpointUri||g!=b.sparqlQueryStr)b.endpointUri=f,b.sparqlQueryStr=g,b.queryReq&&b.queryReq.abort(),g?(console.log("Ready to execute query: "+g),b.resultsData=
null,b.queryReq=SparqlBlocks.Exec.sparqlExecAndPublish(f,g,b.workspace,a,function(a){b.queryReq=null;b.resultsData=a})):(console.log("Empty query"),b.resultsData=null,c(a),b.queryReq=null)}}}}();SparqlBlocks.Types=function(){var a={},b=function(b,c){a[b]=c;c.children=[];if(null!=c.parents)for(var f=c.parents,g=0;g<f.length;g++){var h=f[g];a[h]&&a[h].children.push(b)}},c=function(b){var e=a[b];if(!e.extension){b=[b];e.aliases&&(b=b.concat(e.aliases));for(var f=e.children,g=0;g<f.length;g++)b=b.concat(c(f[g]));e.extension=b}return e.extension};b("TriplesBlock",{});b("PropertyList",{});b("Expr",{});b("GraphTermOrVar",{parents:["Expr"]});b("Verb",{});b("ResourceOrVar",{parents:["GraphTermOrVar",
"Verb"]});b("StringExpr",{parents:["Expr"],aliases:["String"]});b("NumberExpr",{parents:["Expr"],aliases:["Number"]});b("BooleanExpr",{parents:["Expr"],aliases:["Boolean"]});b("BnodeExpr",{parents:["Expr"]});b("IriExpr",{parents:["Expr"]});b("AnyExpr",{parents:["StringExpr","NumberExpr","BooleanExpr","BnodeExpr","IriExpr"]});b("Var",{parents:["GraphTermOrVar","ResourceOrVar","AnyExpr"]});b("GraphTerm",{parents:["GraphTermOrVar"]});b("Resource",{parents:["GraphTerm","ResourceOrVar"]});b("Bnode",{parents:["Resource",
"BnodeExpr"]});b("Iri",{parents:["Resource","IriExpr"]});b("Literal",{parents:["GraphTerm"]});b("LiteralString",{parents:["Literal","StringExpr"]});b("LiteralNumber",{parents:["Literal","NumberExpr"]});b("LiteralBoolean",{parents:["Literal","BooleanExpr"]});return{setType:b,getExtension:c}}();SparqlBlocks.Blocks=function(){var a=function(b){return function(){b.call(this)}},b=function(b){return function(a){b&&b.call(this,a)}};return{block:function(c,d){d.customContextMenu=b(d.customContextMenu);d.init=a(d.init);Blockly.Blocks[c]=d},insertOptionBeforeHelp:function(b,a){var e=b.pop(),f=e&&"Help"==e.text;!f&&e&&b.push(e);b.push(a);f&&b.push(e)}}}();SparqlBlocks.Blocks.bgp={};
(function(){var a=SparqlBlocks.Types.getExtension,b=function(b){b.setHelpUrl("http://www.w3.org/TR/sparql11-query/#QSynTriples")},c=function(a){b(a);a.setColour(65)},d=function(a){b(a);a.setColour(120)},e=function(b,a){if(b.getInputConnection(a)){var c=a.targetBlock;if(c&&(c=c.varsInScope()))return c}return[]};SparqlBlocks.Blocks.block("sparql_verb_objectlist",{init:function(){c(this);this.appendValueInput("VERB").setCheck(a("Verb"));this.appendStatementInput("OBJECT").setCheck("ObjectList").appendField("\u21b3");this.setInputsInline(!0);
this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")},getVarsInScope:function(){return _.union(e(this,"VERB"),e(this,"OBJECT"))}});SparqlBlocks.Blocks.block("sparql_verb_object",{init:function(){c(this);this.appendValueInput("VERB").setCheck(a("Verb")).appendField("\u2501\u252b");this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2523\u2501\u25b6");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,
"PropertyList");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_reversePath_object",{init:function(){c(this);this.appendValueInput("VERB").setCheck(a("Resource")).appendField("\u25c0\u2501\u252b");this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2523\u2501");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_closurePath_object",{init:function(){c(this);
this.appendValueInput("VERB").setCheck(a("Resource")).appendField("\u2501\u252b");this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2523 \u2731 \u2501\u25b6");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_reverseClosurePath_object",{init:function(){c(this);this.appendValueInput("VERB").setCheck(a("Resource")).appendField("\u25c0\u2501 \u2731 \u252b");
this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2523\u2501");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_isa",{init:function(){c(this);this.appendValueInput("TYPE").setCheck(a("ResourceOrVar")).appendField("is a");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_subject_propertylist",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(a("ResourceOrVar"));this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("  \u230a");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_typedsubject_propertylist",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(a("ResourceOrVar"));
this.appendValueInput("TYPE").setCheck(a("ResourceOrVar")).appendField("is a");this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("  &");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_anonsubject_propertylist",{init:function(){d(this);this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("s.t.");this.setInputsInline(!0);this.setOutput(!0,
"Resource");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_subject_verb_objectlist",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(a("ResourceOrVar"));this.appendValueInput("VERB").appendField("has").setCheck(a("Verb"));this.appendStatementInput("OBJECT_LIST").setCheck("ObjectList").appendField("\u21b3");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_subject_verb_object",
{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(a("ResourceOrVar"));this.appendValueInput("VERB").appendField("has").setCheck(a("Verb"));this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2192");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}})})();SparqlBlocks.Blocks.control={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_filter",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#scopeFilters");this.setColour(210);this.appendValueInput("CONDITION").setCheck(a("BooleanExpr")).appendField("provided that");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_union",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#alternatives");this.setColour(260);
this.appendStatementInput("OP1").setCheck("TriplesBlock");this.appendStatementInput("OP2").setCheck("TriplesBlock").appendField("or");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_optional",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#optionals");this.setColour(260);this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("optionally");this.setInputsInline(!0);
this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}})})();SparqlBlocks.Blocks.exec={};
(function(){var a=function(b){return{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation");this.setColour(330);b&&b.endpointField&&this.appendDummyInput().appendField(new Blockly.FieldImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAH8SURBVHjaYvz//z8DJQAggFiQOXv37mUHGugHxJH//v3TANKqQAxk/rsCpO8A6blAvDcgIOAvTA9AADHCXADUrAVkLxcVFdWTkJBg4ObmZuDi4mIAyX/8+JHh8+fPDI8ePWJ4/fr1EaBYRHBw8FOQPoAAAisA4V27du1/+PAhyLr/uMDv37//nz9//v/KlSsXwvQBBBATzClAjra4uDhBP0tLSzMALfGE8QECCB4GQEGwiS9fvmTg4OBgYGdnZ2BlZQWLffv2jeHdu3cMT58+ZVBWVgarhQGAAMIwgIWFheH9+/cMP378APP//PnD8OnTJ4afP3+C5UBiyAYABBALkhfAmJmZGewCkGIQBvobbAgssEGa//6FRwIDQABhuACkGKaJkZERrBgmxsTEhOECgADCMACmAYRBrgHxQZpBGMSHqYEBgADCMACmGKQIZgDMBTBvgtgwABBAKAaAMMx2mIHILoOp+/XrF9wAgACCpwOQAlBUAVMiOAqRASgsJCUlGYyNjRmePXuG4gKAAEJ2QcLx48dXaWpqcsvLy4MNAWkE2Q7SDErKV65cYbhw4cILoAv9YPoAAogROTcuWbJEEWhQDRAHA0OcH5QXQN4BuQyYLkAaFwNd2lNZWfkKpgcggBhxZedZs2bxAjWoAPE/oJNvFBcX/8SmDiDAAO2Un30ZkCt9AAAAAElFTkSuQmCC",16,
16,"Endpoint")).appendField(new Blockly.FieldTextInput("http://live.dbpedia.org/sparql"),"ENDPOINT");this.appendStatementInput("QUERY").setCheck("Select").appendField(" \u2699");this.appendStatementInput("RESULTS").setCheck("Table").appendField("\u21aa");this.setTooltip("")},onchange:function(){SparqlBlocks.Exec.blockExec(this)},customContextMenu:function(b){if(this.sparqlQueryStr){var a=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(b,{text:"Save Query as SPARQL",enabled:!0,callback:function(){var b=
new Blob([a.sparqlQueryStr],{type:"application/sparql-query"});saveAs(b,"query.rq")}})}this.resultsData&&(a=this,SparqlBlocks.Blocks.insertOptionBeforeHelp(b,{text:"Save Results as JSON",enabled:!0,callback:function(){var b=JSON.stringify(a.resultsData);b&&(b=new Blob([b],{type:"application/sparql-results+json"}),saveAs(b,"results.json"))}}))}}};SparqlBlocks.Blocks.block("sparql_execution",a());SparqlBlocks.Blocks.block("sparql_execution_endpoint",a({endpointField:!0}));SparqlBlocks.Blocks.block("sparql_execution_in_progress",
{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation");this.setColour(330);this.appendDummyInput().appendField("execution in progress...");this.setPreviousStatement(!0,"Table");this.setTooltip("");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1)}});SparqlBlocks.Blocks.block("sparql_execution_error",{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-failure");this.setColour(330);this.appendDummyInput().appendField("Error executing query!");
this.appendDummyInput().appendField("Error Name").appendField(new Blockly.FieldTextInput("ERROR TYPE"),"ERRORTYPE");this.appendDummyInput().appendField("Description").appendField(new Blockly.FieldTextInput("ERROR"),"ERRORDESCR");this.setPreviousStatement(!0,"Table");this.setTooltip("");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1)}})})();SparqlBlocks.Blocks.logic={};
(function(){var a=SparqlBlocks.Types.getExtension,b=function(b){return a("Var"==b?"Expr":b)};SparqlBlocks.Blocks.logic.HUE=210;SparqlBlocks.Blocks.block("sparql_logic_compare",{init:function(){var b=this.RTL?[["=","EQ"],["\u2260","NEQ"],[">","LT"],["\u2265","LTE"],["<","GT"],["\u2264","GTE"]]:[["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"]];this.setHelpUrl(Blockly.Msg.LOGIC_COMPARE_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");
this.appendValueInput("A");this.appendValueInput("B").appendField(new Blockly.FieldDropdown(b),"OP");this.setInputsInline(!0);var a=this;this.setTooltip(function(){var b=a.getFieldValue("OP");return{EQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ,NEQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ,LT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT,LTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE,GT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT,GTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE}[b]});this.prevBlocks_=[null,null]},onchange:function(){if(this.workspace){var a=
this.getInputTargetBlock("A"),d=this.getInputTargetBlock("B");if(a&&d&&!a.outputConnection.checkType_(d.outputConnection)&&0==_.intersection(b(a.outputConnection.check_),b(d.outputConnection.check_)).length)for(var e=0;e<this.prevBlocks_.length;e++){var f=this.prevBlocks_[e];if(f===a||f===d)f.setParent(null),f.bumpNeighbours_()}this.prevBlocks_[0]=a;this.prevBlocks_[1]=d}}});SparqlBlocks.Blocks.block("sparql_logic_operation",{init:function(){var b=[[Blockly.Msg.LOGIC_OPERATION_AND,"AND"],[Blockly.Msg.LOGIC_OPERATION_OR,
"OR"]];this.setHelpUrl(Blockly.Msg.LOGIC_OPERATION_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("A").setCheck(a("BooleanExpr"));this.appendValueInput("B").setCheck(a("BooleanExpr")).appendField(new Blockly.FieldDropdown(b),"OP");this.setInputsInline(!0);var d=this;this.setTooltip(function(){var b=d.getFieldValue("OP");return{AND:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND,OR:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR}[b]})}});SparqlBlocks.Blocks.block("sparql_logic_negate",
{init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NEGATE_TITLE,args0:[{type:"input_value",name:"BOOL",check:a("BooleanExpr")}],output:"BooleanExpr",colour:SparqlBlocks.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_NEGATE_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NEGATE_HELPURL})}});SparqlBlocks.Blocks.block("sparql_logic_boolean",{init:function(){var b=[[Blockly.Msg.LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.Msg.LOGIC_BOOLEAN_FALSE,"FALSE"]];this.setHelpUrl(Blockly.Msg.LOGIC_BOOLEAN_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);
this.setOutput(!0,"LiteralBoolean");this.appendDummyInput().appendField(new Blockly.FieldDropdown(b),"BOOL");this.setTooltip(Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_logic_null",{init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_NULL_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0);this.appendDummyInput().appendField(Blockly.Msg.LOGIC_NULL);this.setTooltip(Blockly.Msg.LOGIC_NULL_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_logic_ternary",{init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_TERNARY_HELPURL);
this.setColour(SparqlBlocks.Blocks.logic.HUE);this.appendValueInput("IF").setCheck(a("BooleanExpr")).appendField(Blockly.Msg.LOGIC_TERNARY_CONDITION);this.appendValueInput("THEN").appendField(Blockly.Msg.LOGIC_TERNARY_IF_TRUE);this.appendValueInput("ELSE").appendField(Blockly.Msg.LOGIC_TERNARY_IF_FALSE);this.setOutput(!0,"Expr");this.setTooltip(Blockly.Msg.LOGIC_TERNARY_TOOLTIP);this.prevParentConnection_=null},onchange:function(){if(this.workspace){var b=this.getInputTargetBlock("THEN"),a=this.getInputTargetBlock("ELSE"),
e=this.outputConnection.targetConnection;if((b||a)&&e)for(var f=0;2>f;f++){var g=1==f?b:a;g&&!g.outputConnection.checkType_(e)&&(e===this.prevParentConnection_?(this.setParent(null),e.sourceBlock_.bumpNeighbours_()):(g.setParent(null),g.bumpNeighbours_()))}this.prevParentConnection_=e}}});SparqlBlocks.Blocks.block("sparql_exists",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#neg-exists");this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("exists");
this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_not_exists",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#neg-notexists");this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("not exists");this.setTooltip("")}})})();SparqlBlocks.Blocks.main={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_construct",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#construct");this.setColour(290);this.appendDummyInput().appendField("CONSTRUCT");this.appendStatementInput("CONSTRUCT").setCheck("ConstructTriples");this.appendDummyInput().appendField("WHERE");this.appendStatementInput("WHERE").setCheck("TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_select",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#select");
this.setColour(290);this.appendDummyInput().appendField("select all the variables");this.appendStatementInput("WHERE").setCheck("TriplesBlock").appendField("where");this.orderFieldCount_=1;this.appendValueInput("ORDER_FIELD1").setCheck(a("Expr")).appendField("order by","ORDER_LABEL1").appendField(new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]),"ORDER_DIRECTION1");this.appendDummyInput("AFTER_ORDER").appendField("& limit to first").appendField(new Blockly.FieldTextInput("10"),"LIMIT").appendField("rows");
this.setInputsInline(!0);this.setPreviousStatement(!0,"Select");this.setTooltip("")},saveQueryAsSparql:function(){var b=SparqlBlocks.Sparql.blockToCode(this);b&&(b=new Blob([b],{type:"application/sparql-query"}),saveAs(b,"query.rq"))},customContextMenu:function(b){var a=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(b,{text:"Save Query as SPARQL",enabled:!0,callback:function(){a.saveQueryAsSparql()}})},onchange:function(){var b=this.getInput("ORDER_FIELD"+this.orderFieldCount_);if(b&&b.connection.targetConnection){if(1<
this.orderFieldCount_){var c="ORDER_FIELD"+this.orderFieldCount_,b="ORDER_LABEL"+this.orderFieldCount_,d="ORDER_DIRECTION"+this.orderFieldCount_,e=this.getInput(c),c=new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]);c.setValue(this.getFieldValue(d));e.removeField(d);e.removeField(b);e.appendField(", then by",b);e.appendField(c,d)}this.orderFieldCount_++;c="ORDER_FIELD"+this.orderFieldCount_;this.appendValueInput(c).setCheck(a("Expr")).appendField((2<this.orderFieldCount_?", ":"")+"and then by",
"ORDER_LABEL"+this.orderFieldCount_).appendField(new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]),"ORDER_DIRECTION"+this.orderFieldCount_);this.moveInputBefore(c,"AFTER_ORDER")}else if(1<this.orderFieldCount_&&(e=this.getInput("ORDER_FIELD"+(this.orderFieldCount_-1)))&&!e.connection.targetConnection){this.removeInput("ORDER_FIELD"+this.orderFieldCount_);for(this.orderFieldCount_--;1<this.orderFieldCount_&&!this.getInput("ORDER_FIELD"+(this.orderFieldCount_-1)).connection.targetConnection;)this.removeInput("ORDER_FIELD"+
(this.orderFieldCount_-1)),this.orderFieldCount_--;e.name="ORDER_FIELD"+this.orderFieldCount_;var b="ORDER_LABEL"+this.orderFieldCount_,d="ORDER_DIRECTION"+this.orderFieldCount_,f=e.fieldRow[0].name,g=e.fieldRow[1].name,c=new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]);c.setValue(this.getFieldValue(g));e.removeField(g);e.removeField(f);e.appendField(1<this.orderFieldCount_?(2<this.orderFieldCount_?", ":"")+"and then by":"order by",b);e.appendField(c,d)}},mutationToDom:function(){var b=
document.createElement("mutation");b.setAttribute("order_field_count",this.orderFieldCount_);return b},domToMutation:function(b){this.orderFieldCount_=parseInt(b.getAttribute("order_field_count"),10);for(b=2;b<=this.orderFieldCount_;b++){var c="ORDER_FIELD"+b,d="ORDER_LABEL"+b,e="ORDER_DIRECTION"+b,f=new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]);this.appendValueInput(c).setCheck(a("Expr")).appendField((2<b?", ":"")+"and then by",d).appendField(f,e);this.moveInputBefore(c,"AFTER_ORDER")}}});
SparqlBlocks.Blocks.block("sparql_var_binding",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#selectExpressions");this.setColour(330);this.appendValueInput("EXPR").setCheck(a("Expr"));this.appendDummyInput().appendField("as").appendField(new Blockly.FieldTextInput("col name"),"COLNAME");this.setInputsInline(!0);this.setPreviousStatement(!0,"VarBindings");this.setNextStatement(!0,"VarBindings");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_prefixed_iri",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#prefNames");
this.setColour(20);this.appendDummyInput().appendField(new Blockly.FieldTextInput("prefix"),"PREFIX").appendField(":").appendField(new Blockly.FieldTextInput("localName"),"LOCAL_NAME");this.setInputsInline(!0);this.setOutput(!0,"Iri");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_iri",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#QSynIRI");this.setColour(20);this.appendDummyInput().appendField("<").appendField(new Blockly.FieldTextInput("iri"),"IRI").appendField(">");
this.setInputsInline(!0);this.setOutput(!0,"Iri");this.setTooltip("")}})})();SparqlBlocks.Blocks.math={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.math.HUE=230;SparqlBlocks.Blocks.block("sparql_math_number",{init:function(){this.setHelpUrl(Blockly.Msg.MATH_NUMBER_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"NUM");this.setOutput(!0,"LiteralNumber");this.setTooltip(Blockly.Msg.MATH_NUMBER_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_math_arithmetic",{init:function(){var b=
[[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"]];this.setHelpUrl(Blockly.Msg.MATH_ARITHMETIC_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("A").setCheck(a("NumberExpr"));this.appendValueInput("B").setCheck(a("NumberExpr")).appendField(new Blockly.FieldDropdown(b),"OP");this.setInputsInline(!0);var c=this;
this.setTooltip(function(){var b=c.getFieldValue("OP");return{ADD:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,MINUS:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,MULTIPLY:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,DIVIDE:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE}[b]})}});SparqlBlocks.Blocks.block("sparql_math_single",{init:function(){var b=[[Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE,"ABS"],["-","NEG"]];this.setHelpUrl(Blockly.Msg.MATH_SINGLE_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,
"NumberExpr");this.appendValueInput("NUM").setCheck(a("NumberExpr")).appendField(new Blockly.FieldDropdown(b),"OP");var c=this;this.setTooltip(function(){var b=c.getFieldValue("OP");return{ABS:Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS,NEG:Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG}[b]})}});SparqlBlocks.Blocks.block("sparql_math_number_property",{init:function(){var b=[[Blockly.Msg.MATH_IS_EVEN,"EVEN"],[Blockly.Msg.MATH_IS_ODD,"ODD"],[Blockly.Msg.MATH_IS_PRIME,"PRIME"],[Blockly.Msg.MATH_IS_WHOLE,"WHOLE"],[Blockly.Msg.MATH_IS_POSITIVE,
"POSITIVE"],[Blockly.Msg.MATH_IS_NEGATIVE,"NEGATIVE"],[Blockly.Msg.MATH_IS_DIVISIBLE_BY,"DIVISIBLE_BY"]];this.setColour(SparqlBlocks.Blocks.math.HUE);this.appendValueInput("NUMBER_TO_CHECK").setCheck(a("NumberExpr"));b=new Blockly.FieldDropdown(b,function(b){this.sourceBlock_.updateShape_("DIVISIBLE_BY"==b)});this.appendDummyInput().appendField(b,"PROPERTY");this.setInputsInline(!0);this.setOutput(!0,"BooleanExpr");this.setTooltip(Blockly.Msg.MATH_IS_TOOLTIP)},mutationToDom:function(){var b=document.createElement("mutation"),
a="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");b.setAttribute("divisor_input",a);return b},domToMutation:function(b){b="true"==b.getAttribute("divisor_input");this.updateShape_(b)},updateShape_:function(b){var c=this.getInput("DIVISOR");b?c||this.appendValueInput("DIVISOR").setCheck(a("NumberExpr")):c&&this.removeInput("DIVISOR")}});SparqlBlocks.Blocks.block("sparql_math_round",{init:function(){var b=[[Blockly.Msg.MATH_ROUND_OPERATOR_ROUND,"ROUND"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP,"ROUNDUP"],
[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN,"ROUNDDOWN"]];this.setHelpUrl(Blockly.Msg.MATH_ROUND_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("NUM").setCheck(a("NumberExpr")).appendField(new Blockly.FieldDropdown(b),"OP");this.setTooltip(Blockly.Msg.MATH_ROUND_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_math_modulo",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_MODULO_TITLE,args0:[{type:"input_value",name:"DIVIDEND",check:a("NumberExpr")},
{type:"input_value",name:"DIVISOR",check:a("NumberExpr")}],inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_MODULO_TOOLTIP,helpUrl:Blockly.Msg.MATH_MODULO_HELPURL})}});SparqlBlocks.Blocks.block("sparql_math_constrain",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_CONSTRAIN_TITLE,args0:[{type:"input_value",name:"VALUE",check:a("NumberExpr")},{type:"input_value",name:"LOW",check:a("NumberExpr")},{type:"input_value",name:"HIGH",check:a("NumberExpr")}],
inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_CONSTRAIN_TOOLTIP,helpUrl:Blockly.Msg.MATH_CONSTRAIN_HELPURL})}});SparqlBlocks.Blocks.block("sparql_math_random_int",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_RANDOM_INT_TITLE,args0:[{type:"input_value",name:"FROM",check:a("NumberExpr")},{type:"input_value",name:"TO",check:a("NumberExpr")}],inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_RANDOM_INT_TOOLTIP,
helpUrl:Blockly.Msg.MATH_RANDOM_INT_HELPURL})}});SparqlBlocks.Blocks.block("sparql_math_random_float",{init:function(){this.setHelpUrl(Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendDummyInput().appendField(Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM);this.setTooltip(Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP)}})})();SparqlBlocks.Blocks.tabular={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_column",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#sparqlQueryVariables");this.setColour(330);this.appendDummyInput().appendField(new Blockly.FieldTextInput("colName"),"COLNAME");this.appendStatementInput("VALUES").setCheck("ValueContainer");this.setOutput(!0,"Column");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_value_container",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#docResultDesc");
this.setColour(330);this.appendValueInput("VALUE").setCheck(a("GraphTerm"));this.setInputsInline(!0);this.setPreviousStatement(!0,"ValueContainer");this.setNextStatement(!0,"ValueContainer");this.setDeletable(!1);this.setMovable(!1);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_table",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#sparqlSolutions");this.setColour(330);this.setInputsInline(!0);this.setPreviousStatement(!0,"Table");this.setDeletable(!1);this.setMovable(!1);
this.setTooltip("");this.colCount_=0},mutationToDom:function(){var b=document.createElement("mutation");b.setAttribute("colCount",this.colCount_);return b},domToMutation:function(b){this.colCount_=parseInt(b.getAttribute("colCount"),10);for(b=1;b<=this.colCount_;b++)this.appendValueInput("COL"+b).setCheck("Column")},decompose:function(b){var a=Blockly.Block.obtain(b,"sparql_table_table");a.initSvg();for(var d=a.getInput("STACK").connection,e=1;e<=this.colCount_;e++){var f=Blockly.Block.obtain(b,"sparql_table_column");
f.initSvg();d.connect(f.previousConnection);d=f.nextConnection}return a},compose:function(b){for(var a=this.colCount_;0<a;a--)this.removeInput("COL"+a);this.colCount_=0;for(b=b.getInputTargetBlock("STACK");b;){switch(b.type){case "sparql_table_column":this.colCount_++;a=this.appendValueInput("COL"+this.colCount_).setCheck("Column");b.valueConnection_&&a.connection.connect(b.valueConnection_);break;default:throw"Unknown block type.";}b=b.nextConnection&&b.nextConnection.targetBlock()}},saveConnections:function(b){b=
b.getInputTargetBlock("STACK");for(var a=1;b;){switch(b.type){case "sparql_table_column":var d=this.getInput("COL"+a);b.valueConnection_=d&&d.connection.targetConnection;a++;break;default:throw"Unknown block type.";}b=b.nextConnection&&b.nextConnection.targetBlock()}},customContextMenu:function(b){if(this.resultsData){var a=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(b,{text:"Save Results as JSON",enabled:!0,callback:function(){var b=JSON.stringify(a.resultsData);b&&(b=new Blob([b],{type:"application/sparql-results+json"}),
saveAs(b,"results.json"))}})}}});SparqlBlocks.Blocks.block("sparql_table_table",{init:function(){this.setColour(330);this.appendDummyInput().appendField("table");this.appendStatementInput("STACK");this.setTooltip("");this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_table_column",{init:function(){this.setColour(330);this.appendDummyInput().appendField("column");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("");this.contextMenu=!1}})})();SparqlBlocks.Blocks.text={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.text.HUE=160;SparqlBlocks.Blocks.block("sparql_text",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1));this.setOutput(!0,"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(b){return new Blockly.FieldImage(b==this.RTL?
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_with_lang",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("@").appendField(new Blockly.FieldTextInput(""),"LANG");this.setOutput(!0,"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(b){return new Blockly.FieldImage(b==
this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_with_type_pref",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("^^").appendField(new Blockly.FieldTextInput("prefix"),"DT_PREFIX").appendField(":").appendField(new Blockly.FieldTextInput("localName"),"DT_LOCAL_NAME");this.setOutput(!0,
"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(b){return new Blockly.FieldImage(b==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_with_type_iri",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("^^").appendField("<").appendField(new Blockly.FieldTextInput("iri"),"DT_IRI").appendField(">");this.setOutput(!0,"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},
newQuote_:function(b){return new Blockly.FieldImage(b==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_join",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_JOIN_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.itemCount_=2;this.updateShape_();this.setOutput(!0,"StringExpr");this.setMutator(new Blockly.Mutator(["sparql_text_create_join_item"]));this.setTooltip(Blockly.Msg.TEXT_JOIN_TOOLTIP)},mutationToDom:function(){var b=document.createElement("mutation");b.setAttribute("items",this.itemCount_);return b},domToMutation:function(b){this.itemCount_=
parseInt(b.getAttribute("items"),10);this.updateShape_()},decompose:function(b){var a=Blockly.Block.obtain(b,"sparql_text_create_join_container");a.initSvg();for(var d=a.getInput("STACK").connection,e=0;e<this.itemCount_;e++){var f=Blockly.Block.obtain(b,"sparql_text_create_join_item");f.initSvg();d.connect(f.previousConnection);d=f.nextConnection}return a},compose:function(b){b=b.getInputTargetBlock("STACK");for(var a=[],d=0;b;)a[d]=b.valueConnection_,b=b.nextConnection&&b.nextConnection.targetBlock(),
d++;this.itemCount_=d;this.updateShape_();for(d=0;d<this.itemCount_;d++)a[d]&&this.getInput("ADD"+d).connection.connect(a[d])},saveConnections:function(b){b=b.getInputTargetBlock("STACK");for(var a=0;b;){var d=this.getInput("ADD"+a);b.valueConnection_=d&&d.connection.targetConnection;a++;b=b.nextConnection&&b.nextConnection.targetBlock()}},updateShape_:function(){if(this.getInput("EMPTY"))this.removeInput("EMPTY");else for(var b=0;this.getInput("ADD"+b);)this.removeInput("ADD"+b),b++;if(0==this.itemCount_)this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));
else for(b=0;b<this.itemCount_;b++){var a=this.appendValueInput("ADD"+b);0==b&&a.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH)}},newQuote_:Blockly.Blocks.sparql_text.newQuote_});SparqlBlocks.Blocks.block("sparql_text_create_join_container",{init:function(){this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP);this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_text_create_join_item",
{init:function(){this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP);this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_text_append",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_APPEND_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").appendField(Blockly.Msg.TEXT_APPEND_TO).appendField(new Blockly.FieldVariable(Blockly.Msg.TEXT_APPEND_VARIABLE),
"VAR").appendField(Blockly.Msg.TEXT_APPEND_APPENDTEXT);this.setPreviousStatement(!0);this.setNextStatement(!0);var b=this;this.setTooltip(function(){return Blockly.Msg.TEXT_APPEND_TOOLTIP.replace("%1",b.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(b,a){Blockly.Names.equals(b,this.getFieldValue("VAR"))&&this.setFieldValue(a,"VAR")}});SparqlBlocks.Blocks.block("sparql_text_length",{init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_LENGTH_TITLE,
args0:[{type:"input_value",name:"VALUE",check:a("StringExpr")}],output:"NumberExpr",colour:SparqlBlocks.Blocks.text.HUE,tooltip:Blockly.Msg.TEXT_LENGTH_TOOLTIP,helpUrl:Blockly.Msg.TEXT_LENGTH_HELPURL})}});SparqlBlocks.Blocks.block("sparql_text_isEmpty",{init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_ISEMPTY_TITLE,args0:[{type:"input_value",name:"VALUE",check:a("StringExpr")}],output:"BooleanExpr",colour:SparqlBlocks.Blocks.text.HUE,tooltip:Blockly.Msg.TEXT_ISEMPTY_TOOLTIP,helpUrl:Blockly.Msg.TEXT_ISEMPTY_HELPURL})}});
SparqlBlocks.Blocks.block("sparql_text_indexOf",{init:function(){var b=[[Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST,"FIRST"],[Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_INDEXOF_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("VALUE").setCheck(a("StringExpr")).appendField(Blockly.Msg.TEXT_INDEXOF_INPUT_INTEXT);this.appendValueInput("FIND").setCheck(a("StringExpr")).appendField(new Blockly.FieldDropdown(b),
"END");Blockly.Msg.TEXT_INDEXOF_TAIL&&this.appendDummyInput().appendField(Blockly.Msg.TEXT_INDEXOF_TAIL);this.setInputsInline(!0);this.setTooltip(Blockly.Msg.TEXT_INDEXOF_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_text_contains",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-contains");this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("FIND").setCheck(a("StringExpr"));this.appendValueInput("VALUE").setCheck(a("StringExpr")).appendField("is contained in");
this.setInputsInline(!0);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_text_lang",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-lang");this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("VALUE").setCheck(a("StringExpr")).appendField("language of");this.appendValueInput("LANG").setCheck(a("StringExpr")).appendField("is");this.setInputsInline(!0);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_text_charAt",
{init:function(){this.WHERE_OPTIONS=[[Blockly.Msg.TEXT_CHARAT_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_CHARAT_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_CHARAT_FIRST,"FIRST"],[Blockly.Msg.TEXT_CHARAT_LAST,"LAST"],[Blockly.Msg.TEXT_CHARAT_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.TEXT_CHARAT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"StringExpr");this.appendValueInput("VALUE").setCheck(a("StringExpr")).appendField(Blockly.Msg.TEXT_CHARAT_INPUT_INTEXT);this.appendDummyInput("AT");
this.setInputsInline(!0);this.updateAt_(!0);this.setTooltip(Blockly.Msg.TEXT_CHARAT_TOOLTIP)},mutationToDom:function(){var b=document.createElement("mutation"),a=this.getInput("AT").type==Blockly.INPUT_VALUE;b.setAttribute("at",a);return b},domToMutation:function(b){b="false"!=b.getAttribute("at");this.updateAt_(b)},updateAt_:function(b){this.removeInput("AT");this.removeInput("ORDINAL",!0);b?(this.appendValueInput("AT").setCheck(a("NumberExpr")),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):
this.appendDummyInput("AT");Blockly.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_CHARAT_TAIL));var c=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(a){var c="FROM_START"==a||"FROM_END"==a;if(c!=b){var f=this.sourceBlock_;f.updateAt_(c);f.setFieldValue(a,"WHERE");return null}});this.getInput("AT").appendField(c,"WHERE")}});SparqlBlocks.Blocks.block("sparql_text_getSubstring",{init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,
"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("STRING").setCheck("String").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);
this.appendDummyInput("AT1");this.appendDummyInput("AT2");Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);this.setInputsInline(!0);this.setOutput(!0,"StringExpr");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var b=document.createElement("mutation"),a=this.getInput("AT1").type==Blockly.INPUT_VALUE;b.setAttribute("at1",a);a=this.getInput("AT2").type==Blockly.INPUT_VALUE;
b.setAttribute("at2",a);return b},domToMutation:function(b){var a="true"==b.getAttribute("at1");b="true"==b.getAttribute("at2");this.updateAt_(1,a);this.updateAt_(2,b)},updateAt_:function(b,c){this.removeInput("AT"+b);this.removeInput("ORDINAL"+b,!0);c?(this.appendValueInput("AT"+b).setCheck(a("NumberExpr")),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+b).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+b);2==b&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&
(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));var d=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+b],function(a){var d="FROM_START"==a||"FROM_END"==a;if(d!=c){var g=this.sourceBlock_;g.updateAt_(b,d);g.setFieldValue(a,"WHERE"+b);return null}});this.getInput("AT"+b).appendField(d,"WHERE"+b);1==b&&this.moveInputBefore("AT1","AT2")}});SparqlBlocks.Blocks.block("sparql_text_changeCase",{init:function(){var b=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,
"UPPERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").setCheck(a("StringExpr")).appendField(new Blockly.FieldDropdown(b),"CASE");this.setOutput(!0,"StringExpr");this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_text_trim",{init:function(){var b=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,
"BOTH"],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").setCheck(a("StringExpr")).appendField(new Blockly.FieldDropdown(b),"MODE");this.setOutput(!0,"StringExpr");this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)}})})();/*

 Visual Blocks Editor

 Copyright 2012 Google Inc.
 https://developers.google.com/blockly/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
SparqlBlocks.Blocks.tuple={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_tuple",{init:function(){this.setHelpUrl(Blockly.Msg.CONTROLS_IF_HELPURL);this.setColour(330);this.appendValueInput("VAL0").setCheck(a("Resource"));this.setPreviousStatement(!0,"Tuple");this.setNextStatement(!0,"Tuple");this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));this.setTooltip("");this.valCount_=0},mutationToDom:function(){if(!this.valCount_)return null;var b=document.createElement("mutation");
this.valCount_&&b.setAttribute("valCount",this.valCount_);return b},domToMutation:function(b){this.valCount_=parseInt(b.getAttribute("valCount"),10);for(b=1;b<=this.valCount_;b++)this.appendValueInput("VAL"+b).setCheck(a("Resource"))},decompose:function(b){var a=Blockly.Block.obtain(b,"sparql_tuple_tuple");a.initSvg();for(var d=a.getInput("STACK").connection,e=1;e<=this.valCount_;e++){var f=Blockly.Block.obtain(b,"sparql_tuple_value");f.initSvg();d.connect(f.previousConnection);d=f.nextConnection}return a},
compose:function(b){for(var c=this.valCount_;0<c;c--)this.removeInput("VAL"+c);this.valCount_=0;for(b=b.getInputTargetBlock("STACK");b;){switch(b.type){case "col":this.valCount_++;c=this.appendValueInput("VAL"+this.valCount_).setCheck(a("Resource"));b.valueConnection_&&c.connection.connect(b.valueConnection_);break;default:throw"Unknown block type.";}b=b.nextConnection&&b.nextConnection.targetBlock()}},saveConnections:function(b){b=b.getInputTargetBlock("STACK");for(var a=1;b;){switch(b.type){case "sparql_tuple_value":var d=
this.getInput("VAL"+a);b.valueConnection_=d&&d.connection.targetConnection;a++;break;default:throw"Unknown block type.";}b=b.nextConnection&&b.nextConnection.targetBlock()}}});SparqlBlocks.Blocks.block("sparql_tuple_tuple",{init:function(){this.setColour(330);this.appendDummyInput().appendField("tuple");this.appendStatementInput("STACK");this.setTooltip("");this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_tuple_value",{init:function(){this.setColour(330);this.appendDummyInput().appendField("value");
this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("");this.contextMenu=!1}})})();SparqlBlocks.Blocks.variables={};
(function(){SparqlBlocks.Blocks.variables.HUE=330;SparqlBlocks.Blocks.block("sparql_variable",{init:function(){this.setHelpUrl(Blockly.Msg.VARIABLES_GET_HELPURL);this.setColour(SparqlBlocks.Blocks.variables.HUE);this.appendDummyInput().appendField(new Blockly.FieldVariable,"VAR");this.setOutput(!0,"Var");this.setTooltip("")},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}});Blockly.Blocks.variables_get=
Blockly.Blocks.sparql_variable;Blockly.Blocks.variables_set=null})();SparqlBlocks.Sparql.bgp={};
(function(){SparqlBlocks.Sparql.sparql_isa=function(b){return(b=SparqlBlocks.Sparql.valueToCode(b,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC))?"a "+b+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_verb_object=function(b){var a=SparqlBlocks.Sparql.valueToCode(b,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);b=SparqlBlocks.Sparql.valueToCode(b,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return a?a+" "+(b?b:"[]")+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_reversePath_object=function(b){var a=
SparqlBlocks.Sparql.valueToCode(b,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);b=SparqlBlocks.Sparql.valueToCode(b,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return a?"^"+a+" "+(b?b:"[]")+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_closurePath_object=function(b){var a=SparqlBlocks.Sparql.valueToCode(b,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);b=SparqlBlocks.Sparql.valueToCode(b,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return a&&b?a+"* "+b+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_reverseClosurePath_object=
function(b){var a=SparqlBlocks.Sparql.valueToCode(b,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);b=SparqlBlocks.Sparql.valueToCode(b,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return a&&b?"^"+a+"* "+b+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_typedsubject_propertylist=function(b){var a=SparqlBlocks.Sparql.valueToCode(b,"SUBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC),d=SparqlBlocks.Sparql.valueToCode(b,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC);b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,
"PROPERTY_LIST"),";\n");return d||""!=b?(a?a:"[]")+(d?" a "+d+(""!=b?";":""):"")+(""!=b?"\n"+b:"")+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_subject_propertylist=function(b){var a=SparqlBlocks.Sparql.valueToCode(b,"SUBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,"PROPERTY_LIST"),";\n");return""!=b?(a?a:"[]")+(""!=b?"\n"+b:"")+SparqlBlocks.Sparql.STMNT_BRK:""};var a=function(b,a){return[b||""!=a?"[\n"+(b?" a "+b+(""!=
a?";\n":""):"")+(""!=a?a:"")+"\n]":"[]",SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_anontypedsubject_propertylist=function(b){var c=SparqlBlocks.Sparql.valueToCode(b,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC);b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,"PROPERTY_LIST"),";\n");return a(c,b)};SparqlBlocks.Sparql.sparql_anonsubject_propertylist=function(b){b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,"PROPERTY_LIST"),";\n");return a(null,
b)}})();SparqlBlocks.Sparql.control={};
(function(){SparqlBlocks.Sparql.sparql_filter=function(a){return(a=SparqlBlocks.Sparql.valueToCode(a,"CONDITION",SparqlBlocks.Sparql.ORDER_NONE))?"FILTER("+a+")"+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_union=function(a){var b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"OP1"),".\n");a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"OP2"),".\n");return""==b?""==a?"":"{\n"+a+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:""==a?"{\n"+b+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:
"{\n"+b+"\n} UNION {\n"+a+"\n}"+SparqlBlocks.Sparql.STMNT_BRK};SparqlBlocks.Sparql.sparql_optional=function(a){a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"OP"),".\n");return""==a?"":"OPTIONAL {\n"+a+"\n}"+SparqlBlocks.Sparql.STMNT_BRK}})();SparqlBlocks.Sparql.logic={};
(function(){SparqlBlocks.Sparql.sparql_logic_compare=function(a){var b={EQ:"=",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[a.getFieldValue("OP")],c="="==b||"!="==b?SparqlBlocks.Sparql.ORDER_EQUALITY:SparqlBlocks.Sparql.ORDER_RELATIONAL,d=SparqlBlocks.Sparql.valueToCode(a,"A",c)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"B",c)||"0";return[d+" "+b+" "+a,c]};SparqlBlocks.Sparql.sparql_logic_operation=function(a){var b="AND"==a.getFieldValue("OP")?"&&":"||",c="&&"==b?SparqlBlocks.Sparql.ORDER_LOGICAL_AND:SparqlBlocks.Sparql.ORDER_LOGICAL_OR,
d=SparqlBlocks.Sparql.valueToCode(a,"A",c);a=SparqlBlocks.Sparql.valueToCode(a,"B",c);if(d||a){var e="&&"==b?"true":"false";d||(d=e);a||(a=e)}else a=d="false";return[d+" "+b+" "+a,c]};SparqlBlocks.Sparql.sparql_logic_negate=function(a){var b=SparqlBlocks.Sparql.ORDER_LOGICAL_NOT;return["!"+(SparqlBlocks.Sparql.valueToCode(a,"BOOL",b)||"true"),b]};SparqlBlocks.Sparql.sparql_logic_boolean=function(a){return["TRUE"==a.getFieldValue("BOOL")?"true":"false",SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_logic_ternary=
function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"IF",SparqlBlocks.Sparql.ORDER_COMMA)||"false",c=SparqlBlocks.Sparql.valueToCode(a,"THEN",SparqlBlocks.Sparql.ORDER_COMMA)||'""';a=SparqlBlocks.Sparql.valueToCode(a,"ELSE",SparqlBlocks.Sparql.ORDER_COMMA)||'""';return["IF("+b+", "+c+", "+a+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}})();SparqlBlocks.Sparql.main={};
(function(){var a=function(b){return b.split("").map(function(b){return _.contains("_~.-!$&'()\\*+,;=/?#@%".split(""),b)?"\\"+b:b}).join("")};SparqlBlocks.Sparql.sparql_select=function(b){for(var a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,"WHERE"),".\n"),d=b.getFieldValue("LIMIT"),a="SELECT DISTINCT * WHERE {\n"+a+"\n}",e=null,f=1;f<=b.orderFieldCount_;f++){var g=SparqlBlocks.Sparql.valueToCode(this,"ORDER_FIELD"+f,SparqlBlocks.Sparql.ORDER_NONE);if(g){var h=b.getFieldValue("ORDER_DIRECTION"+
f),e=e?e+", ":"ORDER BY ";h&&"DESC"==h&&(e+="DESC");e+="("+g+")"}}e&&(a+="\n"+e);d&&(a+="\nLIMIT "+d);b=a.match(/[^(|!/\^,;\x20|\x09|\x0D|\x0A]+[\x20|\x09|\x0D|\x0A]*:/g);d=null;b&&(d=b.map(function(b){return b.substr(0,b.length-1).trim()}));var k="";d&&d.forEach(function(b){var a=SparqlBlocks.Prefixes.lookForPrefix(b);a&&(k+="PREFIX "+b+":\t<"+a+">\n")});0<k.length&&(a=k+"\n"+a);return[a,SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_prefixed_iri=function(b){var c=b.getFieldValue("PREFIX");
b=b.getFieldValue("LOCAL_NAME");var d=null,e=SparqlBlocks.Prefixes.lookForPrefix(c);e&&(d="<"+e+b+">");d||(d=c+":"+a(b));return[d,SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_iri=function(b){return["<"+b.getFieldValue("IRI")+">",SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.variables_get=function(b){return["?"+b.getFieldValue("VAR"),SparqlBlocks.Sparql.ORDER_ATOMIC]}})();SparqlBlocks.Sparql.math={};
(function(){SparqlBlocks.Sparql.sparql_math_number=function(b){b=b.getFieldValue("NUM");var a=""+parseInt(b);if(b==a)return[b,SparqlBlocks.Sparql.ORDER_ATOMIC];a=parseFloat(b);if(!isNaN(a))return[""+a,SparqlBlocks.Sparql.ORDER_ATOMIC];throw"Not a number: "+b;};SparqlBlocks.Sparql.sparql_math_arithmetic=function(b){var a={ADD:[" + ",SparqlBlocks.Sparql.ORDER_ADDITION],MINUS:[" - ",SparqlBlocks.Sparql.ORDER_SUBTRACTION],MULTIPLY:[" * ",SparqlBlocks.Sparql.ORDER_MULTIPLICATION],DIVIDE:[" / ",SparqlBlocks.Sparql.ORDER_DIVISION]}[b.getFieldValue("OP")],
d=a[0],a=a[1],e=SparqlBlocks.Sparql.valueToCode(b,"A",a)||"0";b=SparqlBlocks.Sparql.valueToCode(b,"B",a)||"0";return[e+d+b,a]};SparqlBlocks.Sparql.sparql_math_single=function(b){var a=b.getFieldValue("OP"),d;if("NEG"==a)return b=SparqlBlocks.Sparql.valueToCode(b,"NUM",SparqlBlocks.Sparql.ORDER_UNARY_NEGATION)||"0","-"==b[0]&&(b=" "+b),["-"+b,SparqlBlocks.Sparql.ORDER_UNARY_NEGATION];b=SparqlBlocks.Sparql.valueToCode(b,"NUM",SparqlBlocks.Sparql.ORDER_NONE)||"0";switch(a){case "ABS":d="ABS("+b+")";
break;case "ROUND":d="ROUND("+b+")";break;case "ROUNDUP":d="CEIL("+b+")";break;case "ROUNDDOWN":d="FLOOR("+b+")"}if(d)return[d,SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];throw"Unknown math operator: "+a;};var a=function(a){return["FLOOR("+a+") = "+a,SparqlBlocks.Sparql.ORDER_EQUALITY]};SparqlBlocks.Sparql.sparql_math_number_property=function(b){var c=SparqlBlocks.Sparql.valueToCode(b,"NUMBER_TO_CHECK",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";switch(b.getFieldValue("PROPERTY")){case "EVEN":return a(c+
" / 2")[0];case "ODD":return c+=" / 2","FLOOR("+c+") != "+c;case "WHOLE":return a(c);case "POSITIVE":return[c+" > 0",SparqlBlocks.Sparql.ORDER_RELATIONAL];case "NEGATIVE":return[c+" < 0",SparqlBlocks.Sparql.ORDER_RELATIONAL];case "DIVISIBLE_BY":return b=SparqlBlocks.Sparql.valueToCode(b,"DIVISOR",SparqlBlocks.Sparql.ORDER_MODULUS)||"0",a(c+" / "+b)[0]}};SparqlBlocks.Sparql.sparql_math_round=SparqlBlocks.Sparql.sparql_math_single;SparqlBlocks.Sparql.sparql_math_modulo=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,
"DIVIDEND",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"DIVISOR",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";return[c+" - "+("FLOOR(ABS("+c+" / "+a+"))")+" * ABS("+c+") / "+c+" * ABS("+a+")",SparqlBlocks.Sparql.ORDER_SUBTRACTION]};SparqlBlocks.Sparql.sparql_math_constrain=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_RELATIONAL)||"0",d=SparqlBlocks.Sparql.valueToCode(a,"LOW",SparqlBlocks.Sparql.ORDER_RELATIONAL);a=SparqlBlocks.Sparql.valueToCode(a,
"HIGH",SparqlBlocks.Sparql.ORDER_RELATIONAL);return["IF("+c+" < "+d+", "+d+", IF("+c+" > "+a+", "+a+", "+c+") )",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_math_random_int=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"FROM",SparqlBlocks.Sparql.ORDER_ADDITION)||"0";return["FLOOR(RAND() * ("+(SparqlBlocks.Sparql.valueToCode(a,"TO",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"0")+" - "+c+" + 1) + "+c+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_math_random_float=
function(a){return["RAND()",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}})();SparqlBlocks.Sparql.text={};
(function(){SparqlBlocks.Sparql.sparql_text=function(a){return[SparqlBlocks.Sparql.quote_(a.getFieldValue("TEXT")),SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_text_with_lang=function(a){var b=SparqlBlocks.Sparql.quote_(a.getFieldValue("TEXT"));(a=a.getFieldValue("LANG"))&&0<a.length&&(b+="@"+a);return[b,SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_text_join=function(a){var b;if(0==a.itemCount_)return["''",SparqlBlocks.Sparql.ORDER_ATOMIC];if(1==a.itemCount_)b=SparqlBlocks.Sparql.valueToCode(a,
"ADD0",SparqlBlocks.Sparql.ORDER_NONE)||"''",b="STR("+b+")";else if(2==a.itemCount_)b=SparqlBlocks.Sparql.valueToCode(a,"ADD0",SparqlBlocks.Sparql.ORDER_NONE)||"''",a=SparqlBlocks.Sparql.valueToCode(a,"ADD1",SparqlBlocks.Sparql.ORDER_NONE)||"''",b="CONCAT(STR("+b+"), STR("+a+"))";else{b=Array(a.itemCount_);for(var c=0;c<a.itemCount_;c++)b[c]=SparqlBlocks.Sparql.valueToCode(a,"ADD"+c,SparqlBlocks.Sparql.ORDER_NONE)||"''";b="CONCAT(STR("+b.join("), STR(")+"))"}return[b,SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};
SparqlBlocks.Sparql.sparql_text_length=function(a){return["STRLEN("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_isEmpty=function(a){return["STRLEN("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+") == 0",SparqlBlocks.Sparql.ORDER_EQUALITY]};SparqlBlocks.Sparql.sparql_text_contains=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"FIND",SparqlBlocks.Sparql.ORDER_COMMA)||
"''";return["CONTAINS("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_COMMA)||"''")+", "+b+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_lang=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"LANG",SparqlBlocks.Sparql.ORDER_COMMA)||"''";return["LANGMATCHES(LANG("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+"), "+b+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_charAt=function(a){var b=
a.getFieldValue("WHERE")||"FROM_START",c=SparqlBlocks.Sparql.valueToCode(a,"AT",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"1";a=SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_COMMA)||"''";switch(b){case "FIRST":return["SUBSTR("+a+", 1, 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "LAST":return["SUBSTR("+a+", STRLEN("+a+"), 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "FROM_START":return["SUBSTR("+a+", "+c+", 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "FROM_END":return["SUBSTR("+
a+", STRLEN("+a+") + 1 - "+c+", 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}throw"Unhandled option (text_charAt).";};SparqlBlocks.Sparql.sparql_text_getSubstring=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"STRING",SparqlBlocks.Sparql.ORDER_COMMA)||"''",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2"),e=SparqlBlocks.Sparql.valueToCode(a,"AT1",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"1";a=SparqlBlocks.Sparql.valueToCode(a,"AT2",SparqlBlocks.Sparql.ORDER_ADDITION)||"1";if("FIRST"!=c||
"LAST"!=d){if("FIRST"==c)c="1";else if("LAST"==c)c="STRLEN("+b+")";else if("FROM_START"==c)c=e;else if("FROM_END"==c)c="STRLEN("+b+") + 1 - "+e;else throw"Unhandled option (text_getSubstring): "+c;if("FIRST"==d)d="2 - "+c;else if("LAST"==d)d=null;else if("FROM_START"==d)d=a+" + 1 - "+c;else if("FROM_END"==d)d="STRLEN("+b+") + 2 - "+a+" - "+c;else throw"Unhandled option (text_getSubstring): "+d;return[d?"SUBSTR("+b+", "+c+", "+d+")":"SUBSTR("+b+", "+c+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}};
SparqlBlocks.Sparql.sparql_text_changeCase=function(a){var b=a.getFieldValue("CASE"),c={UPPERCASE:"UCASE",LOWERCASE:"LCASE"}[b];if(c)return a=SparqlBlocks.Sparql.valueToCode(a,"TEXT",SparqlBlocks.Sparql.ORDER_NONE)||"''",[c+"("+a+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];throw"Unknown case type: "+b;}})();