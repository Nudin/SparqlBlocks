// Do not edit this file; automatically generated by build.py.
'use strict';

var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};
goog.define=function(a,b){var c=b;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,a)?c=goog.global.CLOSURE_UNCOMPILED_DEFINES[a]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]));goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;
goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(a){if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,b){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a,b)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if(!goog.isString(a)||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};
goog.module.getInternal_=function(a){if(!COMPILED)return goog.isProvided_(a)?a in goog.loadedModules_?goog.loadedModules_[a]:goog.getObjectByName(a):null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c,d){if(goog.DEPENDENCIES_ENABLED){var e;a=a.replace(/\\/g,"/");var f=goog.dependencies_;d&&"boolean"!==typeof d||(d=d?{module:"goog"}:{});for(var g=0;e=b[g];g++)f.nameToPath[e]=a,f.pathIsModule[a]="goog"==d.module;for(d=0;b=c[d];d++)a in f.requires||(f.requires[a]={}),f.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(a);if(goog.isProvided_(a))return goog.isInModuleLoader_()?goog.module.getInternal_(a):null;if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b)return goog.writeScripts_(b),null}a="goog.require could not find: "+a;goog.logToConsole_(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return null!=a&&"write"in a},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("SCRIPT"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=-1==d?c.length:
d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a,b){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(a,b)&&(goog.dependencies_.written[a]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(a){goog.importScript_("",'goog.retrieveAndExecModule_("'+a+'");')&&(goog.dependencies_.written[a]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(a,b){return goog.LOAD_MODULE_USING_EVAL&&
goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(b+"\n//# sourceURL="+a+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+b+"\n;return exports});\n//# sourceURL="+a+"\n"},goog.loadQueuedModules_=function(){var a=goog.queuedModules_.length;if(0<a){var b=goog.queuedModules_;goog.queuedModules_=[];for(var c=0;c<a;c++)goog.maybeProcessDeferredPath_(b[c])}},goog.maybeProcessDeferredDep_=function(a){goog.isDeferredModule_(a)&&goog.allDepsAreAvailable_(a)&&(a=goog.getPathFromDeps_(a),
goog.maybeProcessDeferredPath_(goog.basePath+a))},goog.isDeferredModule_=function(a){return(a=goog.getPathFromDeps_(a))&&goog.dependencies_.pathIsModule[a]?goog.basePath+a in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(a){if((a=goog.getPathFromDeps_(a))&&a in goog.dependencies_.requires)for(var b in goog.dependencies_.requires[a])if(!goog.isProvided_(b)&&!goog.isDeferredModule_(b))return!1;return!0},goog.maybeProcessDeferredPath_=function(a){if(a in goog.dependencies_.deferred){var b=
goog.dependencies_.deferred[a];delete goog.dependencies_.deferred[a];goog.globalEval(b)}},goog.loadModuleFromUrl=function(a){goog.retrieveAndExecModule_(a)},goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1};var c;if(goog.isFunction(a))c=a.call(goog.global,{});else if(goog.isString(a))c=goog.loadModuleFromSource_.call(goog.global,a);else throw Error("Invalid module definition");var d=goog.moduleLoaderState_.moduleName;
if(!goog.isString(d)||!d)throw Error('Invalid module name "'+d+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(d,c):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(c);goog.loadedModules_[d]=c}finally{goog.moduleLoaderState_=b}},goog.loadModuleFromSource_=function(a){eval(a);return{}},goog.writeScriptSrcNode_=function(a){goog.global.document.write('<script type="text/javascript" src="'+a+'">\x3c/script>')},goog.appendScriptSrcNode_=function(a){var b=goog.global.document,
c=b.createElement("script");c.type="text/javascript";c.src=a;c.defer=!1;c.async=!1;b.head.appendChild(c)},goog.writeScriptTag_=function(a,b){if(goog.inHtmlDocument_()){var c=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}var d=goog.IS_OLD_IE_;void 0===b?d?(d=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",c.write('<script type="text/javascript" src="'+
a+'"'+d+">\x3c/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(a):goog.writeScriptSrcNode_(a):c.write('<script type="text/javascript">'+b+"\x3c/script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(a,b){"complete"==a.readyState&&goog.lastNonModuleScriptIndex_==b&&goog.loadQueuedModules_();return!0},goog.writeScripts_=function(a){function b(a){if(!(a in e.written||a in e.visited)){e.visited[a]=!0;if(a in e.requires)for(var f in e.requires[a])if(!goog.isProvided_(f))if(f in
e.nameToPath)b(e.nameToPath[f]);else throw Error("Undefined nameToPath for "+f);a in d||(d[a]=!0,c.push(a))}}var c=[],d={},e=goog.dependencies_;b(a);for(a=0;a<c.length;a++){var f=c[a];goog.dependencies_.written[f]=!0}var g=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(a=0;a<c.length;a++)if(f=c[a])e.pathIsModule[f]?goog.importModule_(goog.basePath+f):goog.importScript_(goog.basePath+f);else throw goog.moduleLoaderState_=g,Error("Undefined script input");goog.moduleLoaderState_=g},goog.getPathFromDeps_=
function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};
goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return b.responseText};
goog.retrieveAndExecModule_=function(a){if(!COMPILED){var b=a;a=goog.normalizePath_(a);var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,d=goog.loadFileSync_(a);if(null!=d)d=goog.wrapModule_(a,d),goog.IS_OLD_IE_?(goog.dependencies_.deferred[b]=d,goog.queuedModules_.push(b)):c(a,d);else throw Error("load of "+a+"failed");}};
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};
goog.removeUid=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};
goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};
goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(d){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("SCRIPT");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));
b.body.appendChild(c);b.body.removeChild(c)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return null!=b&&d in b?b[d]:a}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_){for(var e=Array(arguments.length-1),f=1;f<arguments.length;f++)e[f-1]=arguments[f];return d.superClass_.constructor.apply(a,e)}e=Array(arguments.length-2);for(f=2;f<arguments.length;f++)e[f-2]=arguments[f];for(var f=!1,g=a.constructor;g;g=
g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(a,b){var c=b.constructor,d=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(a,b){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(b&&b.prototype&&b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return a;var c=function(){var b=a.apply(this,arguments)||this;b[goog.UID_PROPERTY_]=b[goog.UID_PROPERTY_];this.constructor===c&&Object.seal(b);return b};return c}return a};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};goog.tagUnsealableClass=function(a){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";/*

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var SparqlBlocks={};SparqlBlocks.Sparql=new Blockly.Generator("Sparql");SparqlBlocks.Sparql.addReservedWords("");SparqlBlocks.Sparql.STMNT_BRK="###\n";SparqlBlocks.Sparql.STMNT_BRK_RE=/###\n/;SparqlBlocks.Sparql.stmJoin=function(a,b){var c=a.split(SparqlBlocks.Sparql.STMNT_BRK_RE);c.pop();return c.join(b)};SparqlBlocks.Sparql.statementToGraphPattern=function(a,b){return SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,b),".\n")};SparqlBlocks.Sparql.ORDER_ATOMIC=0;
SparqlBlocks.Sparql.ORDER_MEMBER=1;SparqlBlocks.Sparql.ORDER_NEW=1;SparqlBlocks.Sparql.ORDER_FUNCTION_CALL=2;SparqlBlocks.Sparql.ORDER_INCREMENT=3;SparqlBlocks.Sparql.ORDER_DECREMENT=3;SparqlBlocks.Sparql.ORDER_LOGICAL_NOT=4;SparqlBlocks.Sparql.ORDER_BITWISE_NOT=4;SparqlBlocks.Sparql.ORDER_UNARY_PLUS=4;SparqlBlocks.Sparql.ORDER_UNARY_NEGATION=4;SparqlBlocks.Sparql.ORDER_TYPEOF=4;SparqlBlocks.Sparql.ORDER_VOID=4;SparqlBlocks.Sparql.ORDER_DELETE=4;SparqlBlocks.Sparql.ORDER_MULTIPLICATION=5;
SparqlBlocks.Sparql.ORDER_DIVISION=5;SparqlBlocks.Sparql.ORDER_MODULUS=5;SparqlBlocks.Sparql.ORDER_ADDITION=6;SparqlBlocks.Sparql.ORDER_SUBTRACTION=6;SparqlBlocks.Sparql.ORDER_BITWISE_SHIFT=7;SparqlBlocks.Sparql.ORDER_RELATIONAL=8;SparqlBlocks.Sparql.ORDER_IN=8;SparqlBlocks.Sparql.ORDER_INSTANCEOF=8;SparqlBlocks.Sparql.ORDER_EQUALITY=9;SparqlBlocks.Sparql.ORDER_BITWISE_AND=10;SparqlBlocks.Sparql.ORDER_BITWISE_XOR=11;SparqlBlocks.Sparql.ORDER_BITWISE_OR=12;SparqlBlocks.Sparql.ORDER_LOGICAL_AND=13;
SparqlBlocks.Sparql.ORDER_LOGICAL_OR=14;SparqlBlocks.Sparql.ORDER_CONDITIONAL=15;SparqlBlocks.Sparql.ORDER_ASSIGNMENT=16;SparqlBlocks.Sparql.ORDER_COMMA=17;SparqlBlocks.Sparql.ORDER_NONE=99;SparqlBlocks.Sparql.init=function(a){};SparqlBlocks.Sparql.finish=function(a){return a};SparqlBlocks.Sparql.scrubNakedValue=function(a){return a+";\n"};SparqlBlocks.Sparql.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};
SparqlBlocks.Sparql.scrub_=function(a,b){var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var d=a.getCommentText();d&&(c+=SparqlBlocks.Sparql.prefixLines(d,"// ")+"\n");for(var e=0;e<a.inputList.length;e++)a.inputList[e].type==Blockly.INPUT_VALUE&&(d=a.inputList[e].connection.targetBlock())&&(d=SparqlBlocks.Sparql.allNestedComments(d))&&(c+=SparqlBlocks.Sparql.prefixLines(d,"// "))}e=a.nextConnection&&a.nextConnection.targetBlock();e=SparqlBlocks.Sparql.blockToCode(e);return c+
b+e};/*


 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
SparqlBlocks.Exec=function(){var a=function(a,b,c){a||(a="http://live.dbpedia.org/sparql");a=a+"?query="+encodeURIComponent(b);return $.ajax({headers:{Accept:"application/sparql-results+json"},dataType:"json",method:"GET",url:a}).done(function(a){c(null,a)}).fail(function(a,b,d){c({jqXHR:a,textStatus:b,errorThrown:d})})},b=function(a,b){a.removeField("RESULTS_CONTAINER");a.appendField(b,"RESULTS_CONTAINER")},c=function(a,c,f){f||(f=a.getInput("RESULTS"));if(f){var g=a.getFieldValue("ENDPOINT"),g=
g?encodeURI(g):null;if(g!=a.endpointUri||c!=a.sparqlQueryStr)a.endpointUri=g,a.sparqlQueryStr=c,a.queryReq&&a.queryReq.abort(),c?(console.log("Ready to execute query: "+c),a.resultsData=null,a.queryReq=SparqlBlocks.Exec.sparqlExecAndPublish(g,c,a.workspace,f,function(b){a.queryReq=null;a.resultsData=b})):(console.log("Empty query"),a.resultsData=null,b(f,SparqlBlocks.Msg.EXECUTION_PLACEHOLDER),a.queryReq=null)}};return{sparqlExecAndPublish:function(c,e,f,g,h){b(g,SparqlBlocks.Msg.EXECUTION_IN_PROGRESS);
return a(c,e,function(a,c){var d=null;if(a){var f=a.jqXHR.responseText;f?(d=null,d=40<f.length?f.substr(0,37)+"...":f,d=new Blockly.FieldTextInput(d),d.setTooltip(f)):d=SparqlBlocks.Msg.EXECUTION_CONNECTION_ERROR}else d=new SparqlBlocks.FieldTable(c);b(g,d);h(c)})},sparqlExecAndAlert:function(b,c){return a(b,c,function(a,b){a?alert("Error: "+a):alert("Results:\n"+JSON.stringify(b))})},sparqlExec:a,blockExec:function(a,b,f){b||(b=a.getInputTargetBlock("QUERY"));b=SparqlBlocks.Sparql.sparqlQuery(b);
c(a,b,f)}}}();SparqlBlocks.Prefixes=function(){var a=null,b={},c=function(a){var e=b[a];if(e)return{prefix:e,localPart:""};var f=null,g=a.substr(0,a.length-1),e=g.lastIndexOf("#");-1<e?f=a.substr(0,e+1):(e=g.lastIndexOf("/"),-1<e&&(f=a.substr(0,e+1)));if(null!=f){if(f=c(f))return{prefix:f.prefix,localPart:f.localPart+a.substr(e+1)}}else return null};$.getJSON("../prefix.cc/all.file.json",function(c){a=c;Object.keys(c).forEach(function(a){b[c[a]]||(b[c[a]]=a)})});return{lookForPrefix:function(b){return a[b]},lookForIri:c}}();SparqlBlocks.Tooltip={};Blockly.Tooltip.onMouseOut_=function(a){Blockly.Tooltip.mouseOutPid_=setTimeout(function(){Blockly.Tooltip.hide();Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null},1);clearTimeout(Blockly.Tooltip.showPid_)};
Blockly.Tooltip.onMouseMove_=function(a){if(Blockly.Tooltip.element_&&Blockly.Tooltip.element_.tooltip&&0==Blockly.dragMode_&&!Blockly.WidgetDiv.isVisible())if(Blockly.Tooltip.visible){var b=Blockly.Tooltip.lastX_-a.pageX;a=Blockly.Tooltip.lastY_-a.pageY;Math.sqrt(b*b+a*a)>(Blockly.Tooltip.element_.tooltipRadiusOK||Blockly.Tooltip.RADIUS_OK)&&Blockly.Tooltip.hide()}else Blockly.Tooltip.poisonedElement_!=Blockly.Tooltip.element_&&(clearTimeout(Blockly.Tooltip.showPid_),Blockly.Tooltip.lastX_=a.pageX,
Blockly.Tooltip.lastY_=a.pageY,Blockly.Tooltip.showPid_=setTimeout(Blockly.Tooltip.show_,Blockly.Tooltip.element_.tooltipHoverMs||Blockly.Tooltip.HOVER_MS))};Blockly.Tooltip.hide=function(){var a=Blockly.Tooltip.hide;return function(){Blockly.Tooltip.element_&&Blockly.Tooltip.element_.hideTooltip&&Blockly.Tooltip.element_.hideTooltip();a()}}();
Blockly.Tooltip.show_=function(){var a=Blockly.Tooltip.show_;return function(){Blockly.Tooltip.element_&&Blockly.Tooltip.element_.showTooltip?(Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_,Blockly.Tooltip.visible=!0,Blockly.Tooltip.element_.showTooltip()):a()}}();SparqlBlocks.Types=function(){var a={},b=function(b,c){a[b]=c;c.children=[];if(null!=c.parents)for(var f=c.parents,g=0;g<f.length;g++){var h=f[g];a[h]&&a[h].children.push(b)}},c=function(b){var e=a[b];if(!e.extension){b=[b];e.aliases&&(b=b.concat(e.aliases));for(var f=e.children,g=0;g<f.length;g++)b=b.concat(c(f[g]));e.extension=b}return e.extension};b("GraphPattern",{});b("TriplesBlock",{parents:["GraphPattern"]});b("SelectQuery",{});b("Bind",{parents:["GraphPattern"]});b("PropertyList",{});b("Table",
{parents:["GraphPattern"]});b("Expr",{});b("StringExprOrLiteral",{parents:["Expr"]});b("GraphTermOrVar",{parents:["Expr"]});b("Verb",{});b("ResourceOrVar",{parents:["GraphTermOrVar","Verb"]});b("StringExpr",{parents:["StringExprOrLiteral"],aliases:["String"]});b("NumberExpr",{parents:["Expr"],aliases:["Number"]});b("BooleanExpr",{parents:["Expr"],aliases:["Boolean"]});b("BnodeExpr",{parents:["Expr"]});b("IriExpr",{parents:["Expr"]});b("AnyExpr",{parents:["StringExpr","NumberExpr","BooleanExpr","BnodeExpr",
"IriExpr"]});b("Var",{parents:["GraphTermOrVar","ResourceOrVar","AnyExpr"]});b("GraphTerm",{parents:["GraphTermOrVar"]});b("Resource",{parents:["GraphTerm","ResourceOrVar"]});b("Bnode",{parents:["Resource","BnodeExpr"]});b("Iri",{parents:["Resource","IriExpr"]});b("Literal",{parents:["GraphTerm","StringExprOrLiteral"]});b("LiteralString",{parents:["Literal","StringExpr"]});b("LiteralNumber",{parents:["Literal","NumberExpr"]});b("LiteralBoolean",{parents:["Literal","BooleanExpr"]});return{setType:b,
getExtension:c}}();SparqlBlocks.Storage=function(){var a=function(a,c){h("Saving Workspace as Gist on GitHub...");var d=a||Blockly.getMainWorkspace(),e=Blockly.Xml.workspaceToDom(d),e=Blockly.Xml.domToPrettyText(e),m=_.extend({generator:"SparqlBlocks",version:SparqlBlocks.version,baseURI:location.href,workspaceXmlFile:"workspace.xml"},d.eventStack?{eventHistoryFile:"eventHistory.json"}:{});f({dataType:"json",method:"POST",data:JSON.stringify({files:_.extend({"metaData.json":{content:JSON.stringify(m)},"workspace.xml":{content:e}},
d.eventStack?{"eventHistory.json":{content:JSON.stringify(d.eventStack)}}:{})}),url:"https://api.github.com/gists",success:function(a){window.location.hash="gist:"+a.id;d.eventStack=[{workspaceId:d.id,group:"",xml:{},type:"snapshot",value:"gist:"+a.id}];g(d);h('Workspace Saved. <button class="main-button btn" title="Copy Link to Clipboard" id="temp-copy-button" type="button"><span class="octicon octicon-clippy"></span> Copy Link to Share It</button>',"info");b("#temp-copy-button");c&&c(null,a.id)},
error:function(a,b,d){(a=a.responseText)||(a="Connection Error!");h("Error Saving Workspace: "+a,"error");c&&c(d)}})},b=function(a){a=new Clipboard(a,{text:function(a){return window.location.href}});a.on("success",function(a){h("Link Copied to Clipboard. Share it!!!","info",a)});a.on("error",function(a){h("Could Not Copy! Please Copy it Manually from Address Bar","error")})},c=function(a,b){$.ajax({dataType:"json",method:"GET",url:"https://api.github.com/gists/"+a,success:function(a){b(a.files["workspace.xml"].raw_url)},
error:function(a,b,c){(a=a.responseText)||(a="Connection Error!");h("Error Loading Workspace: "+a,"error");window.location.hash="";g(workspace)}})},d=function(a,b){var d=a.split(":");switch(d[0]){case "gist":c(d[1],b)}},e=null,f=function(a){e&&e.abort();e=$.ajax(a)},g=function(a,b){""!=window.location.hash&&$("#copy-button").prop("disabled",!1);$("#save-button").prop("disabled",!0);var c=Blockly.Xml.workspaceToDom(a),d=Blockly.Xml.domToText(c),f=a.addChangeListener(function(b){a.eventStack||(a.eventStack=
[]);a.eventStack.push(_.extend({},b,{type:b.type},b.xml?{xmlText:Blockly.Xml.domToPrettyText(b.xml)}:{},{workspace:Blockly.Xml.domToText(Blockly.Xml.workspaceToDom(a))}));b=Blockly.Xml.workspaceToDom(a);b=Blockly.Xml.domToText(b);d!=b&&(window.location.hash="",$("#copy-button").prop("disabled",!0),$("#save-button").prop("disabled",!1),setTimeout(function(){a.removeChangeListener(f)}))})},h=function(a,b,c){c="flash-"+("info"==b?"alert":b);var d=$(".flash-messages .flash")[0];d&&d.parentElement.removeChild(d);
$(".flash-messages")[0].insertAdjacentHTML("afterbegin",'<div class="flash '+c+'">'+a+"</div>");var f=$(".flash-messages .flash")[0];if("alert"!=b){var e=function(a){f&&f.parentElement&&f.parentElement.removeChild(f);window.removeEventListener("click",e)};window.setTimeout(function(){window.addEventListener("click",e)},0)}return f};return{backupOnUnload:function(a){var b=a||Blockly.getMainWorkspace();window.addEventListener("unload",function(){if("localStorage"in window){var a=Blockly.Xml.workspaceToDom(b),
c=window.location.href.split("#")[0];window.localStorage.setItem(c,Blockly.Xml.domToText(a))}},!1)},restoreBlocks:function(a){var b=window.location.href.split("#")[0];"localStorage"in window&&window.localStorage[b]&&(a=a||Blockly.getMainWorkspace(),b=Blockly.Xml.textToDom(window.localStorage[b]),Blockly.Xml.domToWorkspace(a,b))},linkGist:a,linkGistAndCopy:function(b){a(b,function(a,b){null!=a&&copy(window.location.href)})},linkGistAndAlert:function(b){a(b,function(a,b){null!=a&&h("Share your blocks with this link:\n\n%1\n\nSee also XML on GitHub at this link:\n\n%2".replace("%1",
window.location.href).replace("%2","https://gist.github.com/"+b))})},retrieveXml:function(a,b){h("Loading Saved Workspace...");var c=b||Blockly.getMainWorkspace();d(a,function(b){f({headers:{Accept:"text/xml"},dataType:"text",method:"GET",url:b,success:function(b){if(b.length)a:{try{b=Blockly.Xml.textToDom(b)}catch(d){h("Could not load your saved file.\nPerhaps it was created with a different version of Blockly?\nXML: "+b);break a}c.clear();Blockly.Xml.domToWorkspace(c,b)}else h('Sorry, "%1" doesn\'t correspond with any saved Blockly file.'.replace("%1",
window.location.hash),"error");h("Workspace Loaded","info");c.eventStack=[{workspaceId:c.id,group:"",xml:{},type:"snapshot",value:a}];g(c)},error:function(a,b,d){(a=a.responseText)||(a="Connection Error!");h("Error Loading Workspace: "+a,"error");window.location.hash="";g(c)}})})},alert:h,startup:function(a){a=a||Blockly.getMainWorkspace();1<window.location.hash.length?SparqlBlocks.Storage.retrieveXml(window.location.hash.substring(1),a):g(a)},setCopyOnThisButton:b}}();SparqlBlocks.Msg={};SparqlBlocks.JsonToBlocks=function(){var a={},b=function(b){var c=a[b];c||(c="http://www.w3.org/2001/XMLSchema#"+b,a[b]=c);return c},c=function(a,c){var d=null;if(a)switch(a.type){case "literal":case "typed-literal":if((d=a.datatype)&&d!=b("string")&&d!=b("langString")){var e=a.value,k=null;switch(d){case b("integer"):case b("decimal"):case b("float"):case b("double"):case b("byte"):case b("short"):case b("int"):case b("long"):case b("unsignedByte"):case b("unsignedShort"):case b("unsignedInt"):case b("unsignedLong"):case b("positiveInteger"):case b("nonNegativeInteger"):case b("negativeInteger"):case b("nonPositiveInteger"):k=
c.newBlock("sparql_math_number");k.initSvg();k.setFieldValue(e,"NUM");break;case b("boolean"):k=c.newBlock("sparql_logic_boolean");k.initSvg();k.setFieldValue(e,"BOOL");break;default:var l=SparqlBlocks.Prefixes.lookForIri(d);l?(k=c.newBlock("sparql_text_with_type_pref"),k.initSvg(),k.setFieldValue(e,"TEXT"),k.setFieldValue(l.prefix,"DT_PREFIX"),k.setFieldValue(l.localPart,"DT_LOCAL_NAME")):(k=c.newBlock("sparql_text_with_type_iri"),k.initSvg(),k.setFieldValue(e,"TEXT"),k.setFieldValue(d,"DT_IRI"))}d=
k}else d=null,(e=a["xml:lang"])?(d=c.newBlock("sparql_text_with_lang"),d.initSvg(),d.setFieldValue(e,"LANG")):(d=c.newBlock("sparql_text"),d.initSvg()),d.setFieldValue(a.value,"TEXT");break;case "uri":d=a.value;e=SparqlBlocks.Prefixes.lookForIri(d);null!=e?(d=c.newBlock("sparql_prefixed_iri"),d.initSvg(),d.setFieldValue(e.prefix,"PREFIX"),d.setFieldValue(e.localPart,"LOCAL_NAME")):(e=c.newBlock("sparql_iri"),e.initSvg(),e.setFieldValue(d,"IRI"),d=e);break;case "bnode":d=a.value,e=c.newBlock("sparql_prefixed_iri"),
e.initSvg(),e.setFieldValue("_","PREFIX"),e.setFieldValue(d,"LOCAL_NAME"),d=e}return d},d=function(a,b){var c=b.newBlock("variables_get");c.initSvg();c.setFieldValue(a,"VAR");return c},e=function(a,b){if(a){a.setDeletable(!1);a.setMovable(!1);a.setEditable(!1);var c=null;a.tooltip="tooltip";a.tooltipHoverMs=1;a.showTooltip=function(){var d=Blockly.Xml.blockToDom_(a);d.removeAttribute("editable");d.removeAttribute("movable");d.removeAttribute("deletable");c=Blockly.Xml.domToBlock(b,d);c.isInFlyout=
!0;c.hideTooltip=function(){c&&c.dispose()};Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_=c;var e=Blockly.bindEvent_(c.getSvgRoot(),"mousedown",null,function(a){Blockly.isRightButton(a)||c.disabled||(c.isInFlyout=!1,Blockly.unbindEvent_(e),c.hideTooltip=null,Blockly.Tooltip.hide(),c.onMouseDown_(a),c=null)}),d=a.getRelativeToSurfaceXY();c.moveBy(d.x,d.y);c.select()};a.hideTooltip=function(){c&&c.dispose()}}};return{blockFromValue:c,blockFromVar:d,selfDuplicatingBlockFromValue:function(a,
b){var d=c(a,b);e(d,b);return d},selfDuplicatingBlockFromVar:function(a,b){var c=d(a,b);e(c,b);return c}}}();SparqlBlocks.FieldTable=function(a,b){SparqlBlocks.FieldTable.superClass_.constructor.call(this,"");this.setValidator(b);this.height_=this.width_=0;this.size_=new goog.math.Size(this.width_,this.height_);this.data_=a;this.flyout_=new Blockly.Flyout({});this.flyout_.autoClose=!1};goog.inherits(SparqlBlocks.FieldTable,Blockly.Field);SparqlBlocks.FieldTable.prototype.EDITABLE=!1;
SparqlBlocks.FieldTable.prototype.setEventBindingsForBlock_=function(a){var b=a.getSvgRoot(),c=Blockly.createSvgElement("rect",{"fill-opacity":0},null);this.flyout_.workspace_.getCanvas().insertBefore(c,b);a.flyoutRect_=c;var d=this.flyout_.listeners_;d.push(Blockly.bindEvent_(b,"mousedown",null,this.flyout_.blockMouseDown_(a)));d.push(Blockly.bindEvent_(b,"mouseover",a,a.addSelect));d.push(Blockly.bindEvent_(b,"mouseout",a,a.removeSelect));d.push(Blockly.bindEvent_(c,"mousedown",null,this.flyout_.createBlockFunc_(a)));
d.push(Blockly.bindEvent_(c,"mouseover",a,a.addSelect));d.push(Blockly.bindEvent_(c,"mouseout",a,a.removeSelect))};SparqlBlocks.FieldTable.prototype.setEventBindings_=function(a,b,c){var d=this;a.forEach(function(a){d.setEventBindingsForBlock_(b[a])});c.forEach(function(b){a.forEach(function(a){d.setEventBindingsForBlock_(b[a])})});this.flyout_.listeners_.push(Blockly.bindEvent_(this.flyout_.svgBackground_,"mouseover",this.flyout_,function(a){a=this.workspace_.getTopBlocks(!1);for(var b=0,c;c=a[b];b++)c.removeSelect()}))};
SparqlBlocks.FieldTable.prototype.init=function(a){if(!this.sourceBlock_){this.sourceBlock_=a;this.rootElement_=Blockly.createSvgElement("g",{"class":"field_table"},a.getSvgRoot());this.visible_||(this.rootElement_.style.display="none");var b=this.flyout_.createDom();b.setAttribute("transform","translate(-13,-4)");this.rootElement_.appendChild(b);this.flyout_.targetWorkspace_=a.workspace;var c=this.flyout_.workspace_;c.targetWorkspace=a.workspace;if(this.data_.head){var d=this.data_.head.vars;if(d){var e=
this.varBlocks_={};d.forEach(function(a){var b=SparqlBlocks.JsonToBlocks.blockFromVar(a,c);e[a]=b});this.blockRows_=[];if(a=this.data_.results&&this.data_.results.bindings)this.blockRows_=a.map(function(a,b){var e={};d.forEach(function(b){var d=a[b];d&&(d=SparqlBlocks.JsonToBlocks.blockFromValue(d,c),e[b]=d)});return e})}}}};
SparqlBlocks.FieldTable.prototype.render_=function(){var a=this.data_.head.vars;this.renderCompute_(a,this.varBlocks_,this.blockRows_);this.setEventBindings_(a,this.varBlocks_,this.blockRows_)};SparqlBlocks.FieldTable.prototype.getSize=function(){this.size_.width||this.render_();return this.size_};SparqlBlocks.FieldTable.prototype.marginX_=0;SparqlBlocks.FieldTable.prototype.marginY_=6;SparqlBlocks.FieldTable.prototype.cellSepX_=4;SparqlBlocks.FieldTable.prototype.cellSepY_=4;
SparqlBlocks.FieldTable.prototype.renderCompute_=function(a,b,c){var d=this,e=2*this.marginX_,f=2*this.marginY_,g={},h=[0];a.forEach(function(a){var c=b[a];c.render();c=c.getHeightWidth();c.height>h[0]&&(h[0]=c.height);g[a]=c.width});f+=h[0];c.forEach(function(b,c){h[c+1]=0;a.forEach(function(a){var d=b[a];d&&(d.render(),d=d.getHeightWidth(),d.width>g[a]&&(g[a]=d.width),d.height>h[c+1]&&(h[c+1]=d.height))});f+=h[c+1]+d.cellSepY_});a.forEach(function(a,b){e+=g[a]+(0<b?d.cellSepX_:0)});this.width_=
e;this.height_=f;this.size_=new goog.math.Size(this.width_,this.height_);this.position_(a,b,c,g,h)};SparqlBlocks.FieldTable.prototype.positionBlock_=function(a,b,c){a.moveBy(Blockly.BlockSvg.TAB_HEIGHT+b,c)};
SparqlBlocks.FieldTable.prototype.position_=function(a,b,c,d,e){var f=this.marginX_,g=this.marginY_,h=this;a.forEach(function(a,c){h.positionBlock_(b[a],f,g);f+=d[a]+h.cellSepX_});c.forEach(function(b,c){var f=h.marginX_;g+=e[c]+h.cellSepY_;a.forEach(function(a,c){h.positionBlock_(b[a],f,g);f+=d[a]+h.cellSepX_})})};SparqlBlocks.FieldTable.prototype.dispose=function(){this.flyout_.dispose();goog.dom.removeNode(this.rootElement_);this.rootElement_=null};
SparqlBlocks.FieldTable.prototype.getSvgRoot=function(){return this.rootElement_};SparqlBlocks.FieldTable.prototype.setTooltip=function(a){this.rootElement_.tooltip=a};SparqlBlocks.Blocks=function(){var a=function(a){return function(){a.call(this)}},b=function(a){return function(b){a&&a.call(this,b)}};Blockly.BlockSvg.prototype.setEditable=function(a){Blockly.BlockSvg.superClass_.setEditable.call(this,a);a=this.getIcons();if(this.rendered)for(var b=0;b<a.length;b++)a[b].updateEditable()};return{block:function(c,d){d.customContextMenu=b(d.customContextMenu);d.init=a(d.init);Blockly.Blocks[c]=d},insertOptionBeforeHelp:function(a,b){var e=a.pop(),f=e&&"Help"==e.text;
!f&&e&&a.push(e);a.push(b);f&&a.push(e)}}}();SparqlBlocks.Blocks.bgp={};
(function(){var a=SparqlBlocks.Types.getExtension,b=function(a){a.setHelpUrl("http://www.w3.org/TR/sparql11-query/#QSynTriples")},c=function(a){b(a);a.setColour(65)},d=function(a){b(a);a.setColour(120)},e=function(a,b){if(a.getInputConnection(b)){var c=b.targetBlock;if(c&&(c=c.varsInScope()))return c}return[]};SparqlBlocks.Blocks.block("sparql_verb_objectlist",{init:function(){c(this);this.appendValueInput("VERB").setCheck(a("Verb"));this.appendStatementInput("OBJECT").setCheck("ObjectList").appendField("\u21b3");this.setInputsInline(!0);
this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")},getVarsInScope:function(){return _.union(e(this,"VERB"),e(this,"OBJECT"))}});SparqlBlocks.Blocks.block("sparql_verb_object",{init:function(){c(this);this.appendValueInput("VERB").setCheck(a("Verb")).appendField("\u2501\u252b");this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2523\u2501\u25b6");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,
"PropertyList");this.setTooltip(SparqlBlocks.Msg.VERB_OBJECT_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_reversePath_object",{init:function(){c(this);this.appendValueInput("VERB").setCheck(a("Resource")).appendField("\u25c0\u2501\u252b");this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2523\u2501");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip(SparqlBlocks.Msg.REVERSEPATH_OBJECT_TOOLTIP)}});
SparqlBlocks.Blocks.block("sparql_closurePath_object",{init:function(){c(this);this.appendValueInput("VERB").setCheck(a("Resource")).appendField("\u2501\u252b");this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2523 \u2731 \u2501\u25b6");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip(SparqlBlocks.Msg.CLOSUREPATH_OBJECT_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_reverseClosurePath_object",
{init:function(){c(this);this.appendValueInput("VERB").setCheck(a("Resource")).appendField("\u25c0\u2501 \u2731 \u252b");this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2523\u2501");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip(SparqlBlocks.Msg.REVERSECLOSUREPATH_OBJECT_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_isa",{init:function(){c(this);this.appendValueInput("TYPE").setCheck(a("ResourceOrVar")).appendField("is a");
this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip(SparqlBlocks.Msg.ISA_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_subject_propertylist",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(a("ResourceOrVar"));this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("  \u230a");this.setInputsInline(!0);this.setPreviousStatement(!0,a("TriplesBlock"));this.setNextStatement(!0,a("GraphPattern"));
this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_typedsubject_propertylist",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(a("ResourceOrVar"));this.appendValueInput("TYPE").setCheck(a("ResourceOrVar")).appendField("is a");this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("  &");this.setInputsInline(!0);this.setPreviousStatement(!0,a("TriplesBlock"));this.setNextStatement(!0,a("GraphPattern"));this.setTooltip(SparqlBlocks.Msg.TYPEDSUBJECT_PROPERTYLIST_TOOLTIP)}});
SparqlBlocks.Blocks.block("sparql_anonsubject_propertylist",{init:function(){d(this);this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("s.t.");this.setInputsInline(!0);this.setOutput(!0,"Resource");this.setTooltip(SparqlBlocks.Msg.ANONSUBJECT_PROPERTYLIST_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_subject_verb_objectlist",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(a("ResourceOrVar"));this.appendValueInput("VERB").appendField("has").setCheck(a("Verb"));
this.appendStatementInput("OBJECT_LIST").setCheck("ObjectList").appendField("\u21b3");this.setInputsInline(!0);this.setPreviousStatement(!0,a("TriplesBlock"));this.setNextStatement(!0,a("GraphPattern"));this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_subject_verb_object",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(a("ResourceOrVar"));this.appendValueInput("VERB").appendField("has").setCheck(a("Verb"));this.appendValueInput("OBJECT").setCheck(a("GraphTermOrVar")).appendField("\u2192");
this.setInputsInline(!0);this.setPreviousStatement(!0,a("TriplesBlock"));this.setNextStatement(!0,a("GraphPattern"));this.setTooltip("")}})})();SparqlBlocks.Blocks.control={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_filter",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#scopeFilters");this.setColour(210);this.appendValueInput("CONDITION").setCheck(a("BooleanExpr")).appendField("filter");this.setInputsInline(!0);this.setPreviousStatement(!0,a("GraphPattern"));this.setNextStatement(!0,a("GraphPattern"));this.setTooltip(SparqlBlocks.Msg.FILTER_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_union",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#alternatives");
this.setColour(260);this.appendStatementInput("OP1").setCheck(a("GraphPattern"));this.appendStatementInput("OP2").setCheck(a("GraphPattern")).appendField("union");this.setInputsInline(!0);this.setPreviousStatement(!0,a("GraphPattern"));this.setNextStatement(!0,a("GraphPattern"));this.setTooltip(SparqlBlocks.Msg.UNION_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_optional",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#optionals");this.setColour(260);this.appendStatementInput("OP").setCheck(a("GraphPattern")).appendField("optional");
this.setInputsInline(!0);this.setPreviousStatement(!0,a("GraphPattern"));this.setNextStatement(!0,a("GraphPattern"));this.setTooltip(SparqlBlocks.Msg.OPTIONAL_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_graph",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#optionals");this.setColour(260);this.appendValueInput("GRAPHNAME").setCheck(a("GraphTermOrVar")).appendField("choose graph");this.appendStatementInput("OP").setCheck(a("GraphPattern")).appendField("");this.setInputsInline(!0);
this.setPreviousStatement(!0,a("GraphPattern"));this.setNextStatement(!0,a("GraphPattern"));this.setTooltip(SparqlBlocks.Msg.GRAPH_TOOLTIP)}})})();SparqlBlocks.Blocks.query={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_construct",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#construct");this.setColour(290);this.appendDummyInput().appendField("CONSTRUCT");this.appendStatementInput("CONSTRUCT").setCheck("ConstructTriples");this.appendDummyInput().appendField("WHERE");this.appendStatementInput("WHERE").setCheck("TriplesBlock");this.setTooltip("")}});var b={init:function(){this.orderFieldCount_=1;this.appendValueInput("ORDER_FIELD1").setCheck(a("Expr")).appendField("order by",
"ORDER_LABEL1").appendField(new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]),"ORDER_DIRECTION1");this.appendDummyInput("AFTER_ORDER").appendField("& limit to first").appendField(new Blockly.FieldTextInput("5"),"LIMIT").appendField("rows")},onchange:function(){var b=this.getInput("ORDER_FIELD"+this.orderFieldCount_);if(b&&b.connection.targetConnection){if(1<this.orderFieldCount_){var d="ORDER_FIELD"+this.orderFieldCount_,b="ORDER_LABEL"+this.orderFieldCount_,e="ORDER_DIRECTION"+this.orderFieldCount_,
f=this.getInput(d),d=new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]);d.setValue(this.getFieldValue(e));f.removeField(e);f.removeField(b);f.appendField(", then by",b);f.appendField(d,e)}this.orderFieldCount_++;d="ORDER_FIELD"+this.orderFieldCount_;this.appendValueInput(d).setCheck(a("Expr")).appendField((2<this.orderFieldCount_?", ":"")+"and then by","ORDER_LABEL"+this.orderFieldCount_).appendField(new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]),"ORDER_DIRECTION"+this.orderFieldCount_);
this.moveInputBefore(d,"AFTER_ORDER")}else if(1<this.orderFieldCount_&&(f=this.getInput("ORDER_FIELD"+(this.orderFieldCount_-1)))&&!f.connection.targetConnection){this.removeInput("ORDER_FIELD"+this.orderFieldCount_);for(this.orderFieldCount_--;1<this.orderFieldCount_&&!this.getInput("ORDER_FIELD"+(this.orderFieldCount_-1)).connection.targetConnection;)this.removeInput("ORDER_FIELD"+(this.orderFieldCount_-1)),this.orderFieldCount_--;f.name="ORDER_FIELD"+this.orderFieldCount_;var b="ORDER_LABEL"+this.orderFieldCount_,
e="ORDER_DIRECTION"+this.orderFieldCount_,g=f.fieldRow[0].name,h=f.fieldRow[1].name,d=new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]);d.setValue(this.getFieldValue(h));f.removeField(h);f.removeField(g);f.appendField(1<this.orderFieldCount_?(2<this.orderFieldCount_?", ":"")+"and then by":"order by",b);f.appendField(d,e)}},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("order_field_count",this.orderFieldCount_);return a},domToMutation:function(b){this.orderFieldCount_=
parseInt(b.getAttribute("order_field_count"),10);for(b=2;b<=this.orderFieldCount_;b++){var d="ORDER_FIELD"+b,e="ORDER_LABEL"+b,f="ORDER_DIRECTION"+b,g=new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]);this.appendValueInput(d).setCheck(a("Expr")).appendField((2<b?", ":"")+"and then by",e).appendField(g,f);this.moveInputBefore(d,"AFTER_ORDER")}}};SparqlBlocks.Blocks.block("sparql_select",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#select");this.setColour(290);
this.appendDummyInput().appendField("select all the variables");this.appendStatementInput("WHERE").setCheck(a("GraphPattern")).appendField("where");b.init.call(this);this.setInputsInline(!0);this.setPreviousStatement(!0,a("SelectQuery"));this.setTooltip(SparqlBlocks.Msg.SELECT_TOOLTIP)},saveQueryAsSparql:function(){var a=SparqlBlocks.Sparql.blockToCode(this);a&&(a=new Blob([a],{type:"application/sparql-query"}),saveAs(a,"query.rq"))},customContextMenu:function(a){var b=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(a,
{text:"Save Query as SPARQL",enabled:!0,callback:function(){b.saveQueryAsSparql()}})},onchange:function(){var c=this.previousConnection.targetConnection;c?(c=c.check_)&&-1!=c.indexOf("GraphPattern")?this.nextConnection||this.setNextStatement(!0,a("GraphPattern")):this.nextConnection&&this.setNextStatement(!1):this.nextConnection&&(this.nextConnection.targetConnection?this.setPreviousStatement(!0,"GraphPattern"):(this.setNextStatement(!1),this.setPreviousStatement(!0,"SelectQuery")));b.onchange.call(this)},
mutationToDom:b.mutationToDom,domToMutation:b.domToMutation});SparqlBlocks.Blocks.block("sparql_var_binding",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#selectExpressions");this.setColour(330);this.appendValueInput("EXPR").setCheck(a("Expr"));this.appendDummyInput().appendField("as").appendField(new Blockly.FieldTextInput("col name"),"COLNAME");this.setInputsInline(!0);this.setPreviousStatement(!0,"VarBindings");this.setNextStatement(!0,"VarBindings");this.setTooltip("")}});
SparqlBlocks.Blocks.query={orderFields:b}})();SparqlBlocks.Blocks.exec={};
(function(){var a=SparqlBlocks.Types.getExtension,b=function(b){return{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation");b&&b.endpointField&&this.appendDummyInput().appendField("from").appendField(new Blockly.FieldTextInput("http://live.dbpedia.org/sparql"),"ENDPOINT");b&&b.baseQuery?(this.setColour(290),this.appendStatementInput("WHERE").setCheck(a("GraphPattern")).appendField("where"),SparqlBlocks.Blocks.query.orderFields.init.call(this),this.setInputsInline(!0),
this.appendStatementInput("RESULTS").setCheck(a("Table")).appendField("\u21aa")):(this.setColour(330),this.appendStatementInput("QUERY").setCheck(a("SelectQuery")).appendField(" \u2699"),this.appendDummyInput("RESULTS").appendField("\u21aa").appendField("","RESULTS_CONTAINER"));this.setTooltip(SparqlBlocks.Msg.EXECUTION_TOOLTIP)},onchange:function(){if(!this.resultsInput){var a=null,e=this.getInput("RESULTS").connection.targetBlock();e&&(a=e.id,e.dispose());a=this.workspace.newBlock("sparql_execution_placeholder",
a);a.initSvg();a.render();this.getInput("RESULTS").connection.connect(a.previousConnection);this.resultsInput=a.getInput("RESULTS")}b&&b.baseQuery&&SparqlBlocks.Blocks.query.orderFields.onchange.call(this);b&&b.dontExecute||(b&&b.baseQuery?SparqlBlocks.Exec.blockExec(this,this,this.resultsInput):SparqlBlocks.Exec.blockExec(this))},mutationToDom:SparqlBlocks.Blocks.query.orderFields.mutationToDom,domToMutation:SparqlBlocks.Blocks.query.orderFields.domToMutation,customContextMenu:function(a){if(this.sparqlQueryStr){var b=
this;SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Query as SPARQL",enabled:!0,callback:function(){var a=new Blob([b.sparqlQueryStr],{type:"application/sparql-query"});saveAs(a,"query.rq")}});SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Open Query in YASGUI",enabled:!0,callback:function(){var a=b.getFieldValue("ENDPOINT"),a="http://yasgui.org/#query="+encodeURIComponent(b.sparqlQueryStr)+(a?"&endpoint="+encodeURIComponent(a):"");window.open(a,"_blank")}})}this.resultsData&&(b=this,
SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Results as JSON",enabled:!0,callback:function(){var a=JSON.stringify(b.resultsData);a&&(a=new Blob([a],{type:"application/sparql-results+json"}),saveAs(a,"results.json"))}}))}}};SparqlBlocks.Blocks.block("sparql_execution",b());SparqlBlocks.Blocks.block("sparql_execution_query",b({baseQuery:!0}));SparqlBlocks.Blocks.block("sparql_execution_endpoint",b({endpointField:!0}));SparqlBlocks.Blocks.block("sparql_execution_endpoint_query",b({endpointField:!0,
baseQuery:!0}));SparqlBlocks.Blocks.block("sparql_execution_endpoint_fake",b({endpointField:!0,dontExecute:!0}));SparqlBlocks.Blocks.block("sparql_execution_placeholder",{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation");this.setColour(330);this.appendDummyInput("RESULTS").appendField(SparqlBlocks.Msg.EXECUTION_PLACEHOLDER,"RESULTS_CONTAINER");this.setPreviousStatement(!0,"Table");this.setTooltip(SparqlBlocks.Msg.EXECUTION_PLACEHOLDER_TOOLTIP);
this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1)}});SparqlBlocks.Blocks.block("sparql_execution_in_progress",{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation");this.setColour(330);this.appendDummyInput().appendField("execution in progress...");this.setPreviousStatement(!0,"Table");this.setTooltip(SparqlBlocks.Msg.EXECUTION_IN_PROGRESS_TOOLTIP);this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1)}});SparqlBlocks.Blocks.block("sparql_execution_error",
{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-failure");this.setColour(330);this.appendDummyInput().appendField(" * Error executing query! * ");this.appendDummyInput().appendField(new Blockly.FieldTextInput("ERROR"),"ERRORDESCR");this.setPreviousStatement(!0,"Table");this.setTooltip("");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1)}})})();SparqlBlocks.Blocks.logic={};
(function(){var a=SparqlBlocks.Types.getExtension,b=function(b){return a("Var"==b?"Expr":b)};SparqlBlocks.Blocks.logic.HUE=210;SparqlBlocks.Blocks.block("sparql_logic_compare",{init:function(){var a=this.RTL?[["=","EQ"],["\u2260","NEQ"],[">","LT"],["\u2265","LTE"],["<","GT"],["\u2264","GTE"]]:[["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"]];this.setHelpUrl(Blockly.Msg.LOGIC_COMPARE_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");
this.appendValueInput("A");this.appendValueInput("B").appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("OP");return{EQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ,NEQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ,LT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT,LTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE,GT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT,GTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE}[a]});this.prevBlocks_=[null,null]},onchange:function(){if(this.workspace){var a=
this.getInputTargetBlock("A"),d=this.getInputTargetBlock("B");if(a&&d&&!a.outputConnection.checkType_(d.outputConnection)&&0==_.intersection(b(a.outputConnection.check_),b(d.outputConnection.check_)).length)for(var e=0;e<this.prevBlocks_.length;e++){var f=this.prevBlocks_[e];if(f===a||f===d)f.setParent(null),f.bumpNeighbours_()}this.prevBlocks_[0]=a;this.prevBlocks_[1]=d}}});SparqlBlocks.Blocks.block("sparql_logic_operation",{init:function(){var b=[[Blockly.Msg.LOGIC_OPERATION_AND,"AND"],[Blockly.Msg.LOGIC_OPERATION_OR,
"OR"]];this.setHelpUrl(Blockly.Msg.LOGIC_OPERATION_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("A").setCheck(a("BooleanExpr"));this.appendValueInput("B").setCheck(a("BooleanExpr")).appendField(new Blockly.FieldDropdown(b),"OP");this.setInputsInline(!0);var d=this;this.setTooltip(function(){var a=d.getFieldValue("OP");return{AND:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND,OR:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR}[a]})}});SparqlBlocks.Blocks.block("sparql_logic_negate",
{init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NEGATE_TITLE,args0:[{type:"input_value",name:"BOOL",check:a("BooleanExpr")}],output:"BooleanExpr",colour:SparqlBlocks.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_NEGATE_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NEGATE_HELPURL})}});SparqlBlocks.Blocks.block("sparql_logic_boolean",{init:function(){var a=[[Blockly.Msg.LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.Msg.LOGIC_BOOLEAN_FALSE,"FALSE"]];this.setHelpUrl(Blockly.Msg.LOGIC_BOOLEAN_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);
this.setOutput(!0,"LiteralBoolean");this.appendDummyInput().appendField(new Blockly.FieldDropdown(a),"BOOL");this.setTooltip(SparqlBlocks.Msg.LOGIC_BOOLEAN_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_logic_null",{init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_NULL_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0);this.appendDummyInput().appendField(Blockly.Msg.LOGIC_NULL);this.setTooltip(Blockly.Msg.LOGIC_NULL_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_logic_ternary",
{init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_TERNARY_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.appendValueInput("IF").setCheck(a("BooleanExpr")).appendField(Blockly.Msg.LOGIC_TERNARY_CONDITION);this.appendValueInput("THEN").appendField(Blockly.Msg.LOGIC_TERNARY_IF_TRUE);this.appendValueInput("ELSE").appendField(Blockly.Msg.LOGIC_TERNARY_IF_FALSE);this.setOutput(!0,"Expr");this.setTooltip(Blockly.Msg.LOGIC_TERNARY_TOOLTIP);this.prevParentConnection_=null},onchange:function(){if(this.workspace){var a=
this.getInputTargetBlock("THEN"),b=this.getInputTargetBlock("ELSE"),e=this.outputConnection.targetConnection;if((a||b)&&e)for(var f=0;2>f;f++){var g=1==f?a:b;g&&!g.outputConnection.checkType_(e)&&(e===this.prevParentConnection_?(this.setParent(null),e.sourceBlock_.bumpNeighbours_()):(g.setParent(null),g.bumpNeighbours_()))}this.prevParentConnection_=e}}});SparqlBlocks.Blocks.block("sparql_exists",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#neg-exists");this.setColour(SparqlBlocks.Blocks.logic.HUE);
this.setOutput(!0,"BooleanExpr");this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("exists");this.setTooltip(SparqlBlocks.Msg.EXISTS_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_not_exists",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#neg-notexists");this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("not exists");this.setTooltip(SparqlBlocks.Msg.NOT_EXISTS_TOOLTIP)}})})();SparqlBlocks.Blocks.resources={};
(function(){SparqlBlocks.Blocks.block("sparql_prefixed_iri",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#prefNames");this.setColour(20);this.appendDummyInput().appendField(new Blockly.FieldTextInput(""),"PREFIX").appendField(":").appendField(new Blockly.FieldTextInput(""),"LOCAL_NAME");this.setInputsInline(!0);this.setOutput(!0,"Iri");this.setTooltip(SparqlBlocks.Msg.PREFIXED_IRI_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_iri",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#QSynIRI");this.setColour(20);
this.appendDummyInput().appendField("<").appendField(new Blockly.FieldTextInput(""),"IRI").appendField(">");this.setInputsInline(!0);this.setOutput(!0,"Iri");this.setTooltip(SparqlBlocks.Msg.IRI_TOOLTIP)}})})();SparqlBlocks.Blocks.math={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.math.HUE=230;SparqlBlocks.Blocks.block("sparql_math_number",{init:function(){this.setHelpUrl(Blockly.Msg.MATH_NUMBER_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"NUM");this.setOutput(!0,"LiteralNumber");this.setTooltip(SparqlBlocks.Msg.MATH_NUMBER_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_math_arithmetic",{init:function(){var b=
[[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"]];this.setHelpUrl(Blockly.Msg.MATH_ARITHMETIC_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("A").setCheck(a("NumberExpr"));this.appendValueInput("B").setCheck(a("NumberExpr")).appendField(new Blockly.FieldDropdown(b),"OP");this.setInputsInline(!0);var c=this;
this.setTooltip(function(){var a=c.getFieldValue("OP");return{ADD:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,MINUS:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,MULTIPLY:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,DIVIDE:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE}[a]})}});SparqlBlocks.Blocks.block("sparql_math_single",{init:function(){var b=[[Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE,"ABS"],["-","NEG"]];this.setHelpUrl(Blockly.Msg.MATH_SINGLE_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,
"NumberExpr");this.appendValueInput("NUM").setCheck(a("NumberExpr")).appendField(new Blockly.FieldDropdown(b),"OP");var c=this;this.setTooltip(function(){var a=c.getFieldValue("OP");return{ABS:Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS,NEG:Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG}[a]})}});SparqlBlocks.Blocks.block("sparql_math_number_property",{init:function(){var b=[[Blockly.Msg.MATH_IS_EVEN,"EVEN"],[Blockly.Msg.MATH_IS_ODD,"ODD"],[Blockly.Msg.MATH_IS_PRIME,"PRIME"],[Blockly.Msg.MATH_IS_WHOLE,"WHOLE"],[Blockly.Msg.MATH_IS_POSITIVE,
"POSITIVE"],[Blockly.Msg.MATH_IS_NEGATIVE,"NEGATIVE"],[Blockly.Msg.MATH_IS_DIVISIBLE_BY,"DIVISIBLE_BY"]];this.setColour(SparqlBlocks.Blocks.math.HUE);this.appendValueInput("NUMBER_TO_CHECK").setCheck(a("NumberExpr"));b=new Blockly.FieldDropdown(b,function(a){this.sourceBlock_.updateShape_("DIVISIBLE_BY"==a)});this.appendDummyInput().appendField(b,"PROPERTY");this.setInputsInline(!0);this.setOutput(!0,"BooleanExpr");this.setTooltip(Blockly.Msg.MATH_IS_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),
c="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");a.setAttribute("divisor_input",c);return a},domToMutation:function(a){a="true"==a.getAttribute("divisor_input");this.updateShape_(a)},updateShape_:function(b){var c=this.getInput("DIVISOR");b?c||this.appendValueInput("DIVISOR").setCheck(a("NumberExpr")):c&&this.removeInput("DIVISOR")}});SparqlBlocks.Blocks.block("sparql_math_round",{init:function(){var b=[[Blockly.Msg.MATH_ROUND_OPERATOR_ROUND,"ROUND"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP,"ROUNDUP"],
[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN,"ROUNDDOWN"]];this.setHelpUrl(Blockly.Msg.MATH_ROUND_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("NUM").setCheck(a("NumberExpr")).appendField(new Blockly.FieldDropdown(b),"OP");this.setTooltip(Blockly.Msg.MATH_ROUND_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_math_modulo",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_MODULO_TITLE,args0:[{type:"input_value",name:"DIVIDEND",check:a("NumberExpr")},
{type:"input_value",name:"DIVISOR",check:a("NumberExpr")}],inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_MODULO_TOOLTIP,helpUrl:Blockly.Msg.MATH_MODULO_HELPURL})}});SparqlBlocks.Blocks.block("sparql_math_constrain",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_CONSTRAIN_TITLE,args0:[{type:"input_value",name:"VALUE",check:a("NumberExpr")},{type:"input_value",name:"LOW",check:a("NumberExpr")},{type:"input_value",name:"HIGH",check:a("NumberExpr")}],
inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_CONSTRAIN_TOOLTIP,helpUrl:Blockly.Msg.MATH_CONSTRAIN_HELPURL})}});SparqlBlocks.Blocks.block("sparql_math_random_int",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_RANDOM_INT_TITLE,args0:[{type:"input_value",name:"FROM",check:a("NumberExpr")},{type:"input_value",name:"TO",check:a("NumberExpr")}],inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_RANDOM_INT_TOOLTIP,
helpUrl:Blockly.Msg.MATH_RANDOM_INT_HELPURL})}});SparqlBlocks.Blocks.block("sparql_math_random_float",{init:function(){this.setHelpUrl(Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendDummyInput().appendField(Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM);this.setTooltip(Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP)}})})();SparqlBlocks.Blocks.text={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.text.HUE=160;SparqlBlocks.Blocks.block("sparql_text",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1));this.setOutput(!0,"LiteralString");this.setTooltip(SparqlBlocks.Msg.TEXT_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_with_lang",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("@").appendField(new Blockly.FieldTextInput(""),"LANG");this.setOutput(!0,"LiteralString");this.setTooltip(SparqlBlocks.Msg.TEXT_WITH_LANG_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==
this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_with_type_pref",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("^^").appendField(new Blockly.FieldTextInput("prefix"),"DT_PREFIX").appendField(":").appendField(new Blockly.FieldTextInput("localName"),"DT_LOCAL_NAME");this.setOutput(!0,
"LiteralString");this.setTooltip(SparqlBlocks.Msg.TEXT_WITH_TYPE_PREF_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_with_type_iri",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("^^").appendField("<").appendField(new Blockly.FieldTextInput("iri"),"DT_IRI").appendField(">");this.setOutput(!0,"LiteralString");this.setTooltip(SparqlBlocks.Msg.TEXT_WITH_TYPE_IRI_TOOLTIP)},
newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_join",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_JOIN_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.itemCount_=2;this.updateShape_();this.setOutput(!0,"StringExpr");this.setMutator(new Blockly.Mutator(["sparql_text_create_join_item"]));this.setTooltip(Blockly.Msg.TEXT_JOIN_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=
parseInt(a.getAttribute("items"),10);this.updateShape_()},decompose:function(a){var c=Blockly.Block.obtain(a,"sparql_text_create_join_container");c.initSvg();for(var d=c.getInput("STACK").connection,e=0;e<this.itemCount_;e++){var f=a.newBlock("sparql_text_create_join_item");f.initSvg();d.connect(f.previousConnection);d=f.nextConnection}return c},compose:function(a){a=a.getInputTargetBlock("STACK");for(var c=[],d=0;a;)c[d]=a.valueConnection_,a=a.nextConnection&&a.nextConnection.targetBlock(),d++;this.itemCount_=
d;this.updateShape_();for(d=0;d<this.itemCount_;d++)c[d]&&this.getInput("ADD"+d).connection.connect(c[d])},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var c=0;a;){var d=this.getInput("ADD"+c);a.valueConnection_=d&&d.connection.targetConnection;c++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){if(this.getInput("EMPTY"))this.removeInput("EMPTY");else for(var a=0;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++;if(0==this.itemCount_)this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));
else for(a=0;a<this.itemCount_;a++){var c=this.appendValueInput("ADD"+a);0==a&&c.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH)}},newQuote_:Blockly.Blocks.sparql_text.newQuote_});SparqlBlocks.Blocks.block("sparql_text_create_join_container",{init:function(){this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP);this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_text_create_join_item",
{init:function(){this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP);this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_text_append",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_APPEND_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").appendField(Blockly.Msg.TEXT_APPEND_TO).appendField(new Blockly.FieldVariable(Blockly.Msg.TEXT_APPEND_VARIABLE),
"VAR").appendField(Blockly.Msg.TEXT_APPEND_APPENDTEXT);this.setPreviousStatement(!0);this.setNextStatement(!0);var a=this;this.setTooltip(function(){return Blockly.Msg.TEXT_APPEND_TOOLTIP.replace("%1",a.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,c){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(c,"VAR")}});SparqlBlocks.Blocks.block("sparql_text_length",{init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_LENGTH_TITLE,
args0:[{type:"input_value",name:"VALUE",check:a("StringExpr")}],output:"NumberExpr",colour:SparqlBlocks.Blocks.text.HUE,tooltip:Blockly.Msg.TEXT_LENGTH_TOOLTIP,helpUrl:Blockly.Msg.TEXT_LENGTH_HELPURL})}});SparqlBlocks.Blocks.block("sparql_text_isEmpty",{init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_ISEMPTY_TITLE,args0:[{type:"input_value",name:"VALUE",check:a("StringExpr")}],output:"BooleanExpr",colour:SparqlBlocks.Blocks.text.HUE,tooltip:Blockly.Msg.TEXT_ISEMPTY_TOOLTIP,helpUrl:Blockly.Msg.TEXT_ISEMPTY_HELPURL})}});
SparqlBlocks.Blocks.block("sparql_text_indexOf",{init:function(){var b=[[Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST,"FIRST"],[Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_INDEXOF_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("VALUE").setCheck(a("StringExpr")).appendField(Blockly.Msg.TEXT_INDEXOF_INPUT_INTEXT);this.appendValueInput("FIND").setCheck(a("StringExpr")).appendField(new Blockly.FieldDropdown(b),
"END");Blockly.Msg.TEXT_INDEXOF_TAIL&&this.appendDummyInput().appendField(Blockly.Msg.TEXT_INDEXOF_TAIL);this.setInputsInline(!0);this.setTooltip(Blockly.Msg.TEXT_INDEXOF_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_text_contains",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-contains");this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("VALUE").setCheck(a("StringExpr"));this.appendValueInput("FIND").setCheck(a("StringExpr")).appendField("contains");
this.setInputsInline(!0);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_text_regex",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-regex");this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("FIND").setCheck(a("StringExpr")).appendField("reg. exp.");this.appendValueInput("VALUE").setCheck(a("StringExpr")).appendField("is contained in");this.setInputsInline(!0);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_text_lang",
{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-lang");this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("VALUE").setCheck(a("StringExpr")).appendField("language of");this.appendValueInput("LANG").setCheck(a("StringExpr")).appendField("is");this.setInputsInline(!0);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_text_charAt",{init:function(){this.WHERE_OPTIONS=[[Blockly.Msg.TEXT_CHARAT_FROM_START,"FROM_START"],
[Blockly.Msg.TEXT_CHARAT_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_CHARAT_FIRST,"FIRST"],[Blockly.Msg.TEXT_CHARAT_LAST,"LAST"],[Blockly.Msg.TEXT_CHARAT_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.TEXT_CHARAT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"StringExpr");this.appendValueInput("VALUE").setCheck(a("StringExpr")).appendField(Blockly.Msg.TEXT_CHARAT_INPUT_INTEXT);this.appendDummyInput("AT");this.setInputsInline(!0);this.updateAt_(!0);this.setTooltip(Blockly.Msg.TEXT_CHARAT_TOOLTIP)},
mutationToDom:function(){var a=document.createElement("mutation"),c=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",c);return a},domToMutation:function(a){a="false"!=a.getAttribute("at");this.updateAt_(a)},updateAt_:function(b){this.removeInput("AT");this.removeInput("ORDINAL",!0);b?(this.appendValueInput("AT").setCheck(a("NumberExpr")),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");
Blockly.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_CHARAT_TAIL));var c=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(a){var c="FROM_START"==a||"FROM_END"==a;if(c!=b){var f=this.sourceBlock_;f.updateAt_(c);f.setFieldValue(a,"WHERE");return null}});this.getInput("AT").appendField(c,"WHERE")}});SparqlBlocks.Blocks.block("sparql_text_getSubstring",{init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,
"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("STRING").setCheck("String").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);
this.appendDummyInput("AT1");this.appendDummyInput("AT2");Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);this.setInputsInline(!0);this.setOutput(!0,"StringExpr");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),c=this.getInput("AT1").type==Blockly.INPUT_VALUE;a.setAttribute("at1",c);c=this.getInput("AT2").type==Blockly.INPUT_VALUE;
a.setAttribute("at2",c);return a},domToMutation:function(a){var c="true"==a.getAttribute("at1");a="true"==a.getAttribute("at2");this.updateAt_(1,c);this.updateAt_(2,a)},updateAt_:function(b,c){this.removeInput("AT"+b);this.removeInput("ORDINAL"+b,!0);c?(this.appendValueInput("AT"+b).setCheck(a("NumberExpr")),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+b).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+b);2==b&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&
(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));var d=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+b],function(a){var d="FROM_START"==a||"FROM_END"==a;if(d!=c){var g=this.sourceBlock_;g.updateAt_(b,d);g.setFieldValue(a,"WHERE"+b);return null}});this.getInput("AT"+b).appendField(d,"WHERE"+b);1==b&&this.moveInputBefore("AT1","AT2")}});SparqlBlocks.Blocks.block("sparql_text_changeCase",{init:function(){var b=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,
"UPPERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").setCheck(a("StringExpr")).appendField(new Blockly.FieldDropdown(b),"CASE");this.setOutput(!0,"StringExpr");this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_text_trim",{init:function(){var b=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,
"BOTH"],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").setCheck(a("StringExpr")).appendField(new Blockly.FieldDropdown(b),"MODE");this.setOutput(!0,"StringExpr");this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_hash",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-hash");
this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").setCheck(a("StringExprOrLiteral")).appendField(new Blockly.FieldDropdown([["MD5","MD5"],["SHA1","SHA1"],["SHA256","SHA256"],["SHA384","SHA384"],["SHA512","SHA512"]]),"TYPE").appendField("hash of");this.setOutput(!0,"StringExpr")}})})();SparqlBlocks.Blocks.variables={};
(function(){SparqlBlocks.Blocks.variables.HUE=330;SparqlBlocks.Blocks.block("sparql_variable",{init:function(){this.setHelpUrl(Blockly.Msg.VARIABLES_GET_HELPURL);this.setColour(SparqlBlocks.Blocks.variables.HUE);this.appendDummyInput().appendField(new Blockly.FieldVariable,"VAR");this.setOutput(!0,"Var");this.setTooltip("")},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}});Blockly.Blocks.variables_get=
Blockly.Blocks.sparql_variable;Blockly.Blocks.variables_set=null})();SparqlBlocks.Blocks.table={};
(function(){var a=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.table.HUE=330;SparqlBlocks.Blocks.block("sparql_smallTable",{init:function(){this.setColour(SparqlBlocks.Blocks.table.HUE);this.tableInput=this.appendDummyInput("TABLEINPUT").appendField("","TABLE");this.setPreviousStatement(!0,a("Table"))},setData:function(a){this.setTable(new SparqlBlocks.FieldTable(a))},setTable:function(a){this.tableInput.removeField("TABLE");this.tableInput.appendField(a,"TABLE")}});SparqlBlocks.Blocks.table.loadTable=
function(a){var c=workspace.newBlock("sparql_smallTable");c.setData(a);c.initSvg();c.render();return c}})();SparqlBlocks.Blocks.test={};
(function(){SparqlBlocks.Blocks.test.HUE=330;var a={},b=function(a,b){a.isRightAnswer=!0;b.setEditable(!1);b.setMovable(!1);b.setTooltip("Looks like you have found the right answer!");a.getInput("ANSWER").appendField("\u2b50");a.appendDummyInput().appendField("\u2b50")};SparqlBlocks.Blocks.block("sparql_test",{init:function(){this.setColour(SparqlBlocks.Blocks.test.HUE);this.setTooltip("1) Look for the right block and 2) Drop it in here");this.setEditable(!1);this.setInputsInline(!0);this.currentAnswer=
null;this.isRightAnswer=!1},onchange:function(){if(!this.isRightAnswer){var c=JSON.parse(this.data);if(c)if(!this.getInput("ANSWER")&&c.question&&this.appendValueInput("ANSWER").appendField(c.question),c.id&&a[c.id]&&a[c.id].rightAnswer){this.currentAnswer=a[c.id].rightAnswer;var d=this.getInput("ANSWER").connection,e=d.targetBlock();e&&e.dispose();var e=Blockly.Xml.textToDom(a[c.id].rightAnswerXML),f=Blockly.Xml.domToBlock(this.workspace,e.firstChild);d.connect(f.outputConnection);b(this,f)}else(d=
SparqlBlocks.Sparql.valueToCode(this,"ANSWER",SparqlBlocks.Sparql.ORDER_NONE))&&""!=d&&d!=this.currentAnswer&&(md5(d)===c.answerMD5?(SparqlBlocks.Storage.alert("\u2b50  Bingo! It is the right block!   \u2b50","info"),a[c.id]||(a[c.id]={}),a[c.id].rightAnswer=d,e=goog.dom.createDom("xml"),f=this.getInputTargetBlock("ANSWER"),e.appendChild(Blockly.Xml.blockToDom(f)),a[c.id].rightAnswerXML=Blockly.Xml.domToText(e),b(this,f)):(f=this.getInputTargetBlock("ANSWER"),f.unplug(),SparqlBlocks.Storage.alert("Sorry, wrong block. Try with another one...",
"error"))),this.currentAnswer=d}}})})();SparqlBlocks.Sparql.bgp={};
(function(){SparqlBlocks.Sparql.sparql_isa=function(a){return(a=SparqlBlocks.Sparql.valueToCode(a,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC))?"a "+a+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_verb_object=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return c?c+" "+(a?a:"[]")+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_reversePath_object=function(a){var c=
SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return c?"^"+c+" "+(a?a:"[]")+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_closurePath_object=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return c&&a?c+"* "+a+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_reverseClosurePath_object=
function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return c&&a?"^"+c+"* "+a+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_typedsubject_propertylist=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"SUBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC),d=SparqlBlocks.Sparql.valueToCode(a,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,
"PROPERTY_LIST"),";\n");return d||""!=a?(c?c:"[]")+(d?" a "+d+(""!=a?";":""):"")+(""!=a?"\n"+a:"")+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_subject_propertylist=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"SUBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"PROPERTY_LIST"),";\n");return""!=a?(c?c:"[]")+(""!=a?"\n"+a:"")+SparqlBlocks.Sparql.STMNT_BRK:""};var a=function(a,c){return[a||""!=c?"[\n"+(a?" a "+a+(""!=
c?";\n":""):"")+(""!=c?c:"")+"\n]":"[]",SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_anontypedsubject_propertylist=function(b){var c=SparqlBlocks.Sparql.valueToCode(b,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC);b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,"PROPERTY_LIST"),";\n");return a(c,b)};SparqlBlocks.Sparql.sparql_anonsubject_propertylist=function(b){b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,"PROPERTY_LIST"),";\n");return a(null,
b)}})();SparqlBlocks.Sparql.control={};
(function(){SparqlBlocks.Sparql.sparql_filter=function(a){return(a=SparqlBlocks.Sparql.valueToCode(a,"CONDITION",SparqlBlocks.Sparql.ORDER_NONE))?"FILTER("+a+")"+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_union=function(a){var b=SparqlBlocks.Sparql.statementToGraphPattern(a,"OP1");a=SparqlBlocks.Sparql.statementToGraphPattern(a,"OP2");return""==b?""==a?"":"{\n"+a+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:""==a?"{\n"+b+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:"{\n"+b+"\n} UNION {\n"+a+"\n}"+
SparqlBlocks.Sparql.STMNT_BRK};SparqlBlocks.Sparql.sparql_optional=function(a){a=SparqlBlocks.Sparql.statementToGraphPattern(a,"OP");return""==a?"":"OPTIONAL {\n"+a+"\n}"+SparqlBlocks.Sparql.STMNT_BRK};SparqlBlocks.Sparql.sparql_graph=function(a){var b=SparqlBlocks.Sparql.statementToGraphPattern(a,"OP");return(a=SparqlBlocks.Sparql.valueToCode(a,"GRAPHNAME",SparqlBlocks.Sparql.ORDER_NONE))&&""!=b?"GRAPH "+a+" {\n"+b+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:""}})();SparqlBlocks.Sparql.logic={};
(function(){SparqlBlocks.Sparql.sparql_logic_compare=function(a){var b={EQ:"=",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[a.getFieldValue("OP")],c="="==b||"!="==b?SparqlBlocks.Sparql.ORDER_EQUALITY:SparqlBlocks.Sparql.ORDER_RELATIONAL,d=SparqlBlocks.Sparql.valueToCode(a,"A",c)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"B",c)||"0";return[d+" "+b+" "+a,c]};SparqlBlocks.Sparql.sparql_logic_operation=function(a){var b="AND"==a.getFieldValue("OP")?"&&":"||",c="&&"==b?SparqlBlocks.Sparql.ORDER_LOGICAL_AND:SparqlBlocks.Sparql.ORDER_LOGICAL_OR,
d=SparqlBlocks.Sparql.valueToCode(a,"A",c);a=SparqlBlocks.Sparql.valueToCode(a,"B",c);if(d||a){var e="&&"==b?"true":"false";d||(d=e);a||(a=e)}else a=d="false";return[d+" "+b+" "+a,c]};SparqlBlocks.Sparql.sparql_logic_negate=function(a){var b=SparqlBlocks.Sparql.ORDER_LOGICAL_NOT;return["!"+(SparqlBlocks.Sparql.valueToCode(a,"BOOL",b)||"true"),b]};SparqlBlocks.Sparql.sparql_logic_boolean=function(a){return["TRUE"==a.getFieldValue("BOOL")?"true":"false",SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_logic_ternary=
function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"IF",SparqlBlocks.Sparql.ORDER_COMMA)||"false",c=SparqlBlocks.Sparql.valueToCode(a,"THEN",SparqlBlocks.Sparql.ORDER_COMMA)||'""';a=SparqlBlocks.Sparql.valueToCode(a,"ELSE",SparqlBlocks.Sparql.ORDER_COMMA)||'""';return["IF("+b+", "+c+", "+a+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_exists=function(a){a=SparqlBlocks.Sparql.statementToGraphPattern(a,"OP");return[""==a?"true":"EXISTS {\n"+a+"\n}",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};
SparqlBlocks.Sparql.sparql_not_exists=function(a){a=SparqlBlocks.Sparql.statementToGraphPattern(a,"OP");return[""==a?"true":"NOT EXISTS {\n"+a+"\n}",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}})();SparqlBlocks.Sparql.query={};
(function(){SparqlBlocks.Sparql.sparqlQuery=function(a){if(!a)return"";var b=SparqlBlocks.Sparql.statementToGraphPattern(a,"WHERE");if(""==b)return"";for(var c=a.getFieldValue("LIMIT"),b="SELECT DISTINCT * WHERE {\n"+b+"\n}",d=null,e=1;e<=a.orderFieldCount_;e++){var f=SparqlBlocks.Sparql.valueToCode(a,"ORDER_FIELD"+e,SparqlBlocks.Sparql.ORDER_NONE);if(f){var g=a.getFieldValue("ORDER_DIRECTION"+e),d=d?d+", ":"ORDER BY ";g&&"DESC"==g&&(d+="DESC");d+="("+f+")"}}d&&(b+="\n"+d);c&&(b+="\nLIMIT "+c);a=
b.match(/[^(|!/\^,;\x20|\x09|\x0D|\x0A]+[\x20|\x09|\x0D|\x0A]*:/g);c=null;a&&(c=a.map(function(a){return a.substr(0,a.length-1).trim()}));var h="";c&&c.forEach(function(a){var b=SparqlBlocks.Prefixes.lookForPrefix(a);b&&(h+="PREFIX "+a+":\t<"+b+">\n")});0<h.length&&(b=h+"\n"+b);return b};SparqlBlocks.Sparql.sparql_select=function(a){return(a=SparqlBlocks.Sparql.sparqlQuery(a))?"{\n"+SparqlBlocks.Sparql.prefixLines(a,SparqlBlocks.Sparql.INDENT)+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:""}})();SparqlBlocks.Sparql.resources={};
(function(){var a=function(a){return a.split("").map(function(a){return _.contains("_~.-!$&'()\\*+,;=/?#@%".split(""),a)?"\\"+a:a}).join("")};SparqlBlocks.Sparql.sparql_prefixed_iri=function(b){var c=b.getFieldValue("PREFIX");b=b.getFieldValue("LOCAL_NAME");var d=null,e=SparqlBlocks.Prefixes.lookForPrefix(c);e&&(d="<"+e+b+">");d||(d=c+":"+a(b));return[d,SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_iri=function(a){return["<"+a.getFieldValue("IRI")+">",SparqlBlocks.Sparql.ORDER_ATOMIC]};
SparqlBlocks.Sparql.variables_get=function(a){return["?"+a.getFieldValue("VAR"),SparqlBlocks.Sparql.ORDER_ATOMIC]}})();SparqlBlocks.Sparql.math={};
(function(){SparqlBlocks.Sparql.sparql_math_number=function(a){a=a.getFieldValue("NUM");var c=""+parseInt(a);if(a==c)return[a,SparqlBlocks.Sparql.ORDER_ATOMIC];c=parseFloat(a);if(!isNaN(c))return[""+c,SparqlBlocks.Sparql.ORDER_ATOMIC];throw"Not a number: "+a;};SparqlBlocks.Sparql.sparql_math_arithmetic=function(a){var c={ADD:[" + ",SparqlBlocks.Sparql.ORDER_ADDITION],MINUS:[" - ",SparqlBlocks.Sparql.ORDER_SUBTRACTION],MULTIPLY:[" * ",SparqlBlocks.Sparql.ORDER_MULTIPLICATION],DIVIDE:[" / ",SparqlBlocks.Sparql.ORDER_DIVISION]}[a.getFieldValue("OP")],
d=c[0],c=c[1],e=SparqlBlocks.Sparql.valueToCode(a,"A",c)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"B",c)||"0";return[e+d+a,c]};SparqlBlocks.Sparql.sparql_math_single=function(a){var c=a.getFieldValue("OP"),d;if("NEG"==c)return a=SparqlBlocks.Sparql.valueToCode(a,"NUM",SparqlBlocks.Sparql.ORDER_UNARY_NEGATION)||"0","-"==a[0]&&(a=" "+a),["-"+a,SparqlBlocks.Sparql.ORDER_UNARY_NEGATION];a=SparqlBlocks.Sparql.valueToCode(a,"NUM",SparqlBlocks.Sparql.ORDER_NONE)||"0";switch(c){case "ABS":d="ABS("+a+")";
break;case "ROUND":d="ROUND("+a+")";break;case "ROUNDUP":d="CEIL("+a+")";break;case "ROUNDDOWN":d="FLOOR("+a+")"}if(d)return[d,SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];throw"Unknown math operator: "+c;};var a=function(a){return["FLOOR("+a+") = "+a,SparqlBlocks.Sparql.ORDER_EQUALITY]};SparqlBlocks.Sparql.sparql_math_number_property=function(b){var c=SparqlBlocks.Sparql.valueToCode(b,"NUMBER_TO_CHECK",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";switch(b.getFieldValue("PROPERTY")){case "EVEN":return a(c+
" / 2")[0];case "ODD":return c+=" / 2","FLOOR("+c+") != "+c;case "WHOLE":return a(c);case "POSITIVE":return[c+" > 0",SparqlBlocks.Sparql.ORDER_RELATIONAL];case "NEGATIVE":return[c+" < 0",SparqlBlocks.Sparql.ORDER_RELATIONAL];case "DIVISIBLE_BY":return b=SparqlBlocks.Sparql.valueToCode(b,"DIVISOR",SparqlBlocks.Sparql.ORDER_MODULUS)||"0",a(c+" / "+b)[0]}};SparqlBlocks.Sparql.sparql_math_round=SparqlBlocks.Sparql.sparql_math_single;SparqlBlocks.Sparql.sparql_math_modulo=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,
"DIVIDEND",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"DIVISOR",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";return[c+" - "+("FLOOR(ABS("+c+" / "+a+"))")+" * ABS("+c+") / "+c+" * ABS("+a+")",SparqlBlocks.Sparql.ORDER_SUBTRACTION]};SparqlBlocks.Sparql.sparql_math_constrain=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_RELATIONAL)||"0",d=SparqlBlocks.Sparql.valueToCode(a,"LOW",SparqlBlocks.Sparql.ORDER_RELATIONAL);a=SparqlBlocks.Sparql.valueToCode(a,
"HIGH",SparqlBlocks.Sparql.ORDER_RELATIONAL);return["IF("+c+" < "+d+", "+d+", IF("+c+" > "+a+", "+a+", "+c+") )",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_math_random_int=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"FROM",SparqlBlocks.Sparql.ORDER_ADDITION)||"0";return["FLOOR(RAND() * ("+(SparqlBlocks.Sparql.valueToCode(a,"TO",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"0")+" - "+c+" + 1) + "+c+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_math_random_float=
function(a){return["RAND()",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}})();SparqlBlocks.Sparql.text={};
(function(){SparqlBlocks.Sparql.sparql_text=function(a){return[SparqlBlocks.Sparql.quote_(a.getFieldValue("TEXT")),SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_text_with_lang=function(a){var b=SparqlBlocks.Sparql.quote_(a.getFieldValue("TEXT"));(a=a.getFieldValue("LANG"))&&0<a.length&&(b+="@"+a);return[b,SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_text_join=function(a){var b;if(0==a.itemCount_)return["''",SparqlBlocks.Sparql.ORDER_ATOMIC];if(1==a.itemCount_)b=SparqlBlocks.Sparql.valueToCode(a,
"ADD0",SparqlBlocks.Sparql.ORDER_NONE)||"''",b="STR("+b+")";else if(2==a.itemCount_)b=SparqlBlocks.Sparql.valueToCode(a,"ADD0",SparqlBlocks.Sparql.ORDER_NONE)||"''",a=SparqlBlocks.Sparql.valueToCode(a,"ADD1",SparqlBlocks.Sparql.ORDER_NONE)||"''",b="CONCAT(STR("+b+"), STR("+a+"))";else{b=Array(a.itemCount_);for(var c=0;c<a.itemCount_;c++)b[c]=SparqlBlocks.Sparql.valueToCode(a,"ADD"+c,SparqlBlocks.Sparql.ORDER_NONE)||"''";b="CONCAT(STR("+b.join("), STR(")+"))"}return[b,SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};
SparqlBlocks.Sparql.sparql_text_length=function(a){return["STRLEN("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_isEmpty=function(a){return["STRLEN("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+") == 0",SparqlBlocks.Sparql.ORDER_EQUALITY]};SparqlBlocks.Sparql.sparql_text_contains=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"FIND",SparqlBlocks.Sparql.ORDER_COMMA)||
"''";a=SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_COMMA)||"''";return["REGEX("+a+", STR("+b+"), 'i') AND (COALESCE(LANG("+b+"),'') = '' OR LANGMATCHES(LANG("+a+"), LANG("+b+")))",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_regex=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"FIND",SparqlBlocks.Sparql.ORDER_COMMA)||"''";return["REGEX("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_COMMA)||"''")+", "+b+', "i")',SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};
SparqlBlocks.Sparql.sparql_text_lang=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"LANG",SparqlBlocks.Sparql.ORDER_COMMA)||"''";return["LANGMATCHES(LANG("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+"), "+b+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_charAt=function(a){var b=a.getFieldValue("WHERE")||"FROM_START",c=SparqlBlocks.Sparql.valueToCode(a,"AT",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"1";a=SparqlBlocks.Sparql.valueToCode(a,
"VALUE",SparqlBlocks.Sparql.ORDER_COMMA)||"''";switch(b){case "FIRST":return["SUBSTR("+a+", 1, 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "LAST":return["SUBSTR("+a+", STRLEN("+a+"), 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "FROM_START":return["SUBSTR("+a+", "+c+", 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "FROM_END":return["SUBSTR("+a+", STRLEN("+a+") + 1 - "+c+", 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}throw"Unhandled option (text_charAt).";};SparqlBlocks.Sparql.sparql_text_getSubstring=
function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"STRING",SparqlBlocks.Sparql.ORDER_COMMA)||"''",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2"),e=SparqlBlocks.Sparql.valueToCode(a,"AT1",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"1";a=SparqlBlocks.Sparql.valueToCode(a,"AT2",SparqlBlocks.Sparql.ORDER_ADDITION)||"1";if("FIRST"!=c||"LAST"!=d){if("FIRST"==c)c="1";else if("LAST"==c)c="STRLEN("+b+")";else if("FROM_START"==c)c=e;else if("FROM_END"==c)c="STRLEN("+b+") + 1 - "+e;else throw"Unhandled option (text_getSubstring): "+
c;if("FIRST"==d)d="2 - "+c;else if("LAST"==d)d=null;else if("FROM_START"==d)d=a+" + 1 - "+c;else if("FROM_END"==d)d="STRLEN("+b+") + 2 - "+a+" - "+c;else throw"Unhandled option (text_getSubstring): "+d;return[d?"SUBSTR("+b+", "+c+", "+d+")":"SUBSTR("+b+", "+c+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}};SparqlBlocks.Sparql.sparql_text_changeCase=function(a){var b=a.getFieldValue("CASE"),c={UPPERCASE:"UCASE",LOWERCASE:"LCASE"}[b];if(c)return a=SparqlBlocks.Sparql.valueToCode(a,"TEXT",SparqlBlocks.Sparql.ORDER_NONE)||
"''",[c+"("+a+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];throw"Unknown case type: "+b;};SparqlBlocks.Sparql.sparql_hash=function(a){var b=a.getFieldValue("TYPE");if(b)return a=SparqlBlocks.Sparql.valueToCode(a,"TEXT",SparqlBlocks.Sparql.ORDER_NONE)||"''",[b+"("+a+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];throw"Unknown hash function: "+b;}})();SparqlBlocks.Sparql.variables={};(function(){SparqlBlocks.Sparql.variables_get=function(a){return["?"+a.getFieldValue("VAR"),SparqlBlocks.Sparql.ORDER_ATOMIC]}})();SparqlBlocks.version="0.2.0";