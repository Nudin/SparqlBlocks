// Do not edit this file; automatically generated by build.py.
'use strict';

var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};
goog.define=function(a,b){var c=b;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,a)?c=goog.global.CLOSURE_UNCOMPILED_DEFINES[a]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]));goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;
goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(a){if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,b){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a,b)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if(!goog.isString(a)||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};
goog.module.getInternal_=function(a){if(!COMPILED)return goog.isProvided_(a)?a in goog.loadedModules_?goog.loadedModules_[a]:goog.getObjectByName(a):null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};goog.addDependency=function(a,b,c,d){if(goog.DEPENDENCIES_ENABLED){var e;a=a.replace(/\\/g,"/");for(var f=goog.dependencies_,g=0;e=b[g];g++)f.nameToPath[e]=a,f.pathIsModule[a]=!!d;for(d=0;b=c[d];d++)a in f.requires||(f.requires[a]={}),f.requires[a][b]=!0}};
goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(a);if(goog.isProvided_(a))return goog.isInModuleLoader_()?goog.module.getInternal_(a):null;if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b)return goog.included_[b]=!0,goog.writeScripts_(),null}a="goog.require could not find: "+a;goog.logToConsole_(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("SCRIPT"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),
d=-1==d?c.length:d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a,b){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(a,b)&&(goog.dependencies_.written[a]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(a){goog.importScript_("",'goog.retrieveAndExecModule_("'+a+'");')&&(goog.dependencies_.written[a]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(a,b){return goog.LOAD_MODULE_USING_EVAL&&
goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(b+"\n//# sourceURL="+a+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+b+"\n;return exports});\n//# sourceURL="+a+"\n"},goog.loadQueuedModules_=function(){var a=goog.queuedModules_.length;if(0<a){var b=goog.queuedModules_;goog.queuedModules_=[];for(var c=0;c<a;c++)goog.maybeProcessDeferredPath_(b[c])}},goog.maybeProcessDeferredDep_=function(a){goog.isDeferredModule_(a)&&goog.allDepsAreAvailable_(a)&&(a=goog.getPathFromDeps_(a),
goog.maybeProcessDeferredPath_(goog.basePath+a))},goog.isDeferredModule_=function(a){return(a=goog.getPathFromDeps_(a))&&goog.dependencies_.pathIsModule[a]?goog.basePath+a in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(a){if((a=goog.getPathFromDeps_(a))&&a in goog.dependencies_.requires)for(var b in goog.dependencies_.requires[a])if(!goog.isProvided_(b)&&!goog.isDeferredModule_(b))return!1;return!0},goog.maybeProcessDeferredPath_=function(a){if(a in goog.dependencies_.deferred){var b=
goog.dependencies_.deferred[a];delete goog.dependencies_.deferred[a];goog.globalEval(b)}},goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1};var c;if(goog.isFunction(a))c=a.call(goog.global,{});else if(goog.isString(a))c=goog.loadModuleFromSource_.call(goog.global,a);else throw Error("Invalid module definition");var d=goog.moduleLoaderState_.moduleName;if(!goog.isString(d)||!d)throw Error('Invalid module name "'+d+'"');goog.moduleLoaderState_.declareLegacyNamespace?
goog.constructNamespace_(d,c):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(c);goog.loadedModules_[d]=c;if(goog.moduleLoaderState_.declareTestMethods)for(var e in c)if(0===e.indexOf("test",0)||"tearDown"==e||"setUp"==e||"setUpPage"==e||"tearDownPage"==e)goog.global[e]=c[e]}finally{goog.moduleLoaderState_=b}},goog.loadModuleFromSource_=function(a){eval(a);return{}},goog.writeScriptSrcNode_=function(a){goog.global.document.write('<script type="text/javascript" src="'+a+'">\x3c/script>')},goog.appendScriptSrcNode_=
function(a){var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.src=a;c.defer=!1;c.async=!1;b.head.appendChild(c)},goog.writeScriptTag_=function(a,b){if(goog.inHtmlDocument_()){var c=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}var d=goog.IS_OLD_IE_;void 0===b?d?(d=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+
")' ",c.write('<script type="text/javascript" src="'+a+'"'+d+">\x3c/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(a):goog.writeScriptSrcNode_(a):c.write('<script type="text/javascript">'+b+"\x3c/script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(a,b){"complete"==a.readyState&&goog.lastNonModuleScriptIndex_==b&&goog.loadQueuedModules_();return!0},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&
(d.visited[e]=!0,e in d.requires))for(var f in d.requires[e])if(!goog.isProvided_(f))if(f in d.nameToPath)a(d.nameToPath[f]);else throw Error("Undefined nameToPath for "+f);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(var f=0;f<b.length;f++)e=b[f],goog.dependencies_.written[e]=!0;var g=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(f=0;f<b.length;f++)if(e=b[f])d.pathIsModule[e]?goog.importModule_(goog.basePath+e):goog.importScript_(goog.basePath+
e);else throw goog.moduleLoaderState_=g,Error("Undefined script input");goog.moduleLoaderState_=g},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};
goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return b.responseText};
goog.retrieveAndExecModule_=function(a){if(!COMPILED){var b=a;a=goog.normalizePath_(a);var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,d=goog.loadFileSync_(a);if(null!=d)d=goog.wrapModule_(a,d),goog.IS_OLD_IE_?(goog.dependencies_.deferred[b]=d,goog.queuedModules_.push(b)):c(a,d);else throw Error("load of "+a+"failed");}};
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(b){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,d=c.createElement("SCRIPT");d.type="text/javascript";d.defer=!1;d.appendChild(c.createTextNode(a));
c.body.appendChild(d);c.body.removeChild(d)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return d in b?b[d]:a}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_){for(var e=Array(arguments.length-1),f=1;f<arguments.length;f++)e[f-1]=arguments[f];return d.superClass_.constructor.apply(a,e)}e=Array(arguments.length-2);for(f=2;f<arguments.length;f++)e[f-2]=arguments[f];for(var f=!1,g=a.constructor;g;g=
g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(a,b){var c=b.constructor,d=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(a,b){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(b&&b.prototype&&b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return a;var c=function(){var b=a.apply(this,arguments)||this;b[goog.UID_PROPERTY_]=b[goog.UID_PROPERTY_];this.constructor===c&&Object.seal(b);return b};return c}return a};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};goog.tagUnsealableClass=function(a){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";/*

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var SparqlBlocks={Prefixes:{}},prefixMap_=null,reverseMap_={},lookForPrefix_=function(a){return prefixMap_[a]},lookForIri_=function(a){var b=reverseMap_[a];if(b)return{prefix:b,localPart:""};var c=null,d=a.substr(0,a.length-1),b=d.lastIndexOf("#");-1<b?c=a.substr(0,b+1):(b=d.lastIndexOf("/"),-1<b&&(c=a.substr(0,b+1)));if(null!=c){if(c=lookForIri_(c))return{prefix:c.prefix,localPart:c.localPart+a.substr(b+1)}}else return null};
$.getJSON("../prefix.cc/all.file.json",function(a){prefixMap_=a;Object.keys(a).forEach(function(b){reverseMap_[a[b]]||(reverseMap_[a[b]]=b)})});SparqlBlocks.Prefixes.lookForPrefix=lookForPrefix_;SparqlBlocks.Prefixes.lookForIri=lookForIri_;SparqlBlocks.SelfDuplication={};SparqlBlocks.SelfDuplication.visible=!1;var mouseOutPid_=0,showPid_=0,lastX_=0,lastY_=0,element_=null,poisonedElement_=null;SparqlBlocks.SelfDuplication.OFFSET_X=0;SparqlBlocks.SelfDuplication.OFFSET_Y=10;SparqlBlocks.SelfDuplication.RADIUS_OK=100;SparqlBlocks.SelfDuplication.HOVER_MS=1E3;SparqlBlocks.SelfDuplication.MARGINS=5;
var duplicateInPlace_=function(a){var b=Blockly.Xml.blockToDom_(a);Blockly.Xml.deleteNext(b);b=Blockly.Xml.domToBlock(a.workspace,b);a=a.getRelativeToSurfaceXY();b.moveBy(a.x,a.y);b.select();return b},hide_=function(a,b){return function(){if(b){var c=a.getRelativeToSurfaceXY(),d=b.getRelativeToSurfaceXY(),e=c.y-d.y;Math.sqrt(Math.pow(c.x-d.x,2)+Math.pow(e,2))<=SparqlBlocks.SelfDuplication.RADIUS_OK&&(b.dispose(),b=null)}clearTimeout(showPid_)}};SparqlBlocks.SelfDuplication.hide=hide_;
var show_=function(a){return function(){poisonedElement_=element_;unbindMouseEvents_(a);var b=duplicateInPlace_(a);bindMouseEvents_(a);Blockly.bindEvent_(b.getSvgRoot(),"mouseout",null,onDuplicateMouseOut_(a,b));Blockly.bindEvent_(b.getSvgRoot(),"mouseover",null,onDuplicateMouseOver_(a,b));b.setDeletable(!0);b.setMovable(!0);b.setEditable(!0)}},onMouseOver_=function(a){return function(b){Blockly.dragMode_||show_(a)()}},onMouseOut_=function(a){return function(b){mouseOutPid_=setTimeout(function(){poisonedElement_=
element_=null;hide_(a)()},1);clearTimeout(showPid_)}},onDuplicateMouseOver_=function(a,b){return function(a){b.mouseOutPid_&&clearTimeout(b.mouseOutPid_)}},onDuplicateMouseOut_=function(a,b){return function(c){Blockly.dragMode_||(b.mouseOutPid_=setTimeout(function(){poisonedElement_=element_=null;hide_(a,b)();b.mouseOutPid_=null},1))}},onMouseMove_=function(a){return function(b){element_&&0==Blockly.dragMode_&&!Blockly.WidgetDiv.isVisible()&&(SparqlBlocks.SelfDuplication.visible?hide_(a)():poisonedElement_!=
element_&&(clearTimeout(showPid_),lastX_=b.clientX,lastY_=b.clientY,showPid_=setTimeout(show_(a),SparqlBlocks.SelfDuplication.HOVER_MS)))}},unbindMouseEvents_=function(a){Blockly.unbindEvent_(a.boundEvents.mouseover)},unbindTheseMouseEvents_=function(a){Blockly.unbindEvent_(a.mouseover)},bindMouseEvents_=function(a,b){if(!b&&(b=a.svgPath_,!b))throw"SVG Path Element Not Found for Block: "+a;a.boundEvents={mouseover:Blockly.bindEvent_(b,"mouseover",null,onMouseOver_(a))}};
SparqlBlocks.SelfDuplication.bindMouseEvents=bindMouseEvents_;SparqlBlocks.Output={};
var xsd_map_={},xsd_=function(a){var b=xsd_map_[a];b||(b="http://www.w3.org/2001/XMLSchema#"+a,xsd_map_[a]=b);return b},blockFromTypedLiteral_=function(a,b,c){var d=null;switch(b){case xsd_("integer"):case xsd_("decimal"):case xsd_("float"):case xsd_("double"):case xsd_("byte"):case xsd_("short"):case xsd_("int"):case xsd_("long"):case xsd_("unsignedByte"):case xsd_("unsignedShort"):case xsd_("unsignedInt"):case xsd_("unsignedLong"):case xsd_("positiveInteger"):case xsd_("nonNegativeInteger"):case xsd_("negativeInteger"):case xsd_("nonPositiveInteger"):d=Blockly.Block.obtain(c,
"sparql_math_number");d.initSvg();d.setFieldValue(a,"NUM");break;case xsd_("boolean"):d=Blockly.Block.obtain(c,"sparql_logic_boolean");d.initSvg();d.setFieldValue(a,"BOOL");break;default:var e=SparqlBlocks.Prefixes.lookForIri(b);e?(d=Blockly.Block.obtain(c,"sparql_text_with_type_pref"),d.initSvg(),d.setFieldValue(a,"TEXT"),d.setFieldValue(e.prefix,"DT_PREFIX"),d.setFieldValue(e.localPart,"DT_LOCAL_NAME")):(d=Blockly.Block.obtain(c,"sparql_text_with_type_iri"),d.initSvg(),d.setFieldValue(a,"TEXT"),
d.setFieldValue(b,"DT_IRI"))}return d},blockFromStringLiteral_=function(a,b){var c=null,d=a["xml:lang"];d?(c=Blockly.Block.obtain(b,"sparql_text_with_lang"),c.initSvg(),c.setFieldValue(d,"LANG")):(c=Blockly.Block.obtain(b,"sparql_text"),c.initSvg());c.setFieldValue(a.value,"TEXT");return c},blockFromLiteral_=function(a,b){var c=a.datatype;return c&&c!=xsd_("string")&&c!=xsd_("langString")?blockFromTypedLiteral_(a.value,c,b):blockFromStringLiteral_(a,b)},blockFromUri_=function(a,b){var c=a.value,d=
SparqlBlocks.Prefixes.lookForIri(c);if(null!=d)return c=Blockly.Block.obtain(b,"sparql_prefixed_iri"),c.initSvg(),c.setFieldValue(d.prefix,"PREFIX"),c.setFieldValue(d.localPart,"LOCAL_NAME"),c;d=Blockly.Block.obtain(b,"sparql_iri");d.initSvg();d.setFieldValue(c,"IRI");return d},blockFromBnode_=function(a,b){var c=a.value,d=Blockly.Block.obtain(b,"sparql_prefixed_iri");d.initSvg();d.setFieldValue("_","PREFIX");d.setFieldValue(c,"LOCAL_NAME");return d},blockFromValue_=function(a,b,c){var d=null;if(a)switch(a.type){case "literal":case "typed-literal":d=
blockFromLiteral_(a,b);break;case "uri":d=blockFromUri_(a,b);break;case "bnode":d=blockFromBnode_(a,b)}d&&(d.setDeletable(!1),d.setMovable(!1),d.setEditable(!1),SparqlBlocks.SelfDuplication.bindMouseEvents(d),c.connect(d.outputConnection),d.render())},blocksFromHeaderVar_=function(a,b,c){a=Blockly.Block.obtain(b,"sparql_column");a.initSvg();c.connect(a.outputConnection);a.render();return a},containerBlockFromValue_=function(a,b,c){var d=Blockly.Block.obtain(b,"sparql_value_container");d.initSvg();
c.connect(d.previousConnection);d.render();c=d.getInput("VALUE").connection;blockFromValue_(a,b,c);return d},colBlockFromVar_=function(a,b,c,d){var e=Blockly.Block.obtain(c,"sparql_column");e.initSvg();e.setFieldValue(a,"COLNAME");d.connect(e.outputConnection);e.render();var f=e.getInput("VALUES").connection;b.forEach(function(a){f=containerBlockFromValue_(a,c,f).nextConnection});return e},blocksFromSelectResults_=function(a,b){console.log("data: "+JSON.stringify(b));var c=Blockly.Block.obtain(a,
"sparql_table");c.initSvg();for(var d=b.head.vars,e=b.results.bindings,f=d.length,g=0;g<f;g++){c.appendValueInput("COL"+(g+1)).setCheck("Column");var h=c.getInput("COL"+(g+1)).connection,l=d[g];colBlockFromVar_(l,e.map(function(a){return a[l]}),a,h)}c.resultsData=b;return c};SparqlBlocks.Output.blocksFromSelectResults=blocksFromSelectResults_;
var fillTableFromSelectResults_=function(a,b){var c=b.head.vars,d=getTableHeaders(c);a.append(d);d=b.results.bindings;for(rowIdx in d)a.append(getTableRow(c,d[rowIdx]))};SparqlBlocks.Sparql=new Blockly.Generator("Sparql");SparqlBlocks.Sparql.addReservedWords("");SparqlBlocks.Sparql.STMNT_BRK="###\n";SparqlBlocks.Sparql.STMNT_BRK_RE=/###\n/;SparqlBlocks.Sparql.stmJoin=function(a,b){var c=a.split(SparqlBlocks.Sparql.STMNT_BRK_RE);c.pop();return c.join(b)};SparqlBlocks.Sparql.ORDER_ATOMIC=0;SparqlBlocks.Sparql.ORDER_MEMBER=1;SparqlBlocks.Sparql.ORDER_NEW=1;SparqlBlocks.Sparql.ORDER_FUNCTION_CALL=2;SparqlBlocks.Sparql.ORDER_INCREMENT=3;
SparqlBlocks.Sparql.ORDER_DECREMENT=3;SparqlBlocks.Sparql.ORDER_LOGICAL_NOT=4;SparqlBlocks.Sparql.ORDER_BITWISE_NOT=4;SparqlBlocks.Sparql.ORDER_UNARY_PLUS=4;SparqlBlocks.Sparql.ORDER_UNARY_NEGATION=4;SparqlBlocks.Sparql.ORDER_TYPEOF=4;SparqlBlocks.Sparql.ORDER_VOID=4;SparqlBlocks.Sparql.ORDER_DELETE=4;SparqlBlocks.Sparql.ORDER_MULTIPLICATION=5;SparqlBlocks.Sparql.ORDER_DIVISION=5;SparqlBlocks.Sparql.ORDER_MODULUS=5;SparqlBlocks.Sparql.ORDER_ADDITION=6;SparqlBlocks.Sparql.ORDER_SUBTRACTION=6;
SparqlBlocks.Sparql.ORDER_BITWISE_SHIFT=7;SparqlBlocks.Sparql.ORDER_RELATIONAL=8;SparqlBlocks.Sparql.ORDER_IN=8;SparqlBlocks.Sparql.ORDER_INSTANCEOF=8;SparqlBlocks.Sparql.ORDER_EQUALITY=9;SparqlBlocks.Sparql.ORDER_BITWISE_AND=10;SparqlBlocks.Sparql.ORDER_BITWISE_XOR=11;SparqlBlocks.Sparql.ORDER_BITWISE_OR=12;SparqlBlocks.Sparql.ORDER_LOGICAL_AND=13;SparqlBlocks.Sparql.ORDER_LOGICAL_OR=14;SparqlBlocks.Sparql.ORDER_CONDITIONAL=15;SparqlBlocks.Sparql.ORDER_ASSIGNMENT=16;
SparqlBlocks.Sparql.ORDER_COMMA=17;SparqlBlocks.Sparql.ORDER_NONE=99;SparqlBlocks.Sparql.init=function(a){};SparqlBlocks.Sparql.finish=function(a){return a};SparqlBlocks.Sparql.scrubNakedValue=function(a){return a+";\n"};SparqlBlocks.Sparql.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};
SparqlBlocks.Sparql.scrub_=function(a,b){var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var d=a.getCommentText();d&&(c+=SparqlBlocks.Sparql.prefixLines(d,"// ")+"\n");for(var e=0;e<a.inputList.length;e++)a.inputList[e].type==Blockly.INPUT_VALUE&&(d=a.inputList[e].connection.targetBlock())&&(d=SparqlBlocks.Sparql.allNestedComments(d))&&(c+=SparqlBlocks.Sparql.prefixLines(d,"// "))}e=a.nextConnection&&a.nextConnection.targetBlock();e=SparqlBlocks.Sparql.blockToCode(e);return c+
b+e};/*


 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
SparqlBlocks.Exec={};var defaultEndpointUrl_="http://live.dbpedia.org/sparql",sparqlExec_=function(a,b,c){a||(a=defaultEndpointUrl_);a=a+"?query="+encodeURIComponent(b);return $.ajax({headers:{Accept:"application/sparql-results+json"},dataType:"json",method:"GET",url:a,success:function(a){c(null,a)},error:function(a,b,f){c({jqXHR:a,textStatus:b,errorThrown:f})}})},sparqlExecAndAlert_=function(a,b){return sparqlExec_(a,b,function(a,b){a?alert("Error: "+a):alert("Results:\n"+JSON.stringify(b))})};
SparqlBlocks.Exec.sparqlExecAndAlert=sparqlExecAndAlert_;
var sparqlExecAndBlock_=function(a,b,c,d){},connect_=function(a,b){var c=a.targetBlock();c&&c.dispose();a.connect(b.previousConnection);b.render()},DESCR_LENGTH=40,sparqlExecAndPublish_=function(a,b,c,d,e){var f=Blockly.Block.obtain(c,"sparql_execution_in_progress");f.initSvg();connect_(d,f);return sparqlExec_(a,b,function(a,b){var f=null;if(a){f=Blockly.Block.obtain(c,"sparql_execution_error");f.initSvg();var k=a.textStatus?a.textStatus:"unknown problem";a.jqXHR.status&&(k+=" "+a.jqXHR.status);a.jqXHR.statusText&&
(k+=": "+a.jqXHR.statusText);f.setFieldValue(k,"ERRORTYPE");if(k=a.jqXHR.responseText){var m=null,m=k.length>DESCR_LENGTH?k.substr(0,DESCR_LENGTH-3)+"...":k;f.setFieldValue(m,"ERRORDESCR");f.setTooltip(k)}}else f=SparqlBlocks.Output.blocksFromSelectResults(c,b);connect_(d,f);e(b)})};SparqlBlocks.Exec.sparqlExecAndPublish=sparqlExecAndPublish_;
SparqlBlocks.Exec.blockExec=function(a){var b=a.getInput("RESULTS");if(b&&(b=b.connection)){var c=a.getFieldValue("ENDPOINT"),c=c?encodeURI(c):null,d=SparqlBlocks.Sparql.valueToCode(a,"QUERY",SparqlBlocks.Sparql.ORDER_NONE);if(c!=a.endpointUri||d!=a.sparqlQueryStr)a.endpointUri=c,a.sparqlQueryStr=d,a.queryReq&&a.queryReq.abort(),d?(console.log("Ready to execute query: "+d),a.resultsData=null,a.queryReq=SparqlBlocks.Exec.sparqlExecAndPublish(c,d,a.workspace,b,function(b){a.queryReq=null;a.resultsData=
b})):(console.log("Empty query"),a.resultsData=null,unconnect_(b),a.queryReq=null)}};SparqlBlocks.Types={};var typeDict=SparqlBlocks.Types.dict={},setType=function(a,b){typeDict[a]=b;b.children=[];if(null!=b.parents)for(var c=b.parents,d=0;d<c.length;d++){var e=c[d];typeDict[e]&&typeDict[e].children.push(a)}},getExtension=function(a){var b=typeDict[a];if(!b.extension){a=[a];b.aliases&&(a=a.concat(b.aliases));for(var c=b.children,d=0;d<c.length;d++)a=a.concat(getExtension(c[d]));b.extension=a}return b.extension};setType("TriplesBlock",{});setType("PropertyList",{});
setType("Expr",{});setType("GraphTermOrVar",{parents:["Expr"]});setType("Verb",{});setType("ResourceOrVar",{parents:["GraphTermOrVar","Verb"]});setType("StringExpr",{parents:["Expr"],aliases:["String"]});setType("NumberExpr",{parents:["Expr"],aliases:["Number"]});setType("BooleanExpr",{parents:["Expr"],aliases:["Boolean"]});setType("BnodeExpr",{parents:["Expr"]});setType("IriExpr",{parents:["Expr"]});setType("AnyExpr",{parents:["StringExpr","NumberExpr","BooleanExpr","BnodeExpr","IriExpr"]});
setType("Var",{parents:["GraphTermOrVar","ResourceOrVar","AnyExpr"]});setType("GraphTerm",{parents:["GraphTermOrVar"]});setType("Resource",{parents:["GraphTerm","ResourceOrVar"]});setType("Bnode",{parents:["Resource","BnodeExpr"]});setType("Iri",{parents:["Resource","IriExpr"]});setType("Literal",{parents:["GraphTerm"]});setType("LiteralString",{parents:["Literal","StringExpr"]});setType("LiteralNumber",{parents:["Literal","NumberExpr"]});setType("LiteralBoolean",{parents:["Literal","BooleanExpr"]});
SparqlBlocks.Types.setType=setType;SparqlBlocks.Types.getExtension=getExtension;SparqlBlocks.Blocks={};SparqlBlocks.Blocks.block=function(a,b){b.customContextMenu=function(a){return function(b){a&&a.call(this,b)}}(b.customContextMenu);b.init=function(a){return function(){a.call(this)}}(b.init);Blockly.Blocks[a]=b};SparqlBlocks.Blocks.insertOptionBeforeHelp=function(a,b){var c=a.pop(),d=c&&"Help"==c.text;!d&&c&&a.push(c);a.push(b);d&&a.push(c)};SparqlBlocks.Blocks.bgp={};var typeExt=SparqlBlocks.Types.getExtension,_init=function(a){a.setHelpUrl("http://www.w3.org/TR/sparql11-query/#QSynTriples")},_initVerb=function(a){_init(a);a.setColour(65)},_initSubject=function(a){_init(a);a.setColour(120)},_varsInScopeFromInput=function(a,b){if(a.getInputConnection(b)){var c=b.targetBlock;if(c&&(c=c.varsInScope()))return c}return[]};
SparqlBlocks.Blocks.block("sparql_verb_objectlist",{init:function(){_initVerb(this);this.appendValueInput("VERB").setCheck(typeExt("Verb"));this.appendStatementInput("OBJECT").setCheck("ObjectList").appendField("\u21b3");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")},getVarsInScope:function(){return _.union(_varsInScopeFromInput(this,"VERB"),_varsInScopeFromInput(this,"OBJECT"))}});
SparqlBlocks.Blocks.block("sparql_verb_object",{init:function(){_initVerb(this);this.appendValueInput("VERB").setCheck(typeExt("Verb")).appendField("\u2501\u252b");this.appendValueInput("OBJECT").setCheck(typeExt("GraphTermOrVar")).appendField("\u2523\u2501\u25b6");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_reverseVerb_object",{init:function(){_initVerb(this);this.appendValueInput("VERB").setCheck(typeExt("Verb")).appendField("\u25c0\u2501\u252b");this.appendValueInput("OBJECT").setCheck(typeExt("GraphTermOrVar")).appendField("\u2523\u2501");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_isa",{init:function(){_initVerb(this);this.appendValueInput("TYPE").setCheck(typeExt("ResourceOrVar")).appendField("is a");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_subject_propertylist",{init:function(){_initSubject(this);this.appendValueInput("SUBJECT").setCheck(typeExt("ResourceOrVar"));this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("  \u230a");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_typedsubject_propertylist",{init:function(){_initSubject(this);this.appendValueInput("SUBJECT").setCheck(typeExt("ResourceOrVar"));this.appendValueInput("TYPE").setCheck(typeExt("ResourceOrVar")).appendField("is a");this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("  &");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_anonsubject_propertylist",{init:function(){_initSubject(this);this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("s.t.");this.setInputsInline(!0);this.setOutput(!0,"Resource");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_subject_verb_objectlist",{init:function(){_initSubject(this);this.appendValueInput("SUBJECT").setCheck(typeExt("ResourceOrVar"));this.appendValueInput("VERB").appendField("has").setCheck(typeExt("Verb"));this.appendStatementInput("OBJECT_LIST").setCheck("ObjectList").appendField("\u21b3");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_subject_verb_object",{init:function(){_initSubject(this);this.appendValueInput("SUBJECT").setCheck(typeExt("ResourceOrVar"));this.appendValueInput("VERB").appendField("has").setCheck(typeExt("Verb"));this.appendValueInput("OBJECT").setCheck(typeExt("GraphTermOrVar")).appendField("\u2192");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.control={};typeExt=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_filter",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#scopeFilters");this.setColour(210);this.appendValueInput("CONDITION").setCheck(typeExt("BooleanExpr")).appendField("provided that");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_union",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#alternatives");this.setColour(260);this.appendStatementInput("OP1").setCheck("TriplesBlock");this.appendStatementInput("OP2").setCheck("TriplesBlock").appendField("or");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_optional",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#optionals");this.setColour(260);this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("optionally");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.exec={};
var typeExt=SparqlBlocks.Types.getExtension,unconnect_=function(a){(a=a.targetBlock())&&a.dispose()},dbFile="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAH8SURBVHjaYvz//z8DJQAggFiQOXv37mUHGugHxJH//v3TANKqQAxk/rsCpO8A6blAvDcgIOAvTA9AADHCXADUrAVkLxcVFdWTkJBg4ObmZuDi4mIAyX/8+JHh8+fPDI8ePWJ4/fr1EaBYRHBw8FOQPoAAAisA4V27du1/+PAhyLr/uMDv37//nz9//v/KlSsXwvQBBBATzClAjra4uDhBP0tLSzMALfGE8QECCB4GQEGwiS9fvmTg4OBgYGdnZ2BlZQWLffv2jeHdu3cMT58+ZVBWVgarhQGAAMIwgIWFheH9+/cMP378APP//PnD8OnTJ4afP3+C5UBiyAYABBALkhfAmJmZGewCkGIQBvobbAgssEGa//6FRwIDQABhuACkGKaJkZERrBgmxsTEhOECgADCMACmAYRBrgHxQZpBGMSHqYEBgADCMACmGKQIZgDMBTBvgtgwABBAKAaAMMx2mIHILoOp+/XrF9wAgACCpwOQAlBUAVMiOAqRASgsJCUlGYyNjRmePXuG4gKAAEJ2QcLx48dXaWpqcsvLy4MNAWkE2Q7SDErKV65cYbhw4cILoAv9YPoAAogROTcuWbJEEWhQDRAHA0OcH5QXQN4BuQyYLkAaFwNd2lNZWfkKpgcggBhxZedZs2bxAjWoAPE/oJNvFBcX/8SmDiDAAO2Un30ZkCt9AAAAAElFTkSuQmCC",defaultEndpoint=
"http://live.dbpedia.org/sparql",execBlock=function(a){return{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation");this.setColour(330);a&&a.endpointField&&this.appendDummyInput().appendField(new Blockly.FieldImage(dbFile,16,16,"Endpoint")).appendField(new Blockly.FieldTextInput(defaultEndpoint),"ENDPOINT");this.appendStatementInput("QUERY").setCheck("Select").appendField(" \u2699");this.appendStatementInput("RESULTS").setCheck("Table").appendField("\u21aa");
this.setTooltip("")},onchange:function(){SparqlBlocks.Exec.blockExec(this)},customContextMenu:function(a){if(this.sparqlQueryStr){var c=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Query as SPARQL",enabled:!0,callback:function(){var a=new Blob([c.sparqlQueryStr],{type:"application/sparql-query"});saveAs(a,"query.rq")}})}this.resultsData&&(c=this,SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Results as JSON",enabled:!0,callback:function(){var a=JSON.stringify(c.resultsData);
a&&(a=new Blob([a],{type:"application/sparql-results+json"}),saveAs(a,"results.json"))}}))}}};SparqlBlocks.Blocks.block("sparql_execution",execBlock());SparqlBlocks.Blocks.block("sparql_execution_endpoint",execBlock({endpointField:!0}));
SparqlBlocks.Blocks.block("sparql_execution_in_progress",{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation");this.setColour(330);this.appendDummyInput().appendField("execution in progress...");this.setPreviousStatement(!0,"Table");this.setTooltip("");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1)}});
SparqlBlocks.Blocks.block("sparql_execution_error",{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-failure");this.setColour(330);this.appendDummyInput().appendField("Error executing query!");this.appendDummyInput().appendField("Error Name").appendField(new Blockly.FieldTextInput("ERROR TYPE"),"ERRORTYPE");this.appendDummyInput().appendField("Description").appendField(new Blockly.FieldTextInput("ERROR"),"ERRORDESCR");this.setPreviousStatement(!0,"Table");
this.setTooltip("");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1)}});SparqlBlocks.Blocks.logic={};var typeExt=SparqlBlocks.Types.getExtension,typeContentExt=function(a){return typeExt("Var"==a?"Expr":a)};SparqlBlocks.Blocks.logic.HUE=210;
SparqlBlocks.Blocks.block("sparql_logic_compare",{init:function(){var a=this.RTL?[["=","EQ"],["\u2260","NEQ"],[">","LT"],["\u2265","LTE"],["<","GT"],["\u2264","GTE"]]:[["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"]];this.setHelpUrl(Blockly.Msg.LOGIC_COMPARE_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("A");this.appendValueInput("B").appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);
var b=this;this.setTooltip(function(){var a=b.getFieldValue("OP");return{EQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ,NEQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ,LT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT,LTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE,GT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT,GTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE}[a]});this.prevBlocks_=[null,null]},onchange:function(){if(this.workspace){var a=this.getInputTargetBlock("A"),b=this.getInputTargetBlock("B");if(a&&b&&!a.outputConnection.checkType_(b.outputConnection)&&
0==_.intersection(typeContentExt(a.outputConnection.check_),typeContentExt(b.outputConnection.check_)).length)for(var c=0;c<this.prevBlocks_.length;c++){var d=this.prevBlocks_[c];if(d===a||d===b)d.setParent(null),d.bumpNeighbours_()}this.prevBlocks_[0]=a;this.prevBlocks_[1]=b}}});
SparqlBlocks.Blocks.block("sparql_logic_operation",{init:function(){var a=[[Blockly.Msg.LOGIC_OPERATION_AND,"AND"],[Blockly.Msg.LOGIC_OPERATION_OR,"OR"]];this.setHelpUrl(Blockly.Msg.LOGIC_OPERATION_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("A").setCheck(typeExt("BooleanExpr"));this.appendValueInput("B").setCheck(typeExt("BooleanExpr")).appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);var b=this;this.setTooltip(function(){var a=
b.getFieldValue("OP");return{AND:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND,OR:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR}[a]})}});SparqlBlocks.Blocks.block("sparql_logic_negate",{init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NEGATE_TITLE,args0:[{type:"input_value",name:"BOOL",check:typeExt("BooleanExpr")}],output:"BooleanExpr",colour:SparqlBlocks.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_NEGATE_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NEGATE_HELPURL})}});
SparqlBlocks.Blocks.block("sparql_logic_boolean",{init:function(){var a=[[Blockly.Msg.LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.Msg.LOGIC_BOOLEAN_FALSE,"FALSE"]];this.setHelpUrl(Blockly.Msg.LOGIC_BOOLEAN_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"LiteralBoolean");this.appendDummyInput().appendField(new Blockly.FieldDropdown(a),"BOOL");this.setTooltip(Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP)}});
SparqlBlocks.Blocks.block("sparql_logic_null",{init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_NULL_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0);this.appendDummyInput().appendField(Blockly.Msg.LOGIC_NULL);this.setTooltip(Blockly.Msg.LOGIC_NULL_TOOLTIP)}});
SparqlBlocks.Blocks.block("sparql_logic_ternary",{init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_TERNARY_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.appendValueInput("IF").setCheck(typeExt("BooleanExpr")).appendField(Blockly.Msg.LOGIC_TERNARY_CONDITION);this.appendValueInput("THEN").appendField(Blockly.Msg.LOGIC_TERNARY_IF_TRUE);this.appendValueInput("ELSE").appendField(Blockly.Msg.LOGIC_TERNARY_IF_FALSE);this.setOutput(!0,"Expr");this.setTooltip(Blockly.Msg.LOGIC_TERNARY_TOOLTIP);
this.prevParentConnection_=null},onchange:function(){if(this.workspace){var a=this.getInputTargetBlock("THEN"),b=this.getInputTargetBlock("ELSE"),c=this.outputConnection.targetConnection;if((a||b)&&c)for(var d=0;2>d;d++){var e=1==d?a:b;e&&!e.outputConnection.checkType_(c)&&(c===this.prevParentConnection_?(this.setParent(null),c.sourceBlock_.bumpNeighbours_()):(e.setParent(null),e.bumpNeighbours_()))}this.prevParentConnection_=c}}});
SparqlBlocks.Blocks.block("sparql_exists",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#neg-exists");this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("exists");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_not_exists",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#neg-notexists");this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("not exists");this.setTooltip("")}});SparqlBlocks.Blocks.main={};typeExt=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_construct",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#construct");this.setColour(290);this.appendDummyInput().appendField("CONSTRUCT");this.appendStatementInput("CONSTRUCT").setCheck("ConstructTriples");this.appendDummyInput().appendField("WHERE");this.appendStatementInput("WHERE").setCheck("TriplesBlock");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_select",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#select");this.setColour(290);this.appendDummyInput().appendField("select all the variables");this.appendStatementInput("WHERE").setCheck("TriplesBlock").appendField("where");this.appendValueInput("ORDER_FIELD1").setCheck(typeExt("Expr")).appendField("order by").appendField(new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]),"ORDER_DIRECTION1");this.appendValueInput("ORDER_FIELD2").setCheck(typeExt("Expr")).appendField(", then by").appendField(new Blockly.FieldDropdown([["\u2193",
"ASC"],["\u2191","DESC"]]),"ORDER_DIRECTION2");this.appendDummyInput().appendField("& limit to first").appendField(new Blockly.FieldTextInput("10"),"LIMIT").appendField("rows");this.setInputsInline(!0);this.setPreviousStatement(!0,"Select");this.setTooltip("")},saveQueryAsSparql:function(){var a=SparqlBlocks.Sparql.blockToCode(this);a&&(a=new Blob([a],{type:"application/sparql-query"}),saveAs(a,"query.rq"))},customContextMenu:function(a){var b=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Query as SPARQL",
enabled:!0,callback:function(){b.saveQueryAsSparql()}})}});SparqlBlocks.Blocks.block("sparql_var_binding",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#selectExpressions");this.setColour(330);this.appendValueInput("EXPR").setCheck(typeExt("Expr"));this.appendDummyInput().appendField("as").appendField(new Blockly.FieldTextInput("col name"),"COLNAME");this.setInputsInline(!0);this.setPreviousStatement(!0,"VarBindings");this.setNextStatement(!0,"VarBindings");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_prefixed_iri",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#prefNames");this.setColour(20);this.appendDummyInput().appendField(new Blockly.FieldTextInput("prefix"),"PREFIX").appendField(":").appendField(new Blockly.FieldTextInput("localName"),"LOCAL_NAME");this.setInputsInline(!0);this.setOutput(!0,"Iri");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_iri",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#QSynIRI");this.setColour(20);this.appendDummyInput().appendField("<").appendField(new Blockly.FieldTextInput("iri"),"IRI").appendField(">");this.setInputsInline(!0);this.setOutput(!0,"Iri");this.setTooltip("")}});SparqlBlocks.Blocks.math={};typeExt=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.math.HUE=230;SparqlBlocks.Blocks.block("sparql_math_number",{init:function(){this.setHelpUrl(Blockly.Msg.MATH_NUMBER_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"NUM");this.setOutput(!0,"LiteralNumber");this.setTooltip(Blockly.Msg.MATH_NUMBER_TOOLTIP)}});
SparqlBlocks.Blocks.block("sparql_math_arithmetic",{init:function(){var a=[[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"]];this.setHelpUrl(Blockly.Msg.MATH_ARITHMETIC_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("A").setCheck(typeExt("NumberExpr"));this.appendValueInput("B").setCheck(typeExt("NumberExpr")).appendField(new Blockly.FieldDropdown(a),
"OP");this.setInputsInline(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("OP");return{ADD:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,MINUS:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,MULTIPLY:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,DIVIDE:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE}[a]})}});
SparqlBlocks.Blocks.block("sparql_math_single",{init:function(){var a=[[Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE,"ABS"],["-","NEG"]];this.setHelpUrl(Blockly.Msg.MATH_SINGLE_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("NUM").setCheck(typeExt("NumberExpr")).appendField(new Blockly.FieldDropdown(a),"OP");var b=this;this.setTooltip(function(){var a=b.getFieldValue("OP");return{ABS:Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS,NEG:Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG}[a]})}});
SparqlBlocks.Blocks.block("sparql_math_number_property",{init:function(){var a=[[Blockly.Msg.MATH_IS_EVEN,"EVEN"],[Blockly.Msg.MATH_IS_ODD,"ODD"],[Blockly.Msg.MATH_IS_PRIME,"PRIME"],[Blockly.Msg.MATH_IS_WHOLE,"WHOLE"],[Blockly.Msg.MATH_IS_POSITIVE,"POSITIVE"],[Blockly.Msg.MATH_IS_NEGATIVE,"NEGATIVE"],[Blockly.Msg.MATH_IS_DIVISIBLE_BY,"DIVISIBLE_BY"]];this.setColour(SparqlBlocks.Blocks.math.HUE);this.appendValueInput("NUMBER_TO_CHECK").setCheck(typeExt("NumberExpr"));a=new Blockly.FieldDropdown(a,
function(a){this.sourceBlock_.updateShape_("DIVISIBLE_BY"==a)});this.appendDummyInput().appendField(a,"PROPERTY");this.setInputsInline(!0);this.setOutput(!0,"BooleanExpr");this.setTooltip(Blockly.Msg.MATH_IS_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),b="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");a.setAttribute("divisor_input",b);return a},domToMutation:function(a){a="true"==a.getAttribute("divisor_input");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("DIVISOR");
a?b||this.appendValueInput("DIVISOR").setCheck(typeExt("NumberExpr")):b&&this.removeInput("DIVISOR")}});
SparqlBlocks.Blocks.block("sparql_math_round",{init:function(){var a=[[Blockly.Msg.MATH_ROUND_OPERATOR_ROUND,"ROUND"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP,"ROUNDUP"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN,"ROUNDDOWN"]];this.setHelpUrl(Blockly.Msg.MATH_ROUND_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("NUM").setCheck(typeExt("NumberExpr")).appendField(new Blockly.FieldDropdown(a),"OP");this.setTooltip(Blockly.Msg.MATH_ROUND_TOOLTIP)}});
SparqlBlocks.Blocks.block("sparql_math_modulo",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_MODULO_TITLE,args0:[{type:"input_value",name:"DIVIDEND",check:typeExt("NumberExpr")},{type:"input_value",name:"DIVISOR",check:typeExt("NumberExpr")}],inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_MODULO_TOOLTIP,helpUrl:Blockly.Msg.MATH_MODULO_HELPURL})}});
SparqlBlocks.Blocks.block("sparql_math_constrain",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_CONSTRAIN_TITLE,args0:[{type:"input_value",name:"VALUE",check:typeExt("NumberExpr")},{type:"input_value",name:"LOW",check:typeExt("NumberExpr")},{type:"input_value",name:"HIGH",check:typeExt("NumberExpr")}],inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_CONSTRAIN_TOOLTIP,helpUrl:Blockly.Msg.MATH_CONSTRAIN_HELPURL})}});
SparqlBlocks.Blocks.block("sparql_math_random_int",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_RANDOM_INT_TITLE,args0:[{type:"input_value",name:"FROM",check:typeExt("NumberExpr")},{type:"input_value",name:"TO",check:typeExt("NumberExpr")}],inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_RANDOM_INT_TOOLTIP,helpUrl:Blockly.Msg.MATH_RANDOM_INT_HELPURL})}});
SparqlBlocks.Blocks.block("sparql_math_random_float",{init:function(){this.setHelpUrl(Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendDummyInput().appendField(Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM);this.setTooltip(Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP)}});SparqlBlocks.Blocks.tabular={};typeExt=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_column",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#sparqlQueryVariables");this.setColour(330);this.appendDummyInput().appendField(new Blockly.FieldTextInput("colName"),"COLNAME");this.appendStatementInput("VALUES").setCheck("ValueContainer");this.setOutput(!0,"Column");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1);this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_value_container",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#docResultDesc");this.setColour(330);this.appendValueInput("VALUE").setCheck(typeExt("GraphTerm"));this.setInputsInline(!0);this.setPreviousStatement(!0,"ValueContainer");this.setNextStatement(!0,"ValueContainer");this.setDeletable(!1);this.setMovable(!1);this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_table",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#sparqlSolutions");this.setColour(330);this.setInputsInline(!0);this.setPreviousStatement(!0,"Table");this.setDeletable(!1);this.setMovable(!1);this.setTooltip("");this.colCount_=0},mutationToDom:function(){if(!this.colCount_)return null;var a=document.createElement("mutation");this.colCount_&&a.setAttribute("colCount",this.colCount_);return a},domToMutation:function(a){this.colCount_=parseInt(a.getAttribute("colCount"),
10);for(a=1;a<=this.colCount_;a++)this.appendValueInput("COL"+a).setCheck("Column")},decompose:function(a){var b=Blockly.Block.obtain(a,"sparql_table_table");b.initSvg();for(var c=b.getInput("STACK").connection,d=1;d<=this.colCount_;d++){var e=Blockly.Block.obtain(a,"sparql_table_column");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){for(var b=this.colCount_;0<b;b--)this.removeInput("COL"+b);this.colCount_=0;for(a=a.getInputTargetBlock("STACK");a;){switch(a.type){case "sparql_table_column":this.colCount_++;
b=this.appendValueInput("COL"+this.colCount_).setCheck("Column");a.valueConnection_&&b.connection.connect(a.valueConnection_);break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=1;a;){switch(a.type){case "sparql_table_column":var c=this.getInput("COL"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},
customContextMenu:function(a){if(this.resultsData){var b=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Results as JSON",enabled:!0,callback:function(){var a=JSON.stringify(b.resultsData);a&&(a=new Blob([a],{type:"application/sparql-results+json"}),saveAs(a,"results.json"))}})}}});SparqlBlocks.Blocks.block("sparql_table_table",{init:function(){this.setColour(330);this.appendDummyInput().appendField("table");this.appendStatementInput("STACK");this.setTooltip("");this.contextMenu=!1}});
SparqlBlocks.Blocks.block("sparql_table_column",{init:function(){this.setColour(330);this.appendDummyInput().appendField("column");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("");this.contextMenu=!1}});SparqlBlocks.Blocks.text={};typeExt=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.text.HUE=160;
SparqlBlocks.Blocks.block("sparql_text",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1));this.setOutput(!0,"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",12,12,'"')}});
SparqlBlocks.Blocks.block("sparql_text_with_lang",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("@").appendField(new Blockly.FieldTextInput(""),"LANG");this.setOutput(!0,"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==
this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});
SparqlBlocks.Blocks.block("sparql_text_with_type_pref",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("^^").appendField(new Blockly.FieldTextInput("prefix"),"DT_PREFIX").appendField(":").appendField(new Blockly.FieldTextInput("localName"),"DT_LOCAL_NAME");this.setOutput(!0,"LiteralString");
this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});
SparqlBlocks.Blocks.block("sparql_text_with_type_iri",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("^^").appendField("<").appendField(new Blockly.FieldTextInput("iri"),"DT_IRI").appendField(">");this.setOutput(!0,"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==
this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});
SparqlBlocks.Blocks.block("sparql_text_join",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_JOIN_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.itemCount_=2;this.updateShape_();this.setOutput(!0,"StringExpr");this.setMutator(new Blockly.Mutator(["sparql_text_create_join_item"]));this.setTooltip(Blockly.Msg.TEXT_JOIN_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),
10);this.updateShape_()},decompose:function(a){var b=Blockly.Block.obtain(a,"sparql_text_create_join_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.itemCount_;d++){var e=Blockly.Block.obtain(a,"sparql_text_create_join_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){a=a.getInputTargetBlock("STACK");for(var b=[],c=0;a;)b[c]=a.valueConnection_,a=a.nextConnection&&a.nextConnection.targetBlock(),c++;this.itemCount_=c;this.updateShape_();
for(c=0;c<this.itemCount_;c++)b[c]&&this.getInput("ADD"+c).connection.connect(b[c])},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("ADD"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){if(this.getInput("EMPTY"))this.removeInput("EMPTY");else for(var a=0;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++;if(0==this.itemCount_)this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));
else for(a=0;a<this.itemCount_;a++){var b=this.appendValueInput("ADD"+a);0==a&&b.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH)}},newQuote_:Blockly.Blocks.sparql_text.newQuote_});SparqlBlocks.Blocks.block("sparql_text_create_join_container",{init:function(){this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP);this.contextMenu=!1}});
SparqlBlocks.Blocks.block("sparql_text_create_join_item",{init:function(){this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP);this.contextMenu=!1}});
SparqlBlocks.Blocks.block("sparql_text_append",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_APPEND_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").appendField(Blockly.Msg.TEXT_APPEND_TO).appendField(new Blockly.FieldVariable(Blockly.Msg.TEXT_APPEND_VARIABLE),"VAR").appendField(Blockly.Msg.TEXT_APPEND_APPENDTEXT);this.setPreviousStatement(!0);this.setNextStatement(!0);var a=this;this.setTooltip(function(){return Blockly.Msg.TEXT_APPEND_TOOLTIP.replace("%1",
a.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}});SparqlBlocks.Blocks.block("sparql_text_length",{init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:typeExt("StringExpr")}],output:"NumberExpr",colour:SparqlBlocks.Blocks.text.HUE,tooltip:Blockly.Msg.TEXT_LENGTH_TOOLTIP,helpUrl:Blockly.Msg.TEXT_LENGTH_HELPURL})}});
SparqlBlocks.Blocks.block("sparql_text_isEmpty",{init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_ISEMPTY_TITLE,args0:[{type:"input_value",name:"VALUE",check:typeExt("StringExpr")}],output:"BooleanExpr",colour:SparqlBlocks.Blocks.text.HUE,tooltip:Blockly.Msg.TEXT_ISEMPTY_TOOLTIP,helpUrl:Blockly.Msg.TEXT_ISEMPTY_HELPURL})}});
SparqlBlocks.Blocks.block("sparql_text_indexOf",{init:function(){var a=[[Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST,"FIRST"],[Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_INDEXOF_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("VALUE").setCheck(typeExt("StringExpr")).appendField(Blockly.Msg.TEXT_INDEXOF_INPUT_INTEXT);this.appendValueInput("FIND").setCheck(typeExt("StringExpr")).appendField(new Blockly.FieldDropdown(a),
"END");Blockly.Msg.TEXT_INDEXOF_TAIL&&this.appendDummyInput().appendField(Blockly.Msg.TEXT_INDEXOF_TAIL);this.setInputsInline(!0);this.setTooltip(Blockly.Msg.TEXT_INDEXOF_TOOLTIP)}});
SparqlBlocks.Blocks.block("sparql_text_contains",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-contains");this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("FIND").setCheck(typeExt("StringExpr"));this.appendValueInput("VALUE").setCheck(typeExt("StringExpr")).appendField("is contained in");this.setInputsInline(!0);this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_text_lang",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-lang");this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("VALUE").setCheck(typeExt("StringExpr")).appendField("language of");this.appendValueInput("LANG").setCheck(typeExt("StringExpr")).appendField("is");this.setInputsInline(!0);this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_text_charAt",{init:function(){this.WHERE_OPTIONS=[[Blockly.Msg.TEXT_CHARAT_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_CHARAT_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_CHARAT_FIRST,"FIRST"],[Blockly.Msg.TEXT_CHARAT_LAST,"LAST"],[Blockly.Msg.TEXT_CHARAT_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.TEXT_CHARAT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"StringExpr");this.appendValueInput("VALUE").setCheck(typeExt("StringExpr")).appendField(Blockly.Msg.TEXT_CHARAT_INPUT_INTEXT);
this.appendDummyInput("AT");this.setInputsInline(!0);this.updateAt_(!0);this.setTooltip(Blockly.Msg.TEXT_CHARAT_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},domToMutation:function(a){a="false"!=a.getAttribute("at");this.updateAt_(a)},updateAt_:function(a){this.removeInput("AT");this.removeInput("ORDINAL",!0);a?(this.appendValueInput("AT").setCheck(typeExt("NumberExpr")),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&
this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");Blockly.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_CHARAT_TAIL));var b=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(b){var d="FROM_START"==b||"FROM_END"==b;if(d!=a){var e=this.sourceBlock_;e.updateAt_(d);e.setFieldValue(b,"WHERE");return null}});this.getInput("AT").appendField(b,"WHERE")}});
SparqlBlocks.Blocks.block("sparql_text_getSubstring",{init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);
this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("STRING").setCheck("String").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);this.appendDummyInput("AT1");this.appendDummyInput("AT2");Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);this.setInputsInline(!0);this.setOutput(!0,"StringExpr");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var a=
document.createElement("mutation"),b=this.getInput("AT1").type==Blockly.INPUT_VALUE;a.setAttribute("at1",b);b=this.getInput("AT2").type==Blockly.INPUT_VALUE;a.setAttribute("at2",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("at1");a="true"==a.getAttribute("at2");this.updateAt_(1,b);this.updateAt_(2,a)},updateAt_:function(a,b){this.removeInput("AT"+a);this.removeInput("ORDINAL"+a,!0);b?(this.appendValueInput("AT"+a).setCheck(typeExt("NumberExpr")),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&
this.appendDummyInput("ORDINAL"+a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+a);2==a&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));var c=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+a],function(c){var e="FROM_START"==c||"FROM_END"==c;if(e!=b){var f=this.sourceBlock_;f.updateAt_(a,e);f.setFieldValue(c,"WHERE"+a);return null}});this.getInput("AT"+a).appendField(c,
"WHERE"+a);1==a&&this.moveInputBefore("AT1","AT2")}});
SparqlBlocks.Blocks.block("sparql_text_changeCase",{init:function(){var a=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").setCheck(typeExt("StringExpr")).appendField(new Blockly.FieldDropdown(a),"CASE");this.setOutput(!0,"StringExpr");this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}});
SparqlBlocks.Blocks.block("sparql_text_trim",{init:function(){var a=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").setCheck(typeExt("StringExpr")).appendField(new Blockly.FieldDropdown(a),"MODE");this.setOutput(!0,"StringExpr");this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)}});/*

 Visual Blocks Editor

 Copyright 2012 Google Inc.
 https://developers.google.com/blockly/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
SparqlBlocks.Blocks.tuple={};typeExt=SparqlBlocks.Types.getExtension;
SparqlBlocks.Blocks.block("sparql_tuple",{init:function(){this.setHelpUrl(Blockly.Msg.CONTROLS_IF_HELPURL);this.setColour(330);this.appendValueInput("VAL0").setCheck(typeExt("Resource"));this.setPreviousStatement(!0,"Tuple");this.setNextStatement(!0,"Tuple");this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));this.setTooltip("");this.valCount_=0},mutationToDom:function(){if(!this.valCount_)return null;var a=document.createElement("mutation");this.valCount_&&a.setAttribute("valCount",
this.valCount_);return a},domToMutation:function(a){this.valCount_=parseInt(a.getAttribute("valCount"),10);for(a=1;a<=this.valCount_;a++)this.appendValueInput("VAL"+a).setCheck(typeExt("Resource"))},decompose:function(a){var b=Blockly.Block.obtain(a,"sparql_tuple_tuple");b.initSvg();for(var c=b.getInput("STACK").connection,d=1;d<=this.valCount_;d++){var e=Blockly.Block.obtain(a,"sparql_tuple_value");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){for(var b=
this.valCount_;0<b;b--)this.removeInput("VAL"+b);this.valCount_=0;for(a=a.getInputTargetBlock("STACK");a;){switch(a.type){case "col":this.valCount_++;b=this.appendValueInput("VAL"+this.valCount_).setCheck(typeExt("Resource"));a.valueConnection_&&b.connection.connect(a.valueConnection_);break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=1;a;){switch(a.type){case "sparql_tuple_value":var c=
this.getInput("VAL"+b);a.valueConnection_=c&&c.connection.targetConnection;b++;break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}}});SparqlBlocks.Blocks.block("sparql_tuple_tuple",{init:function(){this.setColour(330);this.appendDummyInput().appendField("tuple");this.appendStatementInput("STACK");this.setTooltip("");this.contextMenu=!1}});
SparqlBlocks.Blocks.block("sparql_tuple_value",{init:function(){this.setColour(330);this.appendDummyInput().appendField("value");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("");this.contextMenu=!1}});SparqlBlocks.Blocks.variables={};SparqlBlocks.Blocks.variables.HUE=330;SparqlBlocks.Blocks.block("sparql_variable",{init:function(){this.setHelpUrl(Blockly.Msg.VARIABLES_GET_HELPURL);this.setColour(SparqlBlocks.Blocks.variables.HUE);this.appendDummyInput().appendField(new Blockly.FieldVariable,"VAR");this.setOutput(!0,"Var");this.setTooltip("")},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}});
Blockly.Blocks.variables_get=Blockly.Blocks.sparql_variable;Blockly.Blocks.variables_set=null;SparqlBlocks.Sparql.bgp={};SparqlBlocks.Sparql.bgp.extendVerb_=function(a){return"rdfs:subClassOf"==a||"<http://www.w3.org/2000/01/rdf-schema#subClassOf>"==a?a+"*":a};SparqlBlocks.Sparql.sparql_isa=function(a){return(a=SparqlBlocks.Sparql.valueToCode(a,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC))?"a "+a+SparqlBlocks.Sparql.STMNT_BRK:""};
SparqlBlocks.Sparql.sparql_verb_object=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return b?(a?SparqlBlocks.Sparql.bgp.extendVerb_(b):b)+" "+(a?a:"[]")+SparqlBlocks.Sparql.STMNT_BRK:""};
SparqlBlocks.Sparql.sparql_reverseVerb_object=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return b?"^"+(a?SparqlBlocks.Sparql.bgp.extendVerb_(b):b)+" "+(a?a:"[]")+SparqlBlocks.Sparql.STMNT_BRK:""};
SparqlBlocks.Sparql.sparql_typedsubject_propertylist=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"SUBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC),c=SparqlBlocks.Sparql.valueToCode(a,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"PROPERTY_LIST"),";\n");return c||""!=a?(b?b:"[]")+(c?" a "+c+(""!=a?";":""):"")+(""!=a?"\n"+a:"")+SparqlBlocks.Sparql.STMNT_BRK:""};
SparqlBlocks.Sparql.sparql_subject_propertylist=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"SUBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"PROPERTY_LIST"),";\n");return""!=a?(b?b:"[]")+(""!=a?"\n"+a:"")+SparqlBlocks.Sparql.STMNT_BRK:""};var generateAnonSubject=function(a,b){return[a||""!=b?"[\n"+(a?" a "+a+(""!=b?";\n":""):"")+(""!=b?b:"")+"\n]":"[]",SparqlBlocks.Sparql.ORDER_ATOMIC]};
SparqlBlocks.Sparql.sparql_anontypedsubject_propertylist=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"PROPERTY_LIST"),";\n");return generateAnonSubject(b,a)};SparqlBlocks.Sparql.sparql_anonsubject_propertylist=function(a){a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"PROPERTY_LIST"),";\n");return generateAnonSubject(null,a)};SparqlBlocks.Sparql.control={};SparqlBlocks.Sparql.sparql_filter=function(a){return(a=SparqlBlocks.Sparql.valueToCode(a,"CONDITION",SparqlBlocks.Sparql.ORDER_NONE))?"FILTER("+a+")"+SparqlBlocks.Sparql.STMNT_BRK:""};
SparqlBlocks.Sparql.sparql_union=function(a){var b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"OP1"),".\n");a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"OP2"),".\n");return""==b?""==a?"":"{\n"+a+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:""==a?"{\n"+b+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:"{\n"+b+"\n} UNION {\n"+a+"\n}"+SparqlBlocks.Sparql.STMNT_BRK};
SparqlBlocks.Sparql.sparql_optional=function(a){a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"OP"),".\n");return""==a?"":"OPTIONAL {\n"+a+"\n}"+SparqlBlocks.Sparql.STMNT_BRK};SparqlBlocks.Sparql.logic={};SparqlBlocks.Sparql.sparql_logic_compare=function(a){var b={EQ:"=",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[a.getFieldValue("OP")],c="="==b||"!="==b?SparqlBlocks.Sparql.ORDER_EQUALITY:SparqlBlocks.Sparql.ORDER_RELATIONAL,d=SparqlBlocks.Sparql.valueToCode(a,"A",c)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"B",c)||"0";return[d+" "+b+" "+a,c]};
SparqlBlocks.Sparql.sparql_logic_operation=function(a){var b="AND"==a.getFieldValue("OP")?"&&":"||",c="&&"==b?SparqlBlocks.Sparql.ORDER_LOGICAL_AND:SparqlBlocks.Sparql.ORDER_LOGICAL_OR,d=SparqlBlocks.Sparql.valueToCode(a,"A",c);a=SparqlBlocks.Sparql.valueToCode(a,"B",c);if(d||a){var e="&&"==b?"true":"false";d||(d=e);a||(a=e)}else a=d="false";return[d+" "+b+" "+a,c]};
SparqlBlocks.Sparql.sparql_logic_negate=function(a){var b=SparqlBlocks.Sparql.ORDER_LOGICAL_NOT;return["!"+(SparqlBlocks.Sparql.valueToCode(a,"BOOL",b)||"true"),b]};SparqlBlocks.Sparql.sparql_logic_boolean=function(a){return["TRUE"==a.getFieldValue("BOOL")?"true":"false",SparqlBlocks.Sparql.ORDER_ATOMIC]};
SparqlBlocks.Sparql.sparql_logic_ternary=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"IF",SparqlBlocks.Sparql.ORDER_COMMA)||"false",c=SparqlBlocks.Sparql.valueToCode(a,"THEN",SparqlBlocks.Sparql.ORDER_COMMA)||'""';a=SparqlBlocks.Sparql.valueToCode(a,"ELSE",SparqlBlocks.Sparql.ORDER_COMMA)||'""';return["IF("+b+", "+c+", "+a+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.main={};SparqlBlocks.Sparql.main.VIRTUOSO_PATCH=!0;var localNameEsc=function(a){return a.split("").map(function(a){return _.contains("_~.-!$&'()\\*+,;=/?#@%".split(""),a)?"\\"+a:a}).join("")};
SparqlBlocks.Sparql.sparql_select=function(a){for(var b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"WHERE"),".\n"),c=a.getFieldValue("LIMIT"),b="SELECT DISTINCT * WHERE {\n"+b+"\n}",d=null,e=1;;e++){var f=SparqlBlocks.Sparql.valueToCode(this,"ORDER_FIELD"+e,SparqlBlocks.Sparql.ORDER_NONE);if(f){var g=a.getFieldValue("ORDER_DIRECTION"+e),d=d?d+", ":"ORDER BY ";g&&"DESC"==g&&(d+="DESC");d+="("+f+")"}else break}d&&(b+="\n"+d);c&&(b+="\nLIMIT "+c);a=b.match(/[^(|!/\^,;\x20|\x09|\x0D|\x0A]+[\x20|\x09|\x0D|\x0A]*:/g);
c=null;a&&(c=a.map(function(a){return a.substr(0,a.length-1).trim()}));var h="";c&&c.forEach(function(a){var b=SparqlBlocks.Prefixes.lookForPrefix(a);b&&(h+="PREFIX "+a+":\t<"+b+">\n")});0<h.length&&(b=h+"\n"+b);return[b,SparqlBlocks.Sparql.ORDER_ATOMIC]};
SparqlBlocks.Sparql.sparql_prefixed_iri=function(a){var b=a.getFieldValue("PREFIX");a=a.getFieldValue("LOCAL_NAME");var c=null;if(SparqlBlocks.Sparql.main.VIRTUOSO_PATCH){var d=SparqlBlocks.Prefixes.lookForPrefix(b);d&&(c="<"+d+a+">")}c||(c=b+":"+localNameEsc(a));return[c,SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_iri=function(a){return["<"+a.getFieldValue("IRI")+">",SparqlBlocks.Sparql.ORDER_ATOMIC]};
SparqlBlocks.Sparql.variables_get=function(a){return["?"+a.getFieldValue("VAR"),SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.math={};SparqlBlocks.Sparql.sparql_math_number=function(a){a=a.getFieldValue("NUM");var b=""+parseInt(a);if(a==b)return[a,SparqlBlocks.Sparql.ORDER_ATOMIC];b=parseFloat(a);if(!isNaN(b))return[""+b,SparqlBlocks.Sparql.ORDER_ATOMIC];throw"Not a number: "+a;};
SparqlBlocks.Sparql.sparql_math_arithmetic=function(a){var b={ADD:[" + ",SparqlBlocks.Sparql.ORDER_ADDITION],MINUS:[" - ",SparqlBlocks.Sparql.ORDER_SUBTRACTION],MULTIPLY:[" * ",SparqlBlocks.Sparql.ORDER_MULTIPLICATION],DIVIDE:[" / ",SparqlBlocks.Sparql.ORDER_DIVISION]}[a.getFieldValue("OP")],c=b[0],b=b[1],d=SparqlBlocks.Sparql.valueToCode(a,"A",b)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"B",b)||"0";return[d+c+a,b]};
SparqlBlocks.Sparql.sparql_math_single=function(a){var b=a.getFieldValue("OP"),c;if("NEG"==b)return a=SparqlBlocks.Sparql.valueToCode(a,"NUM",SparqlBlocks.Sparql.ORDER_UNARY_NEGATION)||"0","-"==a[0]&&(a=" "+a),["-"+a,SparqlBlocks.Sparql.ORDER_UNARY_NEGATION];a=SparqlBlocks.Sparql.valueToCode(a,"NUM",SparqlBlocks.Sparql.ORDER_NONE)||"0";switch(b){case "ABS":c="ABS("+a+")";break;case "ROUND":c="ROUND("+a+")";break;case "ROUNDUP":c="CEIL("+a+")";break;case "ROUNDDOWN":c="FLOOR("+a+")"}if(c)return[c,
SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];throw"Unknown math operator: "+b;};SparqlBlocks.Sparql.isWhole=function(a){return["FLOOR("+a+") = "+a,SparqlBlocks.Sparql.ORDER_EQUALITY]};SparqlBlocks.Sparql.isNotWhole=function(a){return["FLOOR("+a+") != "+a,SparqlBlocks.Sparql.ORDER_EQUALITY]};SparqlBlocks.Sparql.divisible=function(a,b){return SparqlBlocks.Sparql.isWhole(a+" / "+b)[0]};SparqlBlocks.Sparql.notDivisible=function(a,b){return SparqlBlocks.Sparql.isNotWhole(a+" / "+b)[0]};
SparqlBlocks.Sparql.sparql_math_number_property=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"NUMBER_TO_CHECK",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";switch(a.getFieldValue("PROPERTY")){case "EVEN":return SparqlBlocks.Sparql.divisible(b,"2");case "ODD":return SparqlBlocks.Sparql.notDivisible(b,"2");case "WHOLE":return SparqlBlocks.Sparql.isWhole(b);case "POSITIVE":return[b+" > 0",SparqlBlocks.Sparql.ORDER_RELATIONAL];case "NEGATIVE":return[b+" < 0",SparqlBlocks.Sparql.ORDER_RELATIONAL];case "DIVISIBLE_BY":return a=
SparqlBlocks.Sparql.valueToCode(a,"DIVISOR",SparqlBlocks.Sparql.ORDER_MODULUS)||"0",SparqlBlocks.Sparql.divisible(b,a)}};SparqlBlocks.Sparql.sparql_math_round=SparqlBlocks.Sparql.sparql_math_single;SparqlBlocks.Sparql.idivAbs=function(a,b){return["FLOOR(ABS("+a+" / "+b+"))",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.idiv=function(a,b){return[SparqlBlocks.Sparql.idivAbs(a,b)[0]+" * (ABS("+a+") / "+a+") * (ABS("+b+") / "+b+")",SparqlBlocks.Sparql.ORDER_MULTIPLICATION]};
SparqlBlocks.Sparql.modulo=function(a,b){return[a+" - "+SparqlBlocks.Sparql.idivAbs(a,b)[0]+" * ABS("+a+") / "+a+" * ABS("+b+")",SparqlBlocks.Sparql.ORDER_SUBTRACTION]};SparqlBlocks.Sparql.sparql_math_modulo=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"DIVIDEND",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"DIVISOR",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";return SparqlBlocks.Sparql.modulo(b,a)};
SparqlBlocks.Sparql.sparql_math_constrain=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_RELATIONAL)||"0",c=SparqlBlocks.Sparql.valueToCode(a,"LOW",SparqlBlocks.Sparql.ORDER_RELATIONAL);a=SparqlBlocks.Sparql.valueToCode(a,"HIGH",SparqlBlocks.Sparql.ORDER_RELATIONAL);return["IF("+b+" < "+c+", "+c+", IF("+b+" > "+a+", "+a+", "+b+") )",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};
SparqlBlocks.Sparql.sparql_math_random_int=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"FROM",SparqlBlocks.Sparql.ORDER_ADDITION)||"0";return["FLOOR(RAND() * ("+(SparqlBlocks.Sparql.valueToCode(a,"TO",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"0")+" - "+b+" + 1) + "+b+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_math_random_float=function(a){return["RAND()",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.text={};SparqlBlocks.Sparql.sparql_text=function(a){return[SparqlBlocks.Sparql.quote_(a.getFieldValue("TEXT")),SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_text_with_lang=function(a){var b=SparqlBlocks.Sparql.quote_(a.getFieldValue("TEXT"));(a=a.getFieldValue("LANG"))&&0<a.length&&(b+="@"+a);return[b,SparqlBlocks.Sparql.ORDER_ATOMIC]};
SparqlBlocks.Sparql.sparql_text_join=function(a){var b;if(0==a.itemCount_)return["''",SparqlBlocks.Sparql.ORDER_ATOMIC];if(1==a.itemCount_)b=SparqlBlocks.Sparql.valueToCode(a,"ADD0",SparqlBlocks.Sparql.ORDER_NONE)||"''",b="STR("+b+")";else if(2==a.itemCount_)b=SparqlBlocks.Sparql.valueToCode(a,"ADD0",SparqlBlocks.Sparql.ORDER_NONE)||"''",a=SparqlBlocks.Sparql.valueToCode(a,"ADD1",SparqlBlocks.Sparql.ORDER_NONE)||"''",b="CONCAT(STR("+b+"), STR("+a+"))";else{b=Array(a.itemCount_);for(var c=0;c<a.itemCount_;c++)b[c]=
SparqlBlocks.Sparql.valueToCode(a,"ADD"+c,SparqlBlocks.Sparql.ORDER_NONE)||"''";b="CONCAT(STR("+b.join("), STR(")+"))"}return[b,SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_length=function(a){return["STRLEN("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};
SparqlBlocks.Sparql.sparql_text_isEmpty=function(a){return["STRLEN("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+") == 0",SparqlBlocks.Sparql.ORDER_EQUALITY]};SparqlBlocks.Sparql.sparql_text_contains=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"FIND",SparqlBlocks.Sparql.ORDER_COMMA)||"''";return["CONTAINS("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_COMMA)||"''")+", "+b+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};
SparqlBlocks.Sparql.sparql_text_lang=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"LANG",SparqlBlocks.Sparql.ORDER_COMMA)||"''";return["LANGMATCHES(LANG("+(SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+"), "+b+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};
SparqlBlocks.Sparql.sparql_text_charAt=function(a){var b=a.getFieldValue("WHERE")||"FROM_START",c=SparqlBlocks.Sparql.valueToCode(a,"AT",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"1";a=SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_COMMA)||"''";switch(b){case "FIRST":return["SUBSTR("+a+", 1, 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "LAST":return["SUBSTR("+a+", STRLEN("+a+"), 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "FROM_START":return["SUBSTR("+a+", "+c+", 1)",
SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "FROM_END":return["SUBSTR("+a+", STRLEN("+a+") + 1 - "+c+", 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}throw"Unhandled option (text_charAt).";};
SparqlBlocks.Sparql.sparql_text_getSubstring=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"STRING",SparqlBlocks.Sparql.ORDER_COMMA)||"''",c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2"),e=SparqlBlocks.Sparql.valueToCode(a,"AT1",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"1";a=SparqlBlocks.Sparql.valueToCode(a,"AT2",SparqlBlocks.Sparql.ORDER_ADDITION)||"1";if("FIRST"!=c||"LAST"!=d){if("FIRST"==c)c="1";else if("LAST"==c)c="STRLEN("+b+")";else if("FROM_START"==c)c=e;else if("FROM_END"==c)c=
"STRLEN("+b+") + 1 - "+e;else throw"Unhandled option (text_getSubstring): "+c;if("FIRST"==d)d="2 - "+c;else if("LAST"==d)d=null;else if("FROM_START"==d)d=a+" + 1 - "+c;else if("FROM_END"==d)d="STRLEN("+b+") + 2 - "+a+" - "+c;else throw"Unhandled option (text_getSubstring): "+d;return[d?"SUBSTR("+b+", "+c+", "+d+")":"SUBSTR("+b+", "+c+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}};
SparqlBlocks.Sparql.sparql_text_changeCase=function(a){var b=a.getFieldValue("CASE"),c={UPPERCASE:"UCASE",LOWERCASE:"LCASE"}[b];if(c)return a=SparqlBlocks.Sparql.valueToCode(a,"TEXT",SparqlBlocks.Sparql.ORDER_NONE)||"''",[c+"("+a+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];throw"Unknown case type: "+b;};