// Do not edit this file; automatically generated by build.py.
'use strict';

var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(b){return void 0!==b};goog.exportPath_=function(b,a,c){b=b.split(".");c=c||goog.global;b[0]in c||!c.execScript||c.execScript("var "+b[0]);for(var d;b.length&&(d=b.shift());)!b.length&&goog.isDef(a)?c[d]=a:c=c[d]?c[d]:c[d]={}};
goog.define=function(b,a){var c=a;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,b)?c=goog.global.CLOSURE_UNCOMPILED_DEFINES[b]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,b)&&(c=goog.global.CLOSURE_DEFINES[b]));goog.exportPath_(b,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;
goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(b){if(!COMPILED&&goog.isProvided_(b))throw Error('Namespace "'+b+'" already declared.');goog.constructNamespace_(b)};goog.constructNamespace_=function(b,a){if(!COMPILED){delete goog.implicitNamespaces_[b];for(var c=b;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(b,a)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(b){if(!goog.isString(b)||!b||-1==b.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+b+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=b;if(!COMPILED){if(goog.isProvided_(b))throw Error('Namespace "'+b+'" already declared.');delete goog.implicitNamespaces_[b]}};goog.module.get=function(b){return goog.module.getInternal_(b)};
goog.module.getInternal_=function(b){if(!COMPILED)return goog.isProvided_(b)?b in goog.loadedModules_?goog.loadedModules_[b]:goog.getObjectByName(b):null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.setTestOnly=function(b){if(goog.DISALLOW_TEST_ONLY_CODE)throw b=b||"",Error("Importing test-only code into non-debug environment"+(b?": "+b:"."));};goog.forwardDeclare=function(b){};COMPILED||(goog.isProvided_=function(b){return b in goog.loadedModules_||!goog.implicitNamespaces_[b]&&goog.isDefAndNotNull(goog.getObjectByName(b))},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(b,a){for(var c=b.split("."),d=a||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(b,a){var c=a||goog.global,d;for(d in b)c[d]=b[d]};goog.addDependency=function(b,a,c,d){if(goog.DEPENDENCIES_ENABLED){var e;b=b.replace(/\\/g,"/");for(var f=goog.dependencies_,g=0;e=a[g];g++)f.nameToPath[e]=b,f.pathIsModule[b]=!!d;for(d=0;a=c[d];d++)b in f.requires||(f.requires[b]={}),f.requires[b][a]=!0}};
goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(b){goog.global.console&&goog.global.console.error(b)};goog.require=function(b){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(b);if(goog.isProvided_(b))return goog.isInModuleLoader_()?goog.module.getInternal_(b):null;if(goog.ENABLE_DEBUG_LOADER){var a=goog.getPathFromDeps_(b);if(a)return goog.writeScripts_(a),null}b="goog.require could not find: "+b;goog.logToConsole_(b);throw Error(b);}};
goog.basePath="";goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(b){b.getInstance=function(){if(b.instance_)return b.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=b);return b.instance_=new b}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var b=goog.global.document;return"undefined"!=typeof b&&"write"in b},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var b=goog.global.document.getElementsByTagName("SCRIPT"),a=b.length-1;0<=a;--a){var c=b[a].src,d=c.lastIndexOf("?"),d=-1==
d?c.length:d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(b,a){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(b,a)&&(goog.dependencies_.written[b]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(b){goog.importScript_("",'goog.retrieveAndExecModule_("'+b+'");')&&(goog.dependencies_.written[b]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(b,a){return goog.LOAD_MODULE_USING_EVAL&&
goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(a+"\n//# sourceURL="+b+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+a+"\n;return exports});\n//# sourceURL="+b+"\n"},goog.loadQueuedModules_=function(){var b=goog.queuedModules_.length;if(0<b){var a=goog.queuedModules_;goog.queuedModules_=[];for(var c=0;c<b;c++)goog.maybeProcessDeferredPath_(a[c])}},goog.maybeProcessDeferredDep_=function(b){goog.isDeferredModule_(b)&&goog.allDepsAreAvailable_(b)&&(b=goog.getPathFromDeps_(b),
goog.maybeProcessDeferredPath_(goog.basePath+b))},goog.isDeferredModule_=function(b){return(b=goog.getPathFromDeps_(b))&&goog.dependencies_.pathIsModule[b]?goog.basePath+b in goog.dependencies_.deferred:!1},goog.allDepsAreAvailable_=function(b){if((b=goog.getPathFromDeps_(b))&&b in goog.dependencies_.requires)for(var a in goog.dependencies_.requires[b])if(!goog.isProvided_(a)&&!goog.isDeferredModule_(a))return!1;return!0},goog.maybeProcessDeferredPath_=function(b){if(b in goog.dependencies_.deferred){var a=
goog.dependencies_.deferred[b];delete goog.dependencies_.deferred[b];goog.globalEval(a)}},goog.loadModule=function(b){var a=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0};var c;if(goog.isFunction(b))c=b.call(goog.global,{});else if(goog.isString(b))c=goog.loadModuleFromSource_.call(goog.global,b);else throw Error("Invalid module definition");var d=goog.moduleLoaderState_.moduleName;if(!goog.isString(d)||!d)throw Error('Invalid module name "'+d+'"');goog.moduleLoaderState_.declareLegacyNamespace?
goog.constructNamespace_(d,c):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(c);goog.loadedModules_[d]=c}finally{goog.moduleLoaderState_=a}},goog.loadModuleFromSource_=function(b){eval(b);return{}},goog.writeScriptSrcNode_=function(b){goog.global.document.write('<script type="text/javascript" src="'+b+'">\x3c/script>')},goog.appendScriptSrcNode_=function(b){var a=goog.global.document,c=a.createElement("script");c.type="text/javascript";c.src=b;c.defer=!1;c.async=!1;a.head.appendChild(c)},goog.writeScriptTag_=
function(b,a){if(goog.inHtmlDocument_()){var c=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==c.readyState){if(/\bdeps.js$/.test(b))return!1;throw Error('Cannot write "'+b+'" after document load');}var d=goog.IS_OLD_IE_;void 0===a?d?(d=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",c.write('<script type="text/javascript" src="'+b+'"'+d+">\x3c/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(b):
goog.writeScriptSrcNode_(b):c.write('<script type="text/javascript">'+a+"\x3c/script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(b,a){"complete"==b.readyState&&goog.lastNonModuleScriptIndex_==a&&goog.loadQueuedModules_();return!0},goog.writeScripts_=function(b){function a(b){if(!(b in e.written||b in e.visited)){e.visited[b]=!0;if(b in e.requires)for(var f in e.requires[b])if(!goog.isProvided_(f))if(f in e.nameToPath)a(e.nameToPath[f]);else throw Error("Undefined nameToPath for "+
f);b in d||(d[b]=!0,c.push(b))}}var c=[],d={},e=goog.dependencies_;a(b);for(b=0;b<c.length;b++){var f=c[b];goog.dependencies_.written[f]=!0}var g=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(b=0;b<c.length;b++)if(f=c[b])e.pathIsModule[f]?goog.importModule_(goog.basePath+f):goog.importScript_(goog.basePath+f);else throw goog.moduleLoaderState_=g,Error("Undefined script input");goog.moduleLoaderState_=g},goog.getPathFromDeps_=function(b){return b in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[b]:
null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));goog.normalizePath_=function(b){b=b.split("/");for(var a=0;a<b.length;)"."==b[a]?b.splice(a,1):a&&".."==b[a]&&b[a-1]&&".."!=b[a-1]?b.splice(--a,2):a++;return b.join("/")};goog.loadFileSync_=function(b){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(b);var a=new goog.global.XMLHttpRequest;a.open("get",b,!1);a.send();return a.responseText};
goog.retrieveAndExecModule_=function(b){if(!COMPILED){var a=b;b=goog.normalizePath_(b);var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,d=goog.loadFileSync_(b);if(null!=d)d=goog.wrapModule_(b,d),goog.IS_OLD_IE_?(goog.dependencies_.deferred[a]=d,goog.queuedModules_.push(a)):c(b,d);else throw Error("load of "+b+"failed");}};
goog.typeOf=function(b){var a=typeof b;if("object"==a)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return a;var c=Object.prototype.toString.call(b);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==a&&"undefined"==typeof b.call)return"object";return a};goog.isNull=function(b){return null===b};goog.isDefAndNotNull=function(b){return null!=b};goog.isArray=function(b){return"array"==goog.typeOf(b)};goog.isArrayLike=function(b){var a=goog.typeOf(b);return"array"==a||"object"==a&&"number"==typeof b.length};goog.isDateLike=function(b){return goog.isObject(b)&&"function"==typeof b.getFullYear};goog.isString=function(b){return"string"==typeof b};
goog.isBoolean=function(b){return"boolean"==typeof b};goog.isNumber=function(b){return"number"==typeof b};goog.isFunction=function(b){return"function"==goog.typeOf(b)};goog.isObject=function(b){var a=typeof b;return"object"==a&&null!=b||"function"==a};goog.getUid=function(b){return b[goog.UID_PROPERTY_]||(b[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(b){return!!b[goog.UID_PROPERTY_]};goog.removeUid=function(b){"removeAttribute"in b&&b.removeAttribute(goog.UID_PROPERTY_);try{delete b[goog.UID_PROPERTY_]}catch(a){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(b){var a=goog.typeOf(b);if("object"==a||"array"==a){if(b.clone)return b.clone();var a="array"==a?[]:{},c;for(c in b)a[c]=goog.cloneObject(b[c]);return a}return b};goog.bindNative_=function(b,a,c){return b.call.apply(b.bind,arguments)};
goog.bindJs_=function(b,a,c){if(!b)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return b.apply(a,c)}}return function(){return b.apply(a,arguments)}};goog.bind=function(b,a,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(b,a){var c=Array.prototype.slice.call(arguments,1);return function(){var a=c.slice();a.push.apply(a,arguments);return b.apply(this,a)}};goog.mixin=function(b,a){for(var c in a)b[c]=a[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(b){if(goog.global.execScript)goog.global.execScript(b,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(a){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(b);else{var c=goog.global.document,d=c.createElement("SCRIPT");d.type="text/javascript";d.defer=!1;d.appendChild(c.createTextNode(b));
c.body.appendChild(d);c.body.removeChild(d)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(b,a){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return a?b+"-"+d(a):d(b)};
goog.setCssNameMapping=function(b,a){goog.cssNameMapping_=b;goog.cssNameMappingStyle_=a};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(b,a){a&&(b=b.replace(/\{\$([^}]+)}/g,function(b,d){return d in a?a[d]:b}));return b};goog.getMsgWithFallback=function(b,a){return b};goog.exportSymbol=function(b,a,c){goog.exportPath_(b,a,c)};goog.exportProperty=function(b,a,c){b[a]=c};
goog.inherits=function(b,a){function c(){}c.prototype=a.prototype;b.superClass_=a.prototype;b.prototype=new c;b.prototype.constructor=b;b.base=function(b,c,f){for(var g=Array(arguments.length-2),l=2;l<arguments.length;l++)g[l-2]=arguments[l];return a.prototype[c].apply(b,g)}};
goog.base=function(b,a,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_){for(var e=Array(arguments.length-1),f=1;f<arguments.length;f++)e[f-1]=arguments[f];return d.superClass_.constructor.apply(b,e)}e=Array(arguments.length-2);for(f=2;f<arguments.length;f++)e[f-2]=arguments[f];for(var f=!1,g=b.constructor;g;g=
g.superClass_&&g.superClass_.constructor)if(g.prototype[a]===d)f=!0;else if(f)return g.prototype[a].apply(b,e);if(b[a]===d)return b.constructor.prototype[a].apply(b,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(b){b.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(b,a){var c=a.constructor,d=a.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,b);b&&goog.inherits(c,b);delete a.constructor;delete a.statics;goog.defineClass.applyProperties_(c.prototype,a);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(b,a){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(a&&a.prototype&&a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return b;var c=function(){var a=b.apply(this,arguments)||this;a[goog.UID_PROPERTY_]=a[goog.UID_PROPERTY_];this.constructor===c&&Object.seal(a);return a};return c}return b};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(b,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])};goog.tagUnsealableClass=function(b){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";/*

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var SparqlBlocks={};
SparqlBlocks.Prefixes=function(){var b=null,a={},c=function(b){var e=a[b];if(e)return{prefix:e,localPart:""};var f=null,g=b.substr(0,b.length-1),e=g.lastIndexOf("#");-1<e?f=b.substr(0,e+1):(e=g.lastIndexOf("/"),-1<e&&(f=b.substr(0,e+1)));if(null!=f){if(f=c(f))return{prefix:f.prefix,localPart:f.localPart+b.substr(e+1)}}else return null};$.getJSON("../prefix.cc/all.file.json",function(c){b=c;Object.keys(c).forEach(function(b){a[c[b]]||(a[c[b]]=b)})});return{lookForPrefix:function(a){return b[a]},lookForIri:c}}();/*


 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
SparqlBlocks.Tooltip={};Blockly.Tooltip.onMouseOut_=function(b){Blockly.Tooltip.mouseOutPid_=setTimeout(function(){Blockly.Tooltip.hide();Blockly.Tooltip.element_=null;Blockly.Tooltip.poisonedElement_=null},1);clearTimeout(Blockly.Tooltip.showPid_)};
Blockly.Tooltip.onMouseMove_=function(b){if(Blockly.Tooltip.element_&&Blockly.Tooltip.element_.tooltip&&0==Blockly.dragMode_&&!Blockly.WidgetDiv.isVisible())if(Blockly.Tooltip.visible){var a=Blockly.Tooltip.lastX_-b.pageX;b=Blockly.Tooltip.lastY_-b.pageY;var c=Blockly.Tooltip.element_.tooltipRadiusOK||Blockly.Tooltip.RADIUS_OK;Math.sqrt(a*a+b*b)>c&&Blockly.Tooltip.hide()}else Blockly.Tooltip.poisonedElement_!=Blockly.Tooltip.element_&&(clearTimeout(Blockly.Tooltip.showPid_),Blockly.Tooltip.lastX_=
b.pageX,Blockly.Tooltip.lastY_=b.pageY,Blockly.Tooltip.showPid_=setTimeout(Blockly.Tooltip.show_,Blockly.Tooltip.element_.tooltipHoverMs||Blockly.Tooltip.HOVER_MS))};Blockly.Tooltip.hide=function(){var b=Blockly.Tooltip.hide;return function(){Blockly.Tooltip.element_&&Blockly.Tooltip.element_.hideTooltip&&Blockly.Tooltip.element_.hideTooltip();b()}}();
Blockly.Tooltip.show_=function(){var b=Blockly.Tooltip.show_;return function(){Blockly.Tooltip.element_&&Blockly.Tooltip.element_.showTooltip?(Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_,Blockly.Tooltip.visible=!0,Blockly.Tooltip.element_.showTooltip()):b()}}();SparqlBlocks.Output=function(){var b={},a=function(a){var c=b[a];c||(c="http://www.w3.org/2001/XMLSchema#"+a,b[a]=c);return c},c=function(b,c){var d=b.datatype;if(d&&d!=a("string")&&d!=a("langString")){var e=b.value,f=null;switch(d){case a("integer"):case a("decimal"):case a("float"):case a("double"):case a("byte"):case a("short"):case a("int"):case a("long"):case a("unsignedByte"):case a("unsignedShort"):case a("unsignedInt"):case a("unsignedLong"):case a("positiveInteger"):case a("nonNegativeInteger"):case a("negativeInteger"):case a("nonPositiveInteger"):f=
Blockly.Block.obtain(c,"sparql_math_number");f.initSvg();f.setFieldValue(e,"NUM");break;case a("boolean"):f=Blockly.Block.obtain(c,"sparql_logic_boolean");f.initSvg();f.setFieldValue(e,"BOOL");break;default:var g=SparqlBlocks.Prefixes.lookForIri(d);g?(f=Blockly.Block.obtain(c,"sparql_text_with_type_pref"),f.initSvg(),f.setFieldValue(e,"TEXT"),f.setFieldValue(g.prefix,"DT_PREFIX"),f.setFieldValue(g.localPart,"DT_LOCAL_NAME")):(f=Blockly.Block.obtain(c,"sparql_text_with_type_iri"),f.initSvg(),f.setFieldValue(e,
"TEXT"),f.setFieldValue(d,"DT_IRI"))}return f}d=null;(e=b["xml:lang"])?(d=Blockly.Block.obtain(c,"sparql_text_with_lang"),d.initSvg(),d.setFieldValue(e,"LANG")):(d=Blockly.Block.obtain(c,"sparql_text"),d.initSvg());d.setFieldValue(b.value,"TEXT");return d},d=function(a,b){var c=a.value,d=SparqlBlocks.Prefixes.lookForIri(c);if(null!=d)return c=Blockly.Block.obtain(b,"sparql_prefixed_iri"),c.initSvg(),c.setFieldValue(d.prefix,"PREFIX"),c.setFieldValue(d.localPart,"LOCAL_NAME"),c;d=Blockly.Block.obtain(b,
"sparql_iri");d.initSvg();d.setFieldValue(c,"IRI");return d},e=function(a,b){var c=a.value,d=Blockly.Block.obtain(b,"sparql_prefixed_iri");d.initSvg();d.setFieldValue("_","PREFIX");d.setFieldValue(c,"LOCAL_NAME");return d},f=function(a,b,f){var g=null;if(a)switch(a.type){case "literal":case "typed-literal":g=c(a,b);break;case "uri":g=d(a,b);break;case "bnode":g=e(a,b)}if(g){g.setDeletable(!1);g.setMovable(!1);g.setEditable(!1);var h=null;g.tooltip="tooltip";g.tooltipHoverMs=1;g.showTooltip=function(){console.log("I would like to dup me!");
var a=Blockly.Xml.blockToDom_(g);a.removeAttribute("editable");a.removeAttribute("movable");a.removeAttribute("deletable");h=Blockly.Xml.domToBlock(b,a);h.isInFlyout=!0;h.hideTooltip=function(){console.log("Is there a dup to delete?");h&&(console.log("Yes, delete me the dup!"),h.dispose())};Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_=h;var c=Blockly.bindEvent_(h.getSvgRoot(),"mousedown",null,function(a){Blockly.isRightButton(a)||h.disabled||(h.isInFlyout=!1,Blockly.unbindEvent_(c),h.hideTooltip=
null,Blockly.Tooltip.hide(),h.onMouseDown_(a),h=null)}),a=g.getRelativeToSurfaceXY();h.moveBy(a.x,a.y);h.select()};g.hideTooltip=function(){console.log("Is there something to delete?");h&&(console.log("Yes, delete me!"),h.dispose())};f.connect(g.outputConnection);g.render()}},g=function(a,b,c,d){var e=Blockly.Block.obtain(c,"sparql_column");e.initSvg();e.setFieldValue(a,"COLNAME");d.connect(e.outputConnection);e.render();var g=e.getInput("VALUES").connection;b.forEach(function(a){var b=g,d=Blockly.Block.obtain(c,
"sparql_value_container");d.initSvg();b.connect(d.previousConnection);d.render();b=d.getInput("VALUE").connection;f(a,c,b);g=d.nextConnection});return e};return{blocksFromSelectResults:function(a,b){console.log("data: "+JSON.stringify(b));var c=Blockly.Block.obtain(a,"sparql_table");c.initSvg();for(var d=b.head.vars,e=b.results.bindings,f=d.length,m=0;m<f;m++){c.appendValueInput("COL"+(m+1)).setCheck("Column");var p=c.getInput("COL"+(m+1)).connection,n=d[m];g(n,e.map(function(a){return a[n]}),a,p)}c.colCount_=
f;c.resultsData=b;return c}}}();SparqlBlocks.Sparql=new Blockly.Generator("Sparql");SparqlBlocks.Sparql.addReservedWords("");SparqlBlocks.Sparql.STMNT_BRK="###\n";SparqlBlocks.Sparql.STMNT_BRK_RE=/###\n/;SparqlBlocks.Sparql.stmJoin=function(b,a){var c=b.split(SparqlBlocks.Sparql.STMNT_BRK_RE);c.pop();return c.join(a)};SparqlBlocks.Sparql.ORDER_ATOMIC=0;SparqlBlocks.Sparql.ORDER_MEMBER=1;SparqlBlocks.Sparql.ORDER_NEW=1;SparqlBlocks.Sparql.ORDER_FUNCTION_CALL=2;SparqlBlocks.Sparql.ORDER_INCREMENT=3;
SparqlBlocks.Sparql.ORDER_DECREMENT=3;SparqlBlocks.Sparql.ORDER_LOGICAL_NOT=4;SparqlBlocks.Sparql.ORDER_BITWISE_NOT=4;SparqlBlocks.Sparql.ORDER_UNARY_PLUS=4;SparqlBlocks.Sparql.ORDER_UNARY_NEGATION=4;SparqlBlocks.Sparql.ORDER_TYPEOF=4;SparqlBlocks.Sparql.ORDER_VOID=4;SparqlBlocks.Sparql.ORDER_DELETE=4;SparqlBlocks.Sparql.ORDER_MULTIPLICATION=5;SparqlBlocks.Sparql.ORDER_DIVISION=5;SparqlBlocks.Sparql.ORDER_MODULUS=5;SparqlBlocks.Sparql.ORDER_ADDITION=6;SparqlBlocks.Sparql.ORDER_SUBTRACTION=6;
SparqlBlocks.Sparql.ORDER_BITWISE_SHIFT=7;SparqlBlocks.Sparql.ORDER_RELATIONAL=8;SparqlBlocks.Sparql.ORDER_IN=8;SparqlBlocks.Sparql.ORDER_INSTANCEOF=8;SparqlBlocks.Sparql.ORDER_EQUALITY=9;SparqlBlocks.Sparql.ORDER_BITWISE_AND=10;SparqlBlocks.Sparql.ORDER_BITWISE_XOR=11;SparqlBlocks.Sparql.ORDER_BITWISE_OR=12;SparqlBlocks.Sparql.ORDER_LOGICAL_AND=13;SparqlBlocks.Sparql.ORDER_LOGICAL_OR=14;SparqlBlocks.Sparql.ORDER_CONDITIONAL=15;SparqlBlocks.Sparql.ORDER_ASSIGNMENT=16;
SparqlBlocks.Sparql.ORDER_COMMA=17;SparqlBlocks.Sparql.ORDER_NONE=99;SparqlBlocks.Sparql.init=function(b){};SparqlBlocks.Sparql.finish=function(b){return b};SparqlBlocks.Sparql.scrubNakedValue=function(b){return b+";\n"};SparqlBlocks.Sparql.quote_=function(b){b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+b+"'"};
SparqlBlocks.Sparql.scrub_=function(b,a){var c="";if(!b.outputConnection||!b.outputConnection.targetConnection){var d=b.getCommentText();d&&(c+=SparqlBlocks.Sparql.prefixLines(d,"// ")+"\n");for(var e=0;e<b.inputList.length;e++)b.inputList[e].type==Blockly.INPUT_VALUE&&(d=b.inputList[e].connection.targetBlock())&&(d=SparqlBlocks.Sparql.allNestedComments(d))&&(c+=SparqlBlocks.Sparql.prefixLines(d,"// "))}e=b.nextConnection&&b.nextConnection.targetBlock();e=SparqlBlocks.Sparql.blockToCode(e);return c+
a+e};SparqlBlocks.Exec=function(){var b=function(a,b,c){a||(a="http://live.dbpedia.org/sparql");a=a+"?query="+encodeURIComponent(b);return $.ajax({headers:{Accept:"application/sparql-results+json"},dataType:"json",method:"GET",url:a,success:function(a){c(null,a)},error:function(a,b,d){c({jqXHR:a,textStatus:b,errorThrown:d})}})},a=function(a,b){var c=a.targetBlock();c&&c.dispose();a.connect(b.previousConnection);b.render()},c=function(a){(a=a.targetBlock())&&a.dispose()};return{sparqlExecAndPublish:function(c,
e,f,g,l){var k=Blockly.Block.obtain(f,"sparql_execution_in_progress");k.initSvg();a(g,k);return b(c,e,function(b,c){var d=null;if(b){d=Blockly.Block.obtain(f,"sparql_execution_error");d.initSvg();var e=b.textStatus?b.textStatus:"unknown problem";b.jqXHR.status&&(e+=" "+b.jqXHR.status);b.jqXHR.statusText&&(e+=": "+b.jqXHR.statusText);d.setFieldValue(e,"ERRORTYPE");if(e=b.jqXHR.responseText){var k=null,k=40<e.length?e.substr(0,37)+"...":e;d.setFieldValue(k,"ERRORDESCR");d.setTooltip(e)}}else d=SparqlBlocks.Output.blocksFromSelectResults(f,
c);a(g,d);l(c)})},sparqlExecAndAlert:function(a,c){return b(a,c,function(a,b){a?alert("Error: "+a):alert("Results:\n"+JSON.stringify(b))})},blockExec:function(a){var b=a.getInput("RESULTS");if(b&&(b=b.connection)){var f=a.getFieldValue("ENDPOINT"),f=f?encodeURI(f):null,g=SparqlBlocks.Sparql.valueToCode(a,"QUERY",SparqlBlocks.Sparql.ORDER_NONE);if(f!=a.endpointUri||g!=a.sparqlQueryStr)a.endpointUri=f,a.sparqlQueryStr=g,a.queryReq&&a.queryReq.abort(),g?(console.log("Ready to execute query: "+g),a.resultsData=
null,a.queryReq=SparqlBlocks.Exec.sparqlExecAndPublish(f,g,a.workspace,b,function(b){a.queryReq=null;a.resultsData=b})):(console.log("Empty query"),a.resultsData=null,c(b),a.queryReq=null)}}}}();SparqlBlocks.Types=function(){var b={},a=function(a,c){b[a]=c;c.children=[];if(null!=c.parents)for(var f=c.parents,g=0;g<f.length;g++){var l=f[g];b[l]&&b[l].children.push(a)}},c=function(a){var e=b[a];if(!e.extension){a=[a];e.aliases&&(a=a.concat(e.aliases));for(var f=e.children,g=0;g<f.length;g++)a=a.concat(c(f[g]));e.extension=a}return e.extension};a("TriplesBlock",{});a("PropertyList",{});a("Expr",{});a("GraphTermOrVar",{parents:["Expr"]});a("Verb",{});a("ResourceOrVar",{parents:["GraphTermOrVar",
"Verb"]});a("StringExpr",{parents:["Expr"],aliases:["String"]});a("NumberExpr",{parents:["Expr"],aliases:["Number"]});a("BooleanExpr",{parents:["Expr"],aliases:["Boolean"]});a("BnodeExpr",{parents:["Expr"]});a("IriExpr",{parents:["Expr"]});a("AnyExpr",{parents:["StringExpr","NumberExpr","BooleanExpr","BnodeExpr","IriExpr"]});a("Var",{parents:["GraphTermOrVar","ResourceOrVar","AnyExpr"]});a("GraphTerm",{parents:["GraphTermOrVar"]});a("Resource",{parents:["GraphTerm","ResourceOrVar"]});a("Bnode",{parents:["Resource",
"BnodeExpr"]});a("Iri",{parents:["Resource","IriExpr"]});a("Literal",{parents:["GraphTerm"]});a("LiteralString",{parents:["Literal","StringExpr"]});a("LiteralNumber",{parents:["Literal","NumberExpr"]});a("LiteralBoolean",{parents:["Literal","BooleanExpr"]});return{setType:a,getExtension:c}}();SparqlBlocks.Storage=function(){var b=function(a,b){$.ajax({dataType:"json",method:"GET",url:"https://api.github.com/gists/"+a,success:function(a){b(a.files["workspace.xml"].raw_url)},error:function(a,b,c){f("There was a problem with the request.\n\nhttpRequest_.status: "+a.status)}})},a=function(a,c){var d=a.split(":");switch(d[0]){case "gist":b(d[1],c)}},c=null,d=function(a){c&&c.abort();c=$.ajax(a)},e=function(a){var b=Blockly.Xml.workspaceToDom(a),c=Blockly.Xml.domToText(b),d=a.addChangeListener(function(){var b=
Blockly.Xml.workspaceToDom(a),b=Blockly.Xml.domToText(b);c!=b&&(window.location.hash="",a.removeChangeListener(d))})},f=function(a){window.alert(a)};return{backupOnUnload:function(a){var b=a||Blockly.getMainWorkspace();window.addEventListener("unload",function(){if("localStorage"in window){var a=Blockly.Xml.workspaceToDom(b),c=window.location.href.split("#")[0];window.localStorage.setItem(c,Blockly.Xml.domToText(a))}},!1)},restoreBlocks:function(a){var b=window.location.href.split("#")[0];"localStorage"in
window&&window.localStorage[b]&&(a=a||Blockly.getMainWorkspace(),b=Blockly.Xml.textToDom(window.localStorage[b]),Blockly.Xml.domToWorkspace(a,b))},linkGist:function(a){var b=a||Blockly.getMainWorkspace();a=Blockly.Xml.workspaceToDom(b);a=Blockly.Xml.domToPrettyText(a);d({dataType:"json",method:"POST",data:JSON.stringify({files:{"workspace.xml":{content:a}}}),url:"https://api.github.com/gists",success:function(a){window.location.hash="gist:"+a.id;f("Share your blocks with this link:\n\n%1\n\nSee also XML on GitHub at this link:\n\n%2".replace("%1",
window.location.href).replace("%2","https://gist.github.com/"+a.id));e(b)},error:function(a,b,c){f("There was a problem with the request.\n\nhttpRequest_.status: "+a.status)}})},retrieveXml:function(b,c){var k=c||Blockly.getMainWorkspace();a(b,function(a){d({headers:{Accept:"text/xml"},dataType:"text",method:"GET",url:a,success:function(a){if(a.length)a:{try{a=Blockly.Xml.textToDom(a)}catch(b){f("Could not load your saved file.\nPerhaps it was created with a different version of Blockly?\nXML: "+
a);break a}k.clear();Blockly.Xml.domToWorkspace(k,a)}else f('Sorry, "%1" doesn\'t correspond with any saved Blockly file.'.replace("%1",window.location.hash));e(k)},error:function(a,b,c){f("There was a problem with the request.\n\nhttpRequest_.status: "+a.status)}})})},alert:f}}();SparqlBlocks.Blocks=function(){var b=function(a){return function(){a.call(this)}},a=function(a){return function(b){a&&a.call(this,b)}};return{block:function(c,d){d.customContextMenu=a(d.customContextMenu);d.init=b(d.init);Blockly.Blocks[c]=d},insertOptionBeforeHelp:function(a,b){var e=a.pop(),f=e&&"Help"==e.text;!f&&e&&a.push(e);a.push(b);f&&a.push(e)}}}();SparqlBlocks.Blocks.bgp={};
(function(){var b=SparqlBlocks.Types.getExtension,a=function(a){a.setHelpUrl("http://www.w3.org/TR/sparql11-query/#QSynTriples")},c=function(b){a(b);b.setColour(65)},d=function(b){a(b);b.setColour(120)},e=function(a,b){if(a.getInputConnection(b)){var c=b.targetBlock;if(c&&(c=c.varsInScope()))return c}return[]};SparqlBlocks.Blocks.block("sparql_verb_objectlist",{init:function(){c(this);this.appendValueInput("VERB").setCheck(b("Verb"));this.appendStatementInput("OBJECT").setCheck("ObjectList").appendField("\u21b3");this.setInputsInline(!0);
this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")},getVarsInScope:function(){return _.union(e(this,"VERB"),e(this,"OBJECT"))}});SparqlBlocks.Blocks.block("sparql_verb_object",{init:function(){c(this);this.appendValueInput("VERB").setCheck(b("Verb")).appendField("\u2501\u252b");this.appendValueInput("OBJECT").setCheck(b("GraphTermOrVar")).appendField("\u2523\u2501\u25b6");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,
"PropertyList");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_reversePath_object",{init:function(){c(this);this.appendValueInput("VERB").setCheck(b("Resource")).appendField("\u25c0\u2501\u252b");this.appendValueInput("OBJECT").setCheck(b("GraphTermOrVar")).appendField("\u2523\u2501");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_closurePath_object",{init:function(){c(this);
this.appendValueInput("VERB").setCheck(b("Resource")).appendField("\u2501\u252b");this.appendValueInput("OBJECT").setCheck(b("GraphTermOrVar")).appendField("\u2523 \u2731 \u2501\u25b6");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_reverseClosurePath_object",{init:function(){c(this);this.appendValueInput("VERB").setCheck(b("Resource")).appendField("\u25c0\u2501 \u2731 \u252b");
this.appendValueInput("OBJECT").setCheck(b("GraphTermOrVar")).appendField("\u2523\u2501");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_isa",{init:function(){c(this);this.appendValueInput("TYPE").setCheck(b("ResourceOrVar")).appendField("is a");this.setInputsInline(!0);this.setPreviousStatement(!0,"PropertyList");this.setNextStatement(!0,"PropertyList");this.setTooltip("")}});
SparqlBlocks.Blocks.block("sparql_subject_propertylist",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(b("ResourceOrVar"));this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("  \u230a");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_typedsubject_propertylist",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(b("ResourceOrVar"));
this.appendValueInput("TYPE").setCheck(b("ResourceOrVar")).appendField("is a");this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("  &");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_anonsubject_propertylist",{init:function(){d(this);this.appendStatementInput("PROPERTY_LIST").setCheck("PropertyList").appendField("s.t.");this.setInputsInline(!0);this.setOutput(!0,
"Resource");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_subject_verb_objectlist",{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(b("ResourceOrVar"));this.appendValueInput("VERB").appendField("has").setCheck(b("Verb"));this.appendStatementInput("OBJECT_LIST").setCheck("ObjectList").appendField("\u21b3");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_subject_verb_object",
{init:function(){d(this);this.appendValueInput("SUBJECT").setCheck(b("ResourceOrVar"));this.appendValueInput("VERB").appendField("has").setCheck(b("Verb"));this.appendValueInput("OBJECT").setCheck(b("GraphTermOrVar")).appendField("\u2192");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}})})();SparqlBlocks.Blocks.control={};
(function(){var b=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_filter",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#scopeFilters");this.setColour(210);this.appendValueInput("CONDITION").setCheck(b("BooleanExpr")).appendField("provided that");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_union",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#alternatives");this.setColour(260);
this.appendStatementInput("OP1").setCheck("TriplesBlock");this.appendStatementInput("OP2").setCheck("TriplesBlock").appendField("or");this.setInputsInline(!0);this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_optional",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#optionals");this.setColour(260);this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("optionally");this.setInputsInline(!0);
this.setPreviousStatement(!0,"TriplesBlock");this.setNextStatement(!0,"TriplesBlock");this.setTooltip("")}})})();SparqlBlocks.Blocks.exec={};
(function(){var b=function(a){return{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation");this.setColour(330);a&&a.endpointField&&this.appendDummyInput().appendField(new Blockly.FieldImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAH8SURBVHjaYvz//z8DJQAggFiQOXv37mUHGugHxJH//v3TANKqQAxk/rsCpO8A6blAvDcgIOAvTA9AADHCXADUrAVkLxcVFdWTkJBg4ObmZuDi4mIAyX/8+JHh8+fPDI8ePWJ4/fr1EaBYRHBw8FOQPoAAAisA4V27du1/+PAhyLr/uMDv37//nz9//v/KlSsXwvQBBBATzClAjra4uDhBP0tLSzMALfGE8QECCB4GQEGwiS9fvmTg4OBgYGdnZ2BlZQWLffv2jeHdu3cMT58+ZVBWVgarhQGAAMIwgIWFheH9+/cMP378APP//PnD8OnTJ4afP3+C5UBiyAYABBALkhfAmJmZGewCkGIQBvobbAgssEGa//6FRwIDQABhuACkGKaJkZERrBgmxsTEhOECgADCMACmAYRBrgHxQZpBGMSHqYEBgADCMACmGKQIZgDMBTBvgtgwABBAKAaAMMx2mIHILoOp+/XrF9wAgACCpwOQAlBUAVMiOAqRASgsJCUlGYyNjRmePXuG4gKAAEJ2QcLx48dXaWpqcsvLy4MNAWkE2Q7SDErKV65cYbhw4cILoAv9YPoAAogROTcuWbJEEWhQDRAHA0OcH5QXQN4BuQyYLkAaFwNd2lNZWfkKpgcggBhxZedZs2bxAjWoAPE/oJNvFBcX/8SmDiDAAO2Un30ZkCt9AAAAAElFTkSuQmCC",16,
16,"Endpoint")).appendField(new Blockly.FieldTextInput("http://live.dbpedia.org/sparql"),"ENDPOINT");this.appendStatementInput("QUERY").setCheck("Select").appendField(" \u2699");this.appendStatementInput("RESULTS").setCheck("Table").appendField("\u21aa");this.setTooltip("")},onchange:function(){SparqlBlocks.Exec.blockExec(this)},customContextMenu:function(a){if(this.sparqlQueryStr){var b=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Query as SPARQL",enabled:!0,callback:function(){var a=
new Blob([b.sparqlQueryStr],{type:"application/sparql-query"});saveAs(a,"query.rq")}})}this.resultsData&&(b=this,SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Results as JSON",enabled:!0,callback:function(){var a=JSON.stringify(b.resultsData);a&&(a=new Blob([a],{type:"application/sparql-results+json"}),saveAs(a,"results.json"))}}))}}};SparqlBlocks.Blocks.block("sparql_execution",b());SparqlBlocks.Blocks.block("sparql_execution_endpoint",b({endpointField:!0}));SparqlBlocks.Blocks.block("sparql_execution_in_progress",
{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation");this.setColour(330);this.appendDummyInput().appendField("execution in progress...");this.setPreviousStatement(!0,"Table");this.setTooltip("");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1)}});SparqlBlocks.Blocks.block("sparql_execution_error",{init:function(){this.setHelpUrl("http://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-failure");this.setColour(330);this.appendDummyInput().appendField("Error executing query!");
this.appendDummyInput().appendField("Error Name").appendField(new Blockly.FieldTextInput("ERROR TYPE"),"ERRORTYPE");this.appendDummyInput().appendField("Description").appendField(new Blockly.FieldTextInput("ERROR"),"ERRORDESCR");this.setPreviousStatement(!0,"Table");this.setTooltip("");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1)}})})();SparqlBlocks.Blocks.logic={};
(function(){var b=SparqlBlocks.Types.getExtension,a=function(a){return b("Var"==a?"Expr":a)};SparqlBlocks.Blocks.logic.HUE=210;SparqlBlocks.Blocks.block("sparql_logic_compare",{init:function(){var a=this.RTL?[["=","EQ"],["\u2260","NEQ"],[">","LT"],["\u2265","LTE"],["<","GT"],["\u2264","GTE"]]:[["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"]];this.setHelpUrl(Blockly.Msg.LOGIC_COMPARE_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");
this.appendValueInput("A");this.appendValueInput("B").appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);var b=this;this.setTooltip(function(){var a=b.getFieldValue("OP");return{EQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ,NEQ:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ,LT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT,LTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE,GT:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT,GTE:Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE}[a]});this.prevBlocks_=[null,null]},onchange:function(){if(this.workspace){var b=
this.getInputTargetBlock("A"),d=this.getInputTargetBlock("B");if(b&&d&&!b.outputConnection.checkType_(d.outputConnection)&&0==_.intersection(a(b.outputConnection.check_),a(d.outputConnection.check_)).length)for(var e=0;e<this.prevBlocks_.length;e++){var f=this.prevBlocks_[e];if(f===b||f===d)f.setParent(null),f.bumpNeighbours_()}this.prevBlocks_[0]=b;this.prevBlocks_[1]=d}}});SparqlBlocks.Blocks.block("sparql_logic_operation",{init:function(){var a=[[Blockly.Msg.LOGIC_OPERATION_AND,"AND"],[Blockly.Msg.LOGIC_OPERATION_OR,
"OR"]];this.setHelpUrl(Blockly.Msg.LOGIC_OPERATION_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("A").setCheck(b("BooleanExpr"));this.appendValueInput("B").setCheck(b("BooleanExpr")).appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);var d=this;this.setTooltip(function(){var a=d.getFieldValue("OP");return{AND:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND,OR:Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR}[a]})}});SparqlBlocks.Blocks.block("sparql_logic_negate",
{init:function(){this.jsonInit({message0:Blockly.Msg.LOGIC_NEGATE_TITLE,args0:[{type:"input_value",name:"BOOL",check:b("BooleanExpr")}],output:"BooleanExpr",colour:SparqlBlocks.Blocks.logic.HUE,tooltip:Blockly.Msg.LOGIC_NEGATE_TOOLTIP,helpUrl:Blockly.Msg.LOGIC_NEGATE_HELPURL})}});SparqlBlocks.Blocks.block("sparql_logic_boolean",{init:function(){var a=[[Blockly.Msg.LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.Msg.LOGIC_BOOLEAN_FALSE,"FALSE"]];this.setHelpUrl(Blockly.Msg.LOGIC_BOOLEAN_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);
this.setOutput(!0,"LiteralBoolean");this.appendDummyInput().appendField(new Blockly.FieldDropdown(a),"BOOL");this.setTooltip(Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_logic_null",{init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_NULL_HELPURL);this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0);this.appendDummyInput().appendField(Blockly.Msg.LOGIC_NULL);this.setTooltip(Blockly.Msg.LOGIC_NULL_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_logic_ternary",{init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_TERNARY_HELPURL);
this.setColour(SparqlBlocks.Blocks.logic.HUE);this.appendValueInput("IF").setCheck(b("BooleanExpr")).appendField(Blockly.Msg.LOGIC_TERNARY_CONDITION);this.appendValueInput("THEN").appendField(Blockly.Msg.LOGIC_TERNARY_IF_TRUE);this.appendValueInput("ELSE").appendField(Blockly.Msg.LOGIC_TERNARY_IF_FALSE);this.setOutput(!0,"Expr");this.setTooltip(Blockly.Msg.LOGIC_TERNARY_TOOLTIP);this.prevParentConnection_=null},onchange:function(){if(this.workspace){var a=this.getInputTargetBlock("THEN"),b=this.getInputTargetBlock("ELSE"),
e=this.outputConnection.targetConnection;if((a||b)&&e)for(var f=0;2>f;f++){var g=1==f?a:b;g&&!g.outputConnection.checkType_(e)&&(e===this.prevParentConnection_?(this.setParent(null),e.sourceBlock_.bumpNeighbours_()):(g.setParent(null),g.bumpNeighbours_()))}this.prevParentConnection_=e}}});SparqlBlocks.Blocks.block("sparql_exists",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#neg-exists");this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("exists");
this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_not_exists",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#neg-notexists");this.setColour(SparqlBlocks.Blocks.logic.HUE);this.setOutput(!0,"BooleanExpr");this.appendStatementInput("OP").setCheck("TriplesBlock").appendField("not exists");this.setTooltip("")}})})();SparqlBlocks.Blocks.main={};
(function(){var b=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_construct",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#construct");this.setColour(290);this.appendDummyInput().appendField("CONSTRUCT");this.appendStatementInput("CONSTRUCT").setCheck("ConstructTriples");this.appendDummyInput().appendField("WHERE");this.appendStatementInput("WHERE").setCheck("TriplesBlock");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_select",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#select");
this.setColour(290);this.appendDummyInput().appendField("select all the variables");this.appendStatementInput("WHERE").setCheck("TriplesBlock").appendField("where");this.orderFieldCount_=1;this.appendValueInput("ORDER_FIELD1").setCheck(b("Expr")).appendField("order by","ORDER_LABEL1").appendField(new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]),"ORDER_DIRECTION1");this.appendDummyInput("AFTER_ORDER").appendField("& limit to first").appendField(new Blockly.FieldTextInput("5"),"LIMIT").appendField("rows");
this.setInputsInline(!0);this.setPreviousStatement(!0,"Select");this.setTooltip("")},saveQueryAsSparql:function(){var a=SparqlBlocks.Sparql.blockToCode(this);a&&(a=new Blob([a],{type:"application/sparql-query"}),saveAs(a,"query.rq"))},customContextMenu:function(a){var b=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Query as SPARQL",enabled:!0,callback:function(){b.saveQueryAsSparql()}})},onchange:function(){var a=this.getInput("ORDER_FIELD"+this.orderFieldCount_);if(a&&a.connection.targetConnection){if(1<
this.orderFieldCount_){var c="ORDER_FIELD"+this.orderFieldCount_,a="ORDER_LABEL"+this.orderFieldCount_,d="ORDER_DIRECTION"+this.orderFieldCount_,e=this.getInput(c),c=new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]);c.setValue(this.getFieldValue(d));e.removeField(d);e.removeField(a);e.appendField(", then by",a);e.appendField(c,d)}this.orderFieldCount_++;c="ORDER_FIELD"+this.orderFieldCount_;this.appendValueInput(c).setCheck(b("Expr")).appendField((2<this.orderFieldCount_?", ":"")+"and then by",
"ORDER_LABEL"+this.orderFieldCount_).appendField(new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]),"ORDER_DIRECTION"+this.orderFieldCount_);this.moveInputBefore(c,"AFTER_ORDER")}else if(1<this.orderFieldCount_&&(e=this.getInput("ORDER_FIELD"+(this.orderFieldCount_-1)))&&!e.connection.targetConnection){this.removeInput("ORDER_FIELD"+this.orderFieldCount_);for(this.orderFieldCount_--;1<this.orderFieldCount_&&!this.getInput("ORDER_FIELD"+(this.orderFieldCount_-1)).connection.targetConnection;)this.removeInput("ORDER_FIELD"+
(this.orderFieldCount_-1)),this.orderFieldCount_--;e.name="ORDER_FIELD"+this.orderFieldCount_;var a="ORDER_LABEL"+this.orderFieldCount_,d="ORDER_DIRECTION"+this.orderFieldCount_,f=e.fieldRow[0].name,g=e.fieldRow[1].name,c=new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]);c.setValue(this.getFieldValue(g));e.removeField(g);e.removeField(f);e.appendField(1<this.orderFieldCount_?(2<this.orderFieldCount_?", ":"")+"and then by":"order by",a);e.appendField(c,d)}},mutationToDom:function(){var a=
document.createElement("mutation");a.setAttribute("order_field_count",this.orderFieldCount_);return a},domToMutation:function(a){this.orderFieldCount_=parseInt(a.getAttribute("order_field_count"),10);for(a=2;a<=this.orderFieldCount_;a++){var c="ORDER_FIELD"+a,d="ORDER_LABEL"+a,e="ORDER_DIRECTION"+a,f=new Blockly.FieldDropdown([["\u2193","ASC"],["\u2191","DESC"]]);this.appendValueInput(c).setCheck(b("Expr")).appendField((2<a?", ":"")+"and then by",d).appendField(f,e);this.moveInputBefore(c,"AFTER_ORDER")}}});
SparqlBlocks.Blocks.block("sparql_var_binding",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#selectExpressions");this.setColour(330);this.appendValueInput("EXPR").setCheck(b("Expr"));this.appendDummyInput().appendField("as").appendField(new Blockly.FieldTextInput("col name"),"COLNAME");this.setInputsInline(!0);this.setPreviousStatement(!0,"VarBindings");this.setNextStatement(!0,"VarBindings");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_prefixed_iri",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#prefNames");
this.setColour(20);this.appendDummyInput().appendField(new Blockly.FieldTextInput("prefix"),"PREFIX").appendField(":").appendField(new Blockly.FieldTextInput("localName"),"LOCAL_NAME");this.setInputsInline(!0);this.setOutput(!0,"Iri");this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_iri",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#QSynIRI");this.setColour(20);this.appendDummyInput().appendField("<").appendField(new Blockly.FieldTextInput("iri"),"IRI").appendField(">");
this.setInputsInline(!0);this.setOutput(!0,"Iri");this.setTooltip("")}})})();SparqlBlocks.Blocks.math={};
(function(){var b=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.math.HUE=230;SparqlBlocks.Blocks.block("sparql_math_number",{init:function(){this.setHelpUrl(Blockly.Msg.MATH_NUMBER_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"NUM");this.setOutput(!0,"LiteralNumber");this.setTooltip(Blockly.Msg.MATH_NUMBER_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_math_arithmetic",{init:function(){var a=
[[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"]];this.setHelpUrl(Blockly.Msg.MATH_ARITHMETIC_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("A").setCheck(b("NumberExpr"));this.appendValueInput("B").setCheck(b("NumberExpr")).appendField(new Blockly.FieldDropdown(a),"OP");this.setInputsInline(!0);var c=this;
this.setTooltip(function(){var a=c.getFieldValue("OP");return{ADD:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,MINUS:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,MULTIPLY:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,DIVIDE:Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE}[a]})}});SparqlBlocks.Blocks.block("sparql_math_single",{init:function(){var a=[[Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE,"ABS"],["-","NEG"]];this.setHelpUrl(Blockly.Msg.MATH_SINGLE_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,
"NumberExpr");this.appendValueInput("NUM").setCheck(b("NumberExpr")).appendField(new Blockly.FieldDropdown(a),"OP");var c=this;this.setTooltip(function(){var a=c.getFieldValue("OP");return{ABS:Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS,NEG:Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG}[a]})}});SparqlBlocks.Blocks.block("sparql_math_number_property",{init:function(){var a=[[Blockly.Msg.MATH_IS_EVEN,"EVEN"],[Blockly.Msg.MATH_IS_ODD,"ODD"],[Blockly.Msg.MATH_IS_PRIME,"PRIME"],[Blockly.Msg.MATH_IS_WHOLE,"WHOLE"],[Blockly.Msg.MATH_IS_POSITIVE,
"POSITIVE"],[Blockly.Msg.MATH_IS_NEGATIVE,"NEGATIVE"],[Blockly.Msg.MATH_IS_DIVISIBLE_BY,"DIVISIBLE_BY"]];this.setColour(SparqlBlocks.Blocks.math.HUE);this.appendValueInput("NUMBER_TO_CHECK").setCheck(b("NumberExpr"));a=new Blockly.FieldDropdown(a,function(a){this.sourceBlock_.updateShape_("DIVISIBLE_BY"==a)});this.appendDummyInput().appendField(a,"PROPERTY");this.setInputsInline(!0);this.setOutput(!0,"BooleanExpr");this.setTooltip(Blockly.Msg.MATH_IS_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),
b="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");a.setAttribute("divisor_input",b);return a},domToMutation:function(a){a="true"==a.getAttribute("divisor_input");this.updateShape_(a)},updateShape_:function(a){var c=this.getInput("DIVISOR");a?c||this.appendValueInput("DIVISOR").setCheck(b("NumberExpr")):c&&this.removeInput("DIVISOR")}});SparqlBlocks.Blocks.block("sparql_math_round",{init:function(){var a=[[Blockly.Msg.MATH_ROUND_OPERATOR_ROUND,"ROUND"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP,"ROUNDUP"],
[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN,"ROUNDDOWN"]];this.setHelpUrl(Blockly.Msg.MATH_ROUND_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("NUM").setCheck(b("NumberExpr")).appendField(new Blockly.FieldDropdown(a),"OP");this.setTooltip(Blockly.Msg.MATH_ROUND_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_math_modulo",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_MODULO_TITLE,args0:[{type:"input_value",name:"DIVIDEND",check:b("NumberExpr")},
{type:"input_value",name:"DIVISOR",check:b("NumberExpr")}],inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_MODULO_TOOLTIP,helpUrl:Blockly.Msg.MATH_MODULO_HELPURL})}});SparqlBlocks.Blocks.block("sparql_math_constrain",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_CONSTRAIN_TITLE,args0:[{type:"input_value",name:"VALUE",check:b("NumberExpr")},{type:"input_value",name:"LOW",check:b("NumberExpr")},{type:"input_value",name:"HIGH",check:b("NumberExpr")}],
inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_CONSTRAIN_TOOLTIP,helpUrl:Blockly.Msg.MATH_CONSTRAIN_HELPURL})}});SparqlBlocks.Blocks.block("sparql_math_random_int",{init:function(){this.jsonInit({message0:Blockly.Msg.MATH_RANDOM_INT_TITLE,args0:[{type:"input_value",name:"FROM",check:b("NumberExpr")},{type:"input_value",name:"TO",check:b("NumberExpr")}],inputsInline:!0,output:"NumberExpr",colour:SparqlBlocks.Blocks.math.HUE,tooltip:Blockly.Msg.MATH_RANDOM_INT_TOOLTIP,
helpUrl:Blockly.Msg.MATH_RANDOM_INT_HELPURL})}});SparqlBlocks.Blocks.block("sparql_math_random_float",{init:function(){this.setHelpUrl(Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL);this.setColour(SparqlBlocks.Blocks.math.HUE);this.setOutput(!0,"NumberExpr");this.appendDummyInput().appendField(Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM);this.setTooltip(Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP)}})})();SparqlBlocks.Blocks.tabular={};
(function(){var b=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_column",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#sparqlQueryVariables");this.setColour(330);this.appendDummyInput().appendField(new Blockly.FieldTextInput("colName"),"COLNAME");this.appendStatementInput("VALUES").setCheck("ValueContainer");this.setOutput(!0,"Column");this.setDeletable(!1);this.setMovable(!1);this.setEditable(!1);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_value_container",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#docResultDesc");
this.setColour(330);this.appendValueInput("VALUE").setCheck(b("GraphTerm"));this.setInputsInline(!0);this.setPreviousStatement(!0,"ValueContainer");this.setNextStatement(!0,"ValueContainer");this.setDeletable(!1);this.setMovable(!1);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_table",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#sparqlSolutions");this.setColour(330);this.setInputsInline(!0);this.setPreviousStatement(!0,"Table");this.setDeletable(!1);this.setMovable(!1);
this.setTooltip("");this.colCount_=0},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("col-count",this.colCount_);return a},domToMutation:function(a){this.colCount_=parseInt(a.getAttribute("col-count"),10);for(a=1;a<=this.colCount_;a++)this.appendValueInput("COL"+a).setCheck("Column")},decompose:function(a){var b=Blockly.Block.obtain(a,"sparql_table_table");b.initSvg();for(var d=b.getInput("STACK").connection,e=1;e<=this.colCount_;e++){var f=Blockly.Block.obtain(a,
"sparql_table_column");f.initSvg();d.connect(f.previousConnection);d=f.nextConnection}return b},compose:function(a){for(var b=this.colCount_;0<b;b--)this.removeInput("COL"+b);this.colCount_=0;for(a=a.getInputTargetBlock("STACK");a;){switch(a.type){case "sparql_table_column":this.colCount_++;b=this.appendValueInput("COL"+this.colCount_).setCheck("Column");a.valueConnection_&&b.connection.connect(a.valueConnection_);break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},
saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=1;a;){switch(a.type){case "sparql_table_column":var d=this.getInput("COL"+b);a.valueConnection_=d&&d.connection.targetConnection;b++;break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},customContextMenu:function(a){if(this.resultsData){var b=this;SparqlBlocks.Blocks.insertOptionBeforeHelp(a,{text:"Save Results as JSON",enabled:!0,callback:function(){var a=JSON.stringify(b.resultsData);
a&&(a=new Blob([a],{type:"application/sparql-results+json"}),saveAs(a,"results.json"))}})}}});SparqlBlocks.Blocks.block("sparql_table_table",{init:function(){this.setColour(330);this.appendDummyInput().appendField("table");this.appendStatementInput("STACK");this.setTooltip("");this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_table_column",{init:function(){this.setColour(330);this.appendDummyInput().appendField("column");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("");
this.contextMenu=!1}})})();SparqlBlocks.Blocks.text={};
(function(){var b=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.text.HUE=160;SparqlBlocks.Blocks.block("sparql_text",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1));this.setOutput(!0,"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_with_lang",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("@").appendField(new Blockly.FieldTextInput(""),"LANG");this.setOutput(!0,"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==
this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_with_type_pref",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("^^").appendField(new Blockly.FieldTextInput("prefix"),"DT_PREFIX").appendField(":").appendField(new Blockly.FieldTextInput("localName"),"DT_LOCAL_NAME");this.setOutput(!0,
"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_with_type_iri",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)).appendField("^^").appendField("<").appendField(new Blockly.FieldTextInput("iri"),"DT_IRI").appendField(">");this.setOutput(!0,"LiteralString");this.setTooltip(Blockly.Msg.TEXT_TEXT_TOOLTIP)},
newQuote_:function(a){return new Blockly.FieldImage(a==this.RTL?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",
12,12,'"')}});SparqlBlocks.Blocks.block("sparql_text_join",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_JOIN_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.itemCount_=2;this.updateShape_();this.setOutput(!0,"StringExpr");this.setMutator(new Blockly.Mutator(["sparql_text_create_join_item"]));this.setTooltip(Blockly.Msg.TEXT_JOIN_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){this.itemCount_=
parseInt(a.getAttribute("items"),10);this.updateShape_()},decompose:function(a){var b=Blockly.Block.obtain(a,"sparql_text_create_join_container");b.initSvg();for(var d=b.getInput("STACK").connection,e=0;e<this.itemCount_;e++){var f=Blockly.Block.obtain(a,"sparql_text_create_join_item");f.initSvg();d.connect(f.previousConnection);d=f.nextConnection}return b},compose:function(a){a=a.getInputTargetBlock("STACK");for(var b=[],d=0;a;)b[d]=a.valueConnection_,a=a.nextConnection&&a.nextConnection.targetBlock(),
d++;this.itemCount_=d;this.updateShape_();for(d=0;d<this.itemCount_;d++)b[d]&&this.getInput("ADD"+d).connection.connect(b[d])},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var d=this.getInput("ADD"+b);a.valueConnection_=d&&d.connection.targetConnection;b++;a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){if(this.getInput("EMPTY"))this.removeInput("EMPTY");else for(var a=0;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++;if(0==this.itemCount_)this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));
else for(a=0;a<this.itemCount_;a++){var b=this.appendValueInput("ADD"+a);0==a&&b.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH)}},newQuote_:Blockly.Blocks.sparql_text.newQuote_});SparqlBlocks.Blocks.block("sparql_text_create_join_container",{init:function(){this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP);this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_text_create_join_item",
{init:function(){this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP);this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_text_append",{init:function(){this.setHelpUrl(Blockly.Msg.TEXT_APPEND_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").appendField(Blockly.Msg.TEXT_APPEND_TO).appendField(new Blockly.FieldVariable(Blockly.Msg.TEXT_APPEND_VARIABLE),
"VAR").appendField(Blockly.Msg.TEXT_APPEND_APPENDTEXT);this.setPreviousStatement(!0);this.setNextStatement(!0);var a=this;this.setTooltip(function(){return Blockly.Msg.TEXT_APPEND_TOOLTIP.replace("%1",a.getFieldValue("VAR"))})},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}});SparqlBlocks.Blocks.block("sparql_text_length",{init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_LENGTH_TITLE,
args0:[{type:"input_value",name:"VALUE",check:b("StringExpr")}],output:"NumberExpr",colour:SparqlBlocks.Blocks.text.HUE,tooltip:Blockly.Msg.TEXT_LENGTH_TOOLTIP,helpUrl:Blockly.Msg.TEXT_LENGTH_HELPURL})}});SparqlBlocks.Blocks.block("sparql_text_isEmpty",{init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_ISEMPTY_TITLE,args0:[{type:"input_value",name:"VALUE",check:b("StringExpr")}],output:"BooleanExpr",colour:SparqlBlocks.Blocks.text.HUE,tooltip:Blockly.Msg.TEXT_ISEMPTY_TOOLTIP,helpUrl:Blockly.Msg.TEXT_ISEMPTY_HELPURL})}});
SparqlBlocks.Blocks.block("sparql_text_indexOf",{init:function(){var a=[[Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST,"FIRST"],[Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_INDEXOF_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"NumberExpr");this.appendValueInput("VALUE").setCheck(b("StringExpr")).appendField(Blockly.Msg.TEXT_INDEXOF_INPUT_INTEXT);this.appendValueInput("FIND").setCheck(b("StringExpr")).appendField(new Blockly.FieldDropdown(a),
"END");Blockly.Msg.TEXT_INDEXOF_TAIL&&this.appendDummyInput().appendField(Blockly.Msg.TEXT_INDEXOF_TAIL);this.setInputsInline(!0);this.setTooltip(Blockly.Msg.TEXT_INDEXOF_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_text_contains",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-contains");this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("FIND").setCheck(b("StringExpr"));this.appendValueInput("VALUE").setCheck(b("StringExpr")).appendField("is contained in");
this.setInputsInline(!0);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_text_lang",{init:function(){this.setHelpUrl("http://www.w3.org/TR/sparql11-query/#func-lang");this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"BooleanExpr");this.appendValueInput("VALUE").setCheck(b("StringExpr")).appendField("language of");this.appendValueInput("LANG").setCheck(b("StringExpr")).appendField("is");this.setInputsInline(!0);this.setTooltip("")}});SparqlBlocks.Blocks.block("sparql_text_charAt",
{init:function(){this.WHERE_OPTIONS=[[Blockly.Msg.TEXT_CHARAT_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_CHARAT_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_CHARAT_FIRST,"FIRST"],[Blockly.Msg.TEXT_CHARAT_LAST,"LAST"],[Blockly.Msg.TEXT_CHARAT_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.TEXT_CHARAT_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.setOutput(!0,"StringExpr");this.appendValueInput("VALUE").setCheck(b("StringExpr")).appendField(Blockly.Msg.TEXT_CHARAT_INPUT_INTEXT);this.appendDummyInput("AT");
this.setInputsInline(!0);this.updateAt_(!0);this.setTooltip(Blockly.Msg.TEXT_CHARAT_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getInput("AT").type==Blockly.INPUT_VALUE;a.setAttribute("at",b);return a},domToMutation:function(a){a="false"!=a.getAttribute("at");this.updateAt_(a)},updateAt_:function(a){this.removeInput("AT");this.removeInput("ORDINAL",!0);a?(this.appendValueInput("AT").setCheck(b("NumberExpr")),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):
this.appendDummyInput("AT");Blockly.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_CHARAT_TAIL));var c=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(b){var c="FROM_START"==b||"FROM_END"==b;if(c!=a){var f=this.sourceBlock_;f.updateAt_(c);f.setFieldValue(b,"WHERE");return null}});this.getInput("AT").appendField(c,"WHERE")}});SparqlBlocks.Blocks.block("sparql_text_getSubstring",{init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,
"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("STRING").setCheck("String").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);
this.appendDummyInput("AT1");this.appendDummyInput("AT2");Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);this.setInputsInline(!0);this.setOutput(!0,"StringExpr");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getInput("AT1").type==Blockly.INPUT_VALUE;a.setAttribute("at1",b);b=this.getInput("AT2").type==Blockly.INPUT_VALUE;
a.setAttribute("at2",b);return a},domToMutation:function(a){var b="true"==a.getAttribute("at1");a="true"==a.getAttribute("at2");this.updateAt_(1,b);this.updateAt_(2,a)},updateAt_:function(a,c){this.removeInput("AT"+a);this.removeInput("ORDINAL"+a,!0);c?(this.appendValueInput("AT"+a).setCheck(b("NumberExpr")),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+a).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+a);2==a&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&
(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));var d=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+a],function(b){var d="FROM_START"==b||"FROM_END"==b;if(d!=c){var g=this.sourceBlock_;g.updateAt_(a,d);g.setFieldValue(b,"WHERE"+a);return null}});this.getInput("AT"+a).appendField(d,"WHERE"+a);1==a&&this.moveInputBefore("AT1","AT2")}});SparqlBlocks.Blocks.block("sparql_text_changeCase",{init:function(){var a=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,
"UPPERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").setCheck(b("StringExpr")).appendField(new Blockly.FieldDropdown(a),"CASE");this.setOutput(!0,"StringExpr");this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}});SparqlBlocks.Blocks.block("sparql_text_trim",{init:function(){var a=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,
"BOTH"],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);this.setColour(SparqlBlocks.Blocks.text.HUE);this.appendValueInput("TEXT").setCheck(b("StringExpr")).appendField(new Blockly.FieldDropdown(a),"MODE");this.setOutput(!0,"StringExpr");this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)}})})();/*

 Visual Blocks Editor

 Copyright 2012 Google Inc.
 https://developers.google.com/blockly/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
SparqlBlocks.Blocks.tuple={};
(function(){var b=SparqlBlocks.Types.getExtension;SparqlBlocks.Blocks.block("sparql_tuple",{init:function(){this.setHelpUrl(Blockly.Msg.CONTROLS_IF_HELPURL);this.setColour(330);this.appendValueInput("VAL0").setCheck(b("Resource"));this.setPreviousStatement(!0,"Tuple");this.setNextStatement(!0,"Tuple");this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));this.setTooltip("");this.valCount_=0},mutationToDom:function(){if(!this.valCount_)return null;var a=document.createElement("mutation");
this.valCount_&&a.setAttribute("valCount",this.valCount_);return a},domToMutation:function(a){this.valCount_=parseInt(a.getAttribute("valCount"),10);for(a=1;a<=this.valCount_;a++)this.appendValueInput("VAL"+a).setCheck(b("Resource"))},decompose:function(a){var b=Blockly.Block.obtain(a,"sparql_tuple_tuple");b.initSvg();for(var d=b.getInput("STACK").connection,e=1;e<=this.valCount_;e++){var f=Blockly.Block.obtain(a,"sparql_tuple_value");f.initSvg();d.connect(f.previousConnection);d=f.nextConnection}return b},
compose:function(a){for(var c=this.valCount_;0<c;c--)this.removeInput("VAL"+c);this.valCount_=0;for(a=a.getInputTargetBlock("STACK");a;){switch(a.type){case "col":this.valCount_++;c=this.appendValueInput("VAL"+this.valCount_).setCheck(b("Resource"));a.valueConnection_&&c.connection.connect(a.valueConnection_);break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=1;a;){switch(a.type){case "sparql_tuple_value":var d=
this.getInput("VAL"+b);a.valueConnection_=d&&d.connection.targetConnection;b++;break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}}});SparqlBlocks.Blocks.block("sparql_tuple_tuple",{init:function(){this.setColour(330);this.appendDummyInput().appendField("tuple");this.appendStatementInput("STACK");this.setTooltip("");this.contextMenu=!1}});SparqlBlocks.Blocks.block("sparql_tuple_value",{init:function(){this.setColour(330);this.appendDummyInput().appendField("value");
this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("");this.contextMenu=!1}})})();SparqlBlocks.Blocks.variables={};
(function(){SparqlBlocks.Blocks.variables.HUE=330;SparqlBlocks.Blocks.block("sparql_variable",{init:function(){this.setHelpUrl(Blockly.Msg.VARIABLES_GET_HELPURL);this.setColour(SparqlBlocks.Blocks.variables.HUE);this.appendDummyInput().appendField(new Blockly.FieldVariable,"VAR");this.setOutput(!0,"Var");this.setTooltip("")},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(b,a){Blockly.Names.equals(b,this.getFieldValue("VAR"))&&this.setFieldValue(a,"VAR")}});Blockly.Blocks.variables_get=
Blockly.Blocks.sparql_variable;Blockly.Blocks.variables_set=null})();SparqlBlocks.Sparql.bgp={};
(function(){SparqlBlocks.Sparql.sparql_isa=function(a){return(a=SparqlBlocks.Sparql.valueToCode(a,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC))?"a "+a+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_verb_object=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return b?b+" "+(a?a:"[]")+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_reversePath_object=function(a){var b=
SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return b?"^"+b+" "+(a?a:"[]")+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_closurePath_object=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return b&&a?b+"* "+a+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_reverseClosurePath_object=
function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"VERB",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.valueToCode(a,"OBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);return b&&a?"^"+b+"* "+a+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_typedsubject_propertylist=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"SUBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC),d=SparqlBlocks.Sparql.valueToCode(a,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,
"PROPERTY_LIST"),";\n");return d||""!=a?(b?b:"[]")+(d?" a "+d+(""!=a?";":""):"")+(""!=a?"\n"+a:"")+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_subject_propertylist=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"SUBJECT",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"PROPERTY_LIST"),";\n");return""!=a?(b?b:"[]")+(""!=a?"\n"+a:"")+SparqlBlocks.Sparql.STMNT_BRK:""};var b=function(a,b){return[a||""!=b?"[\n"+(a?" a "+a+(""!=
b?";\n":""):"")+(""!=b?b:"")+"\n]":"[]",SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_anontypedsubject_propertylist=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"TYPE",SparqlBlocks.Sparql.ORDER_ATOMIC);a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"PROPERTY_LIST"),";\n");return b(c,a)};SparqlBlocks.Sparql.sparql_anonsubject_propertylist=function(a){a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"PROPERTY_LIST"),";\n");return b(null,
a)}})();SparqlBlocks.Sparql.control={};
(function(){SparqlBlocks.Sparql.sparql_filter=function(b){return(b=SparqlBlocks.Sparql.valueToCode(b,"CONDITION",SparqlBlocks.Sparql.ORDER_NONE))?"FILTER("+b+")"+SparqlBlocks.Sparql.STMNT_BRK:""};SparqlBlocks.Sparql.sparql_union=function(b){var a=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,"OP1"),".\n");b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,"OP2"),".\n");return""==a?""==b?"":"{\n"+b+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:""==b?"{\n"+a+"\n}"+SparqlBlocks.Sparql.STMNT_BRK:
"{\n"+a+"\n} UNION {\n"+b+"\n}"+SparqlBlocks.Sparql.STMNT_BRK};SparqlBlocks.Sparql.sparql_optional=function(b){b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(b,"OP"),".\n");return""==b?"":"OPTIONAL {\n"+b+"\n}"+SparqlBlocks.Sparql.STMNT_BRK}})();SparqlBlocks.Sparql.logic={};
(function(){SparqlBlocks.Sparql.sparql_logic_compare=function(b){var a={EQ:"=",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[b.getFieldValue("OP")],c="="==a||"!="==a?SparqlBlocks.Sparql.ORDER_EQUALITY:SparqlBlocks.Sparql.ORDER_RELATIONAL,d=SparqlBlocks.Sparql.valueToCode(b,"A",c)||"0";b=SparqlBlocks.Sparql.valueToCode(b,"B",c)||"0";return[d+" "+a+" "+b,c]};SparqlBlocks.Sparql.sparql_logic_operation=function(b){var a="AND"==b.getFieldValue("OP")?"&&":"||",c="&&"==a?SparqlBlocks.Sparql.ORDER_LOGICAL_AND:SparqlBlocks.Sparql.ORDER_LOGICAL_OR,
d=SparqlBlocks.Sparql.valueToCode(b,"A",c);b=SparqlBlocks.Sparql.valueToCode(b,"B",c);if(d||b){var e="&&"==a?"true":"false";d||(d=e);b||(b=e)}else b=d="false";return[d+" "+a+" "+b,c]};SparqlBlocks.Sparql.sparql_logic_negate=function(b){var a=SparqlBlocks.Sparql.ORDER_LOGICAL_NOT;return["!"+(SparqlBlocks.Sparql.valueToCode(b,"BOOL",a)||"true"),a]};SparqlBlocks.Sparql.sparql_logic_boolean=function(b){return["TRUE"==b.getFieldValue("BOOL")?"true":"false",SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_logic_ternary=
function(b){var a=SparqlBlocks.Sparql.valueToCode(b,"IF",SparqlBlocks.Sparql.ORDER_COMMA)||"false",c=SparqlBlocks.Sparql.valueToCode(b,"THEN",SparqlBlocks.Sparql.ORDER_COMMA)||'""';b=SparqlBlocks.Sparql.valueToCode(b,"ELSE",SparqlBlocks.Sparql.ORDER_COMMA)||'""';return["IF("+a+", "+c+", "+b+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}})();SparqlBlocks.Sparql.main={};
(function(){var b=function(a){return a.split("").map(function(a){return _.contains("_~.-!$&'()\\*+,;=/?#@%".split(""),a)?"\\"+a:a}).join("")};SparqlBlocks.Sparql.sparql_select=function(a){for(var b=SparqlBlocks.Sparql.stmJoin(SparqlBlocks.Sparql.statementToCode(a,"WHERE"),".\n"),d=a.getFieldValue("LIMIT"),b="SELECT DISTINCT * WHERE {\n"+b+"\n}",e=null,f=1;f<=a.orderFieldCount_;f++){var g=SparqlBlocks.Sparql.valueToCode(this,"ORDER_FIELD"+f,SparqlBlocks.Sparql.ORDER_NONE);if(g){var l=a.getFieldValue("ORDER_DIRECTION"+
f),e=e?e+", ":"ORDER BY ";l&&"DESC"==l&&(e+="DESC");e+="("+g+")"}}e&&(b+="\n"+e);d&&(b+="\nLIMIT "+d);a=b.match(/[^(|!/\^,;\x20|\x09|\x0D|\x0A]+[\x20|\x09|\x0D|\x0A]*:/g);d=null;a&&(d=a.map(function(a){return a.substr(0,a.length-1).trim()}));var k="";d&&d.forEach(function(a){var b=SparqlBlocks.Prefixes.lookForPrefix(a);b&&(k+="PREFIX "+a+":\t<"+b+">\n")});0<k.length&&(b=k+"\n"+b);return[b,SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_prefixed_iri=function(a){var c=a.getFieldValue("PREFIX");
a=a.getFieldValue("LOCAL_NAME");var d=null,e=SparqlBlocks.Prefixes.lookForPrefix(c);e&&(d="<"+e+a+">");d||(d=c+":"+b(a));return[d,SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_iri=function(a){return["<"+a.getFieldValue("IRI")+">",SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.variables_get=function(a){return["?"+a.getFieldValue("VAR"),SparqlBlocks.Sparql.ORDER_ATOMIC]}})();SparqlBlocks.Sparql.math={};
(function(){SparqlBlocks.Sparql.sparql_math_number=function(a){a=a.getFieldValue("NUM");var b=""+parseInt(a);if(a==b)return[a,SparqlBlocks.Sparql.ORDER_ATOMIC];b=parseFloat(a);if(!isNaN(b))return[""+b,SparqlBlocks.Sparql.ORDER_ATOMIC];throw"Not a number: "+a;};SparqlBlocks.Sparql.sparql_math_arithmetic=function(a){var b={ADD:[" + ",SparqlBlocks.Sparql.ORDER_ADDITION],MINUS:[" - ",SparqlBlocks.Sparql.ORDER_SUBTRACTION],MULTIPLY:[" * ",SparqlBlocks.Sparql.ORDER_MULTIPLICATION],DIVIDE:[" / ",SparqlBlocks.Sparql.ORDER_DIVISION]}[a.getFieldValue("OP")],
d=b[0],b=b[1],e=SparqlBlocks.Sparql.valueToCode(a,"A",b)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"B",b)||"0";return[e+d+a,b]};SparqlBlocks.Sparql.sparql_math_single=function(a){var b=a.getFieldValue("OP"),d;if("NEG"==b)return a=SparqlBlocks.Sparql.valueToCode(a,"NUM",SparqlBlocks.Sparql.ORDER_UNARY_NEGATION)||"0","-"==a[0]&&(a=" "+a),["-"+a,SparqlBlocks.Sparql.ORDER_UNARY_NEGATION];a=SparqlBlocks.Sparql.valueToCode(a,"NUM",SparqlBlocks.Sparql.ORDER_NONE)||"0";switch(b){case "ABS":d="ABS("+a+")";
break;case "ROUND":d="ROUND("+a+")";break;case "ROUNDUP":d="CEIL("+a+")";break;case "ROUNDDOWN":d="FLOOR("+a+")"}if(d)return[d,SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];throw"Unknown math operator: "+b;};var b=function(a){return["FLOOR("+a+") = "+a,SparqlBlocks.Sparql.ORDER_EQUALITY]};SparqlBlocks.Sparql.sparql_math_number_property=function(a){var c=SparqlBlocks.Sparql.valueToCode(a,"NUMBER_TO_CHECK",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";switch(a.getFieldValue("PROPERTY")){case "EVEN":return b(c+
" / 2")[0];case "ODD":return c+=" / 2","FLOOR("+c+") != "+c;case "WHOLE":return b(c);case "POSITIVE":return[c+" > 0",SparqlBlocks.Sparql.ORDER_RELATIONAL];case "NEGATIVE":return[c+" < 0",SparqlBlocks.Sparql.ORDER_RELATIONAL];case "DIVISIBLE_BY":return a=SparqlBlocks.Sparql.valueToCode(a,"DIVISOR",SparqlBlocks.Sparql.ORDER_MODULUS)||"0",b(c+" / "+a)[0]}};SparqlBlocks.Sparql.sparql_math_round=SparqlBlocks.Sparql.sparql_math_single;SparqlBlocks.Sparql.sparql_math_modulo=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,
"DIVIDEND",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";a=SparqlBlocks.Sparql.valueToCode(a,"DIVISOR",SparqlBlocks.Sparql.ORDER_DIVISION)||"0";return[b+" - "+("FLOOR(ABS("+b+" / "+a+"))")+" * ABS("+b+") / "+b+" * ABS("+a+")",SparqlBlocks.Sparql.ORDER_SUBTRACTION]};SparqlBlocks.Sparql.sparql_math_constrain=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"VALUE",SparqlBlocks.Sparql.ORDER_RELATIONAL)||"0",d=SparqlBlocks.Sparql.valueToCode(a,"LOW",SparqlBlocks.Sparql.ORDER_RELATIONAL);a=SparqlBlocks.Sparql.valueToCode(a,
"HIGH",SparqlBlocks.Sparql.ORDER_RELATIONAL);return["IF("+b+" < "+d+", "+d+", IF("+b+" > "+a+", "+a+", "+b+") )",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_math_random_int=function(a){var b=SparqlBlocks.Sparql.valueToCode(a,"FROM",SparqlBlocks.Sparql.ORDER_ADDITION)||"0";return["FLOOR(RAND() * ("+(SparqlBlocks.Sparql.valueToCode(a,"TO",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"0")+" - "+b+" + 1) + "+b+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_math_random_float=
function(a){return["RAND()",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}})();SparqlBlocks.Sparql.text={};
(function(){SparqlBlocks.Sparql.sparql_text=function(b){return[SparqlBlocks.Sparql.quote_(b.getFieldValue("TEXT")),SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_text_with_lang=function(b){var a=SparqlBlocks.Sparql.quote_(b.getFieldValue("TEXT"));(b=b.getFieldValue("LANG"))&&0<b.length&&(a+="@"+b);return[a,SparqlBlocks.Sparql.ORDER_ATOMIC]};SparqlBlocks.Sparql.sparql_text_join=function(b){var a;if(0==b.itemCount_)return["''",SparqlBlocks.Sparql.ORDER_ATOMIC];if(1==b.itemCount_)a=SparqlBlocks.Sparql.valueToCode(b,
"ADD0",SparqlBlocks.Sparql.ORDER_NONE)||"''",a="STR("+a+")";else if(2==b.itemCount_)a=SparqlBlocks.Sparql.valueToCode(b,"ADD0",SparqlBlocks.Sparql.ORDER_NONE)||"''",b=SparqlBlocks.Sparql.valueToCode(b,"ADD1",SparqlBlocks.Sparql.ORDER_NONE)||"''",a="CONCAT(STR("+a+"), STR("+b+"))";else{a=Array(b.itemCount_);for(var c=0;c<b.itemCount_;c++)a[c]=SparqlBlocks.Sparql.valueToCode(b,"ADD"+c,SparqlBlocks.Sparql.ORDER_NONE)||"''";a="CONCAT(STR("+a.join("), STR(")+"))"}return[a,SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};
SparqlBlocks.Sparql.sparql_text_length=function(b){return["STRLEN("+(SparqlBlocks.Sparql.valueToCode(b,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_isEmpty=function(b){return["STRLEN("+(SparqlBlocks.Sparql.valueToCode(b,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+") == 0",SparqlBlocks.Sparql.ORDER_EQUALITY]};SparqlBlocks.Sparql.sparql_text_contains=function(b){var a=SparqlBlocks.Sparql.valueToCode(b,"FIND",SparqlBlocks.Sparql.ORDER_COMMA)||
"''";return["CONTAINS("+(SparqlBlocks.Sparql.valueToCode(b,"VALUE",SparqlBlocks.Sparql.ORDER_COMMA)||"''")+", "+a+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_lang=function(b){var a=SparqlBlocks.Sparql.valueToCode(b,"LANG",SparqlBlocks.Sparql.ORDER_COMMA)||"''";return["LANGMATCHES(LANG("+(SparqlBlocks.Sparql.valueToCode(b,"VALUE",SparqlBlocks.Sparql.ORDER_NONE)||"''")+"), "+a+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]};SparqlBlocks.Sparql.sparql_text_charAt=function(b){var a=
b.getFieldValue("WHERE")||"FROM_START",c=SparqlBlocks.Sparql.valueToCode(b,"AT",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"1";b=SparqlBlocks.Sparql.valueToCode(b,"VALUE",SparqlBlocks.Sparql.ORDER_COMMA)||"''";switch(a){case "FIRST":return["SUBSTR("+b+", 1, 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "LAST":return["SUBSTR("+b+", STRLEN("+b+"), 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "FROM_START":return["SUBSTR("+b+", "+c+", 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];case "FROM_END":return["SUBSTR("+
b+", STRLEN("+b+") + 1 - "+c+", 1)",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}throw"Unhandled option (text_charAt).";};SparqlBlocks.Sparql.sparql_text_getSubstring=function(b){var a=SparqlBlocks.Sparql.valueToCode(b,"STRING",SparqlBlocks.Sparql.ORDER_COMMA)||"''",c=b.getFieldValue("WHERE1"),d=b.getFieldValue("WHERE2"),e=SparqlBlocks.Sparql.valueToCode(b,"AT1",SparqlBlocks.Sparql.ORDER_SUBTRACTION)||"1";b=SparqlBlocks.Sparql.valueToCode(b,"AT2",SparqlBlocks.Sparql.ORDER_ADDITION)||"1";if("FIRST"!=c||
"LAST"!=d){if("FIRST"==c)c="1";else if("LAST"==c)c="STRLEN("+a+")";else if("FROM_START"==c)c=e;else if("FROM_END"==c)c="STRLEN("+a+") + 1 - "+e;else throw"Unhandled option (text_getSubstring): "+c;if("FIRST"==d)d="2 - "+c;else if("LAST"==d)d=null;else if("FROM_START"==d)d=b+" + 1 - "+c;else if("FROM_END"==d)d="STRLEN("+a+") + 2 - "+b+" - "+c;else throw"Unhandled option (text_getSubstring): "+d;return[d?"SUBSTR("+a+", "+c+", "+d+")":"SUBSTR("+a+", "+c+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL]}};
SparqlBlocks.Sparql.sparql_text_changeCase=function(b){var a=b.getFieldValue("CASE"),c={UPPERCASE:"UCASE",LOWERCASE:"LCASE"}[a];if(c)return b=SparqlBlocks.Sparql.valueToCode(b,"TEXT",SparqlBlocks.Sparql.ORDER_NONE)||"''",[c+"("+b+")",SparqlBlocks.Sparql.ORDER_FUNCTION_CALL];throw"Unknown case type: "+a;}})();